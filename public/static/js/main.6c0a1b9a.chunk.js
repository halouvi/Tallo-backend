(this["webpackJsonphello-react"]=this["webpackJsonphello-react"]||[]).push([[0],{202:function(e,t){},210:function(e,t,n){},211:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),s=n(16),i=n(27),l=n(17),o=n(10),u=n(38),d=n(123),b=n(124),j=n(11),h=n(6),f=n.n(h),O=n(14),m=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<e;c++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},p=n(68),v=n.n(p),x="/api/",g=v.a.create({withCredentials:!0}),N={get:function(){var e=Object(O.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y(t,"GET",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),post:function(e,t){return y(e,"POST",t)},put:function(e,t){return y(e,"PUT",t)},delete:function(e,t){return y(e,"DELETE",t)}};function y(e){return k.apply(this,arguments)}function k(){return(k=Object(O.a)(f.a.mark((function e(t){var n,c,r,a=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"get",c=a.length>2&&void 0!==a[2]?a[2]:null,e.prev=2,e.next=5,g({url:"".concat(x).concat(t),method:n,data:c});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),e.t0.response.status,console.log("Had issues ".concat(n,"ing to server"),e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var C,w={getById:function(){var e=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.get("board/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e){return N.put("board/".concat(e._id),e)},add:function(e){var t={title:e.title,labels:[{_id:m(),name:"Not Started",color:"red"},{_id:m(),name:"In Progress",color:"orange"},{_id:m(),name:"QA",color:"yellow"},{_id:m(),name:"Done",color:"green"},{_id:m(),name:"Production",color:"blue"}],users:[JSON.parse(sessionStorage.getItem("loggedUser"))],lists:[{_id:m(),title:"To Do",cards:[]},{_id:m(),title:"Doing",cards:[]},{_id:m(),title:"Done",cards:[]},{_id:m(),title:"QA",cards:[]}],activity:[]};return N.post("board",t)}},S=n(125),_=n.n(S),I="JOIN_BOARD",D="BOARD_UPDATED",E=function(){C=_()("/")},A=function(){C=null},R=function(e,t){C.on(e,t)},B=function(e,t){C.emit(e,t)},L=n(30),T={login:function(e){return U.apply(this,arguments)},logout:function(){return J.apply(this,arguments)},signup:function(e){return M.apply(this,arguments)},getUsers:function(e){return N.get("user/".concat(e))},getById:function(e){return N.get("user/".concat(e))},remove:function(e){return N.delete("user/".concat(e))},update:function(e){return N.put("user/".concat(e._id),e)},unreadBooking:function(e){return F.apply(this,arguments)},resetUnreadBookings:function(e){return P.apply(this,arguments)},query:function(e){return N.get("user/users/".concat(e))}};function U(){return(U=Object(O.a)(f.a.mark((function e(t){var n,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("auth/login",t);case 2:return n=e.sent,c=n.user,r=n.userBoards,c=z(c),e.abrupt("return",{user:c,userBoards:r});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("auth/signup",t);case 2:return n=e.sent,e.abrupt("return",z(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.put("user/".concat(t._id),t);case 2:return n=e.sent,e.abrupt("return",z(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.put("user/reset/".concat(t._id),t);case 2:return n=e.sent,e.abrupt("return",z(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return sessionStorage.setItem("loggedUser",JSON.stringify(e)),e}var X="SET_LOGGED_USER",H="SET_USER_BOARDS",V=function(e){return function(t){console.log(e),t({type:H,userBoards:e})}},W=function(e){return function(){var t=Object(O.a)(f.a.mark((function t(n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.query(e);case 2:return c=t.sent,t.abrupt("return",c);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},G=function(e){var t=e.email,n=e.password;return function(){var e=Object(O.a)(f.a.mark((function e(c){var r,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.login({email:t,password:n});case 2:r=e.sent,a=r.user,s=r.userBoards,c({type:X,user:a}),c({type:H,userBoards:s});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},q=function(e){var t=e.fullname,n=e.email,c=e.password,r=e.imgUrl,a=e.boards;return function(){var e=Object(O.a)(f.a.mark((function e(s){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.signup({fullname:t,email:n,password:c,imgUrl:r,boards:a});case 2:i=e.sent,s({type:X,user:i});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Q="SET_BOARD",K="SET_USERS",Y=function(e){return function(){var t=Object(O.a)(f.a.mark((function t(n){var c,r,a,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.add(e);case 2:c=t.sent,r=c.board,a=c.users,s=c.userBoards,console.log(r),n({type:Q,payload:r}),n({type:K,payload:a}),n(V(s));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Z=function(e){return function(){var t=Object(O.a)(f.a.mark((function t(n){var c,r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.getById(e);case 2:c=t.sent,r=c.board,a=c.users,n({type:Q,payload:r}),n({type:K,payload:a});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$=function(e){var t=e.name,n=e.value,c=e.cardId;return function(e,r){var a=Object(L.cloneDeep)(r().boardReducer.board),s=ne(a.lists,c).card;s[t]=n,s=ce(s,t),e(te(a))}},ee=function(e){var t=e.name,n=e.value;return function(e,c){var r=Object(L.cloneDeep)(c().boardReducer.board);r[t]=n,e(te(r))}},te=function(e){return function(){var t=Object(O.a)(f.a.mark((function t(n,c){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(L.cloneDeep)(c().boardReducer.board),n({type:Q,payload:e}),t.prev=2,t.next=5,w.update(e);case 5:B(D,e._id),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),n({type:Q,payload:r}),console.error("Could not update board",t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n){return t.apply(this,arguments)}}()},ne=function(e,t){var n,c,r;return{list:e.find((function(e,a){return e.cards.find((function(e,s){return e._id===t&&(n=e,c=s,r=a,!0)}))})),listIdx:r,card:n,cardIdx:c}},ce=function(e,t){var n,c=JSON.parse(sessionStorage.getItem("loggedUser"));switch(t){case"card":n="Added this card";break;case"desc":n="Changed card description";break;case"members":n="Changed card members list";break;case"title":n="Changed card title";break;case"labels":n="Changed card labels";break;case"attachments":n="Added an attachment to card";break;case"dueDate":n="Changed card's due date";break;case"checklist":n="Changed a checklist item"}return e.activity.unshift({activity:n,createdAt:Date.now(),createdBy:c._id}),e},re={board:null,users:null},ae={user:{},userBoards:[]},se=Object(u.combineReducers)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.user,r=t.userBoards;switch(n){case X:return Object(j.a)(Object(j.a)({},e),{},{user:c});case H:return Object(j.a)(Object(j.a)({},e),{},{userBoards:r});default:return e}},boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case Q:return Object(j.a)(Object(j.a)({},e),{},{board:c});case K:return Object(j.a)(Object(j.a)({},e),{},{users:c});default:return e}}}),ie=Object(u.createStore)(se,Object(b.composeWithDevTools)(Object(u.applyMiddleware)(d.a))),le=n(258),oe=n(126),ue=n.n(oe),de=n(9),be=n(132),je=n(265);function he(e){var t=e.user,n=a.a.useState(null),r=Object(de.a)(n,2),s=r[0],i=r[1],u=Object(o.b)(),d=Object(l.f)(),b=function(){i(null)};return Object(c.jsxs)("div",{className:"simple-menu-section",children:[Object(c.jsx)("div",{className:"menu-btn","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},children:(null===t||void 0===t?void 0:t.imgUrl)?Object(c.jsx)("img",{src:t.imgUrl,alt:""}):Object(c.jsx)("svg",{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:Object(c.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),Object(c.jsxs)(be.a,{id:"simple-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:b,children:[Object(c.jsx)(je.a,{onClick:function(){b(),d.push("/")},children:"Home"}),Object(c.jsx)(je.a,{onClick:b,children:"Profile"}),Object(c.jsx)(je.a,{onClick:function(){b(),u(function(){var e=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.logout();case 2:t({type:X,user:{}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d.push("/")},children:"Logout"})]})]})}var fe=function(){var e=(Object(o.c)((function(e){return e.userReducer}))||{}).user;return Object(c.jsxs)("header",{className:"flex ac jb",children:[Object(c.jsxs)(i.b,{className:"logo-container",to:"/",children:[Object(c.jsx)("svg",{width:"24",height:"24",role:"presentation",focusable:"false",viewBox:"0 0 24 24",children:Object(c.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 5a2 2 0 012-2h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm2 1a1 1 0 011-1h4a1 1 0 011 1v10a1 1 0 01-1 1H6a1 1 0 01-1-1V6zm9-1a1 1 0 00-1 1v6a1 1 0 001 1h4a1 1 0 001-1V6a1 1 0 00-1-1h-4z",fill:"currentColor"})}),Object(c.jsx)("p",{children:"Tallo"})]}),Object(c.jsxs)("div",{className:"nav-container flex",children:[Object(c.jsxs)("nav",{className:"flex jb",children:[Object(c.jsx)(i.c,{className:"add-board-btn nav-item",to:"/create-modal",exact:!0,children:"+"}),Object(c.jsx)(i.c,{className:"nav-item",to:"/",exact:!0,children:"Home"}),Object(c.jsx)(i.c,{className:"nav-item",to:"/board",children:"Board"}),Object(c.jsx)(i.c,{className:"nav-item",to:"/stats",children:"Stats"})]}),Object(c.jsx)(he,{user:e})]})]})},Oe=n(22),me=function(){var e=Object(O.a)(f.a.mark((function e(t){var n,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"iuzstnbj","ariecloud",n="https://api.cloudinary.com/v1_1/".concat("ariecloud","/image/upload"),(c=new FormData).append("file",t.target.files[0]),c.append("upload_preset","iuzstnbj"),e.prev=6,e.next=9,v.a.post(n,c);case 9:return r=e.sent,e.abrupt("return",r.data);case 13:e.prev=13,e.t0=e.catch(6),console.log("ERROR:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),pe=function(e){var t=e.props,n=Object(o.b)(),a=Object(r.useState)({email:"",password:""}),s=Object(de.a)(a,2),i=s[0],l=s[1],u=Object(r.useState)({fullname:"",email:"",password:"",imgUrl:"",boards:[]}),d=Object(de.a)(u,2),b=d[0],h=d[1];Object(r.useEffect)((function(){}),[]);var m=function(e,t){var n=e.target.name,c=e.target.value;"login"===t?l(Object(j.a)(Object(j.a)({},i),{},Object(Oe.a)({},n,c))):h(Object(j.a)(Object(j.a)({},b),{},Object(Oe.a)({},n,c)))},p=function(){var e=Object(O.a)(f.a.mark((function e(c){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,n(G(i));case 3:t.history.push("board");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(O.a)(f.a.mark((function e(c){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,n(q(b));case 3:t.history.push("board");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(t);case 2:n=e.sent,console.log(n.url),h(Object(j.a)(Object(j.a)({},b),{},{imgUrl:n.url}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"login-signup-section",children:[Object(c.jsx)("h2",{children:"Login"}),Object(c.jsxs)("form",{action:"",className:"login-form",onSubmit:p,children:[Object(c.jsx)("label",{htmlFor:"",children:"Email:"}),Object(c.jsx)("input",{type:"text",name:"email",value:i.email,onChange:function(e){return m(e,"login")},id:""}),Object(c.jsx)("label",{htmlFor:"",children:"Password:"}),Object(c.jsx)("input",{type:"text",name:"password",value:i.password,onChange:function(e){return m(e,"login")},id:""}),Object(c.jsx)("button",{children:"Login"})]}),Object(c.jsx)("div",{className:"forms-seperator",children:"-Or-"}),Object(c.jsx)("h2",{children:"Signup"}),Object(c.jsxs)("form",{action:"",className:"signup-form",onSubmit:v,children:[Object(c.jsx)("label",{htmlFor:"",children:"Full Name:"}),Object(c.jsx)("input",{type:"text",name:"fullname",value:b.fullname,onChange:function(e){return m(e,"signup")},id:""}),Object(c.jsx)("label",{htmlFor:"",children:"Email:"}),Object(c.jsx)("input",{type:"text",name:"email",value:b.email,onChange:function(e){return m(e,"signup")},id:""}),Object(c.jsx)("label",{htmlFor:"",children:"Password:"}),Object(c.jsx)("input",{type:"text",name:"password",value:b.password,onChange:function(e){return m(e,"signup")},id:""}),Object(c.jsxs)("label",{htmlFor:"imgUrl",children:[Object(c.jsx)("p",{children:"Upload a Profile Picture:"}),Object(c.jsx)("img",{src:"https://cdn.onlinewebfonts.com/svg/img_192880.png",alt:""})]}),Object(c.jsx)("input",{className:"upload-img",type:"file",name:"imgUrl",onChange:x,id:"imgUrl"}),Object(c.jsx)("button",{children:"Signup"})]})]})},ve=function(e){return Object(c.jsx)("main",{className:"home",children:Object(c.jsx)("div",{className:"container flex col ac jc",children:Object(c.jsx)(pe,{props:e})})})},xe=n(264),ge=n(263),Ne=n(216),ye=n(251),ke=n(249),Ce=n(80),we=n(82),Se=n(250),_e=n(81),Ie=Object(ke.a)((function(e){return{pink:{color:e.palette.getContrastText(Ce.a[500]),backgroundColor:Ce.a[500]},green:{color:"#fff",backgroundColor:we.a[500]},orange:{color:e.palette.getContrastText(Se.a[500]),backgroundColor:Se.a[500]},blue:{color:e.palette.getContrastText(_e.a[500]),backgroundColor:_e.a[500]}}})),De=function(e){var t=e.members,n=Object(o.c)((function(e){return e.boardReducer})).users,r=Ie(),a=function(e){switch(+e){case 0:return r.blue;case 1:return r.green;case 2:return r.pink;case 3:return r.orange}};return n&&(null===t||void 0===t?void 0:t.length)&&Object(c.jsx)(ye.a,{max:4,children:t.map((function(e,t){var r=n.find((function(t){return t._id===e}))||{},s=r.fullname,i=r.imgUrl;return Object(c.jsx)(Ne.a,{alt:s,src:i||"/",className:a(t)},t)}))})},Ee=function(e){var t=e.card,n=e.listId,a=e.handleDrop,s=Object(o.c)((function(e){return e.boardReducer.board.labels})),i=t||{},u=i._id,d=i.title,b=i.attachments,j=i.members,h=i.desc,f=i.dueDate,O=i.labels,m=Object(r.useState)(null),p=Object(de.a)(m,2),v=p[0],x=p[1],g=Object(r.useRef)(null),N=Object(l.f)(),y=Object(ge.a)({collect:function(e){return{isDragging:!!e.isDragging()}},item:{type:"CARD"},begin:function(){var e=g.current.getBoundingClientRect(),c=e.height,r=e.width;return{type:"CARD",card:t,sourceCardId:u,sourceListId:n,height:c,width:r}}}),k=Object(de.a)(y,2),C=k[0].isDragging,w=k[1],S=Object(xe.a)({accept:"CARD",hover:function(e,t){return R(t.getClientOffset().y)},collect:function(e){var t;return{cardOver:!!e.isOver()&&e.getItem().sourceCardId!==u,hoverHeight:null===(t=e.getItem())||void 0===t?void 0:t.height}},drop:function(e){a&&a({item:e,targetCardId:u,targetListId:n,placeholderPos:v})}}),_=Object(de.a)(S,2),I=_[0],D=I.cardOver,E=I.hoverHeight,A=_[1],R=function(e){var t=g.current.getBoundingClientRect(),n=t.top,c=t.height;x(n+c/2>e?0:1)};return Object(c.jsx)("div",{ref:A,className:"card-drop-container".concat(C?" hidden":""),children:Object(c.jsxs)("div",{ref:g,className:"rect-ref",children:[D&&!v&&Object(c.jsx)("div",{className:"placeholder top",style:{height:"".concat(E,"px")}}),Object(c.jsx)("div",{ref:w,className:"card-preview fast",children:Object(c.jsxs)("div",{onClick:function(){return N.push("/board/modal/".concat(u))},className:"container",children:[Object(c.jsx)("div",{className:"card-title",children:d}),Object(c.jsx)("div",{children:b[0]?Object(c.jsx)("img",{src:b[0],alt:""}):""}),Object(c.jsx)("p",{className:"card-desc",children:h}),Object(c.jsx)("div",{className:"labels-section",children:O[0]&&s.map((function(e){return O.some((function(t){return t===e._id}))&&Object(c.jsx)("div",{className:"label ".concat(e.color)},e._id)}))}),Object(c.jsxs)("div",{className:"bottom-section",children:[f&&Object(c.jsxs)("div",{className:"due-date",children:[Object(c.jsx)("img",{src:"https://res.cloudinary.com/ariecloud/image/upload/v1610026807/tallo/clock-circular-outline_rdwoyz.svg",alt:""}),Object(c.jsx)("p",{children:new Date(f).toDateString()})]}),!f&&Object(c.jsx)("div",{}),j[0]&&Object(c.jsx)(De,{members:j})]})]})}),D&&!!v&&Object(c.jsx)("div",{className:"placeholder bottom",style:{height:"".concat(E,"px")}})]})})},Ae=function(e){var t=e.list,n=e.addCard,a=e.handleDrop,s=e.removeList,i=t._id,l=t.title,u=t.cards,d=Object(r.useState)(!1),b=Object(de.a)(d,2),h=b[0],f=b[1],O=Object(r.useState)(null),m=Object(de.a)(O,2),p=m[0],v=m[1],x=Object(r.useRef)(null),g=Object(o.b)(),N=Object(r.useState)({title:"",activity:[],attachments:[],checklist:[],desc:"",dueDate:"",labels:[],members:[]}),y=Object(de.a)(N,2),k=y[0],C=y[1],w=Object(ge.a)({collect:function(e){return{isDragging:!!e.isDragging()}},item:{type:"LIST"},begin:function(){var e=x.current.getBoundingClientRect(),n=e.height,c=e.width;return{type:"LIST",list:t,sourceListId:i,width:c,height:n}}}),S=Object(de.a)(w,2),_=S[0].isDragging,I=S[1],D=Object(xe.a)({accept:["CARD","LIST"],hover:function(e,t){return J(t.getClientOffset().x)},collect:function(e){var t,n;return{hoverWidth:null===(t=e.getItem())||void 0===t?void 0:t.width,hoverHeight:null===(n=e.getItem())||void 0===n?void 0:n.height,cardOver:!!e.isOver()&&"CARD"===e.getItemType()&&(!u.length||1===u.length&&e.getItem().sourceCardId===u[0]._id),listOver:!!e.isOver()&&"LIST"===e.getItemType()&&e.getItem().sourceListId!==i}},drop:function(e,t){a&&(("CARD"!==e.type||t.didDrop())&&"LIST"!==e.type&&u.length||a({item:e,targetListId:i,placeholderPos:p}))}}),E=Object(de.a)(D,2),A=E[0],R=A.cardOver,B=A.listOver,T=A.hoverWidth,U=A.hoverHeight,M=E[1],J=function(e){var t=x.current.getBoundingClientRect(),n=t.left,c=t.width;v(n+c/2>e?0:1)},F=function(e){e.preventDefault(),f(!h)};return Object(c.jsx)("div",{ref:M,className:"list-drop-container".concat(_?" hidden":""),children:Object(c.jsxs)("div",{ref:x,className:"rect-ref flex",children:[B&&!p&&Object(c.jsx)("div",{className:"placeholder left",style:{width:"".concat(T,"px"),height:"".concat(U,"px")}}),Object(c.jsx)("div",{className:"list",children:Object(c.jsxs)("div",{className:"container flex col",children:[Object(c.jsxs)("div",{className:"list-header flex jb",children:[Object(c.jsx)("input",{ref:I,name:"title",className:"list-title fast f-110",value:l,onFocus:function(e){return e.target.select()},onChange:function(e){var t=e.target,n=t.name,c=t.value;g(function(e){var t=e.name,n=e.value,c=e.listId;return function(e,r){var a=Object(L.cloneDeep)(r().boardReducer.board);a.lists.find((function(e){return e._id===c})).list[t]=n,e(te(a))}}({name:n,value:c,listId:i}))},onKeyUp:function(e){var t=e.target,n=e.key;"Enter"!==n&&"Escape"!==n||t.blur()}}),Object(c.jsx)("button",{className:"delete-btn",onClick:function(){return s(i)},children:"\xb7\xb7\xb7"})]}),Object(c.jsxs)("div",{className:"cards flex col",children:[u.map((function(e){return Object(c.jsx)(Ee,{card:e,listId:i,handleDrop:a},e._id)})),R&&Object(c.jsx)("div",{className:"placeholder-card",style:{height:"".concat(U,"px")}})]}),h&&Object(c.jsxs)("form",{action:"",className:"add-card-form",onSubmit:function(e){e.preventDefault(),n(k,i),f(!1),C({title:"",activity:[],attachments:[],checklist:[],desc:"",dueDate:0,labels:[],members:[]})},children:[Object(c.jsx)("input",{autoFocus:!0,autoComplete:"off",placeholder:"Enter a title for this card...",type:"text",name:"title",value:k.title,onChange:function(e,t){var n=e.target,c=n.name,r=n.value;C(Object(j.a)(Object(j.a)({},k),{},Object(Oe.a)({},c,r)))}}),Object(c.jsxs)("div",{className:"add-card-btns flex jb",children:[Object(c.jsx)("button",{className:"add-card-btn",children:"Add Card"}),Object(c.jsx)("button",{onClick:F,className:"close-btn",children:"X"})]})]}),!h&&Object(c.jsxs)("div",{className:"add-card",onClick:F,children:[Object(c.jsx)("span",{children:"+"})," Add another card"]})]})}),B&&!!p&&Object(c.jsx)("div",{className:"placeholder right",style:{width:"".concat(T,"px"),height:"".concat(U,"px")}})]})})},Re=n(5),Be=n(252),Le=n(253),Te=Object(Re.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return Object(c.jsx)(be.a,Object(j.a)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Ue=Object(Re.a)((function(e){return{root:{"&:focus":{}}}}))(je.a);function Me(e){var t=e.userBoards,n=a.a.useState(null),r=Object(de.a)(n,2),s=r[0],i=r[1],l=Object(o.b)(),u=function(){i(null)};return Object(c.jsxs)("div",{className:"boards-select-section",children:[Object(c.jsx)(Be.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",color:"primary",onClick:function(e){i(e.currentTarget)},className:"boards-select-btn",children:"Boards \u25bc"}),Object(c.jsx)(Te,{id:"customized-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:u,children:null===t||void 0===t?void 0:t.map((function(e){return Object(c.jsx)(Ue,{onClick:function(){return t=e._id,l(Z(t)),void u();var t},className:"boards-select-item",children:Object(c.jsx)(Le.a,{primary:e.title})},e._id)}))})]})}var Je=n(261),Fe=n(23),Pe=function(e){var t=e.boardMembers,n=e.setAnchorEl,a=Object(r.useState)([]),s=Object(de.a)(a,2),i=s[0],l=s[1],u=Object(o.b)();Object(r.useEffect)((function(){console.log(t)}),[]);var d=function(){var e=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.target.value)?u(W(n)).then((function(e){return l(e)})):l([]),console.log(i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"members reusable flex col",children:[Object(c.jsx)("button",{className:"close-btn pos-tr",onClick:function(){return n(null)},children:"X"}),Object(c.jsx)("span",{className:"title bold asc",children:"Members"}),Object(c.jsx)("input",{type:"text",placeholder:"Search Members",onChange:d}),Object(c.jsx)("div",{className:"list flex col",children:i&&i[0]&&(null===i||void 0===i?void 0:i.map((function(e){return t.some((function(t){return t._id===e._id}))&&Object(c.jsxs)("div",{className:"flex jb",children:[Object(c.jsx)("span",{children:e.fullname}),Object(c.jsx)("button",{onClick:function(){return function(e){var n=t.filter((function(t){return t._id!==e}));u(ee({name:"users",value:n}))}(e._id)},children:"X"})]},e._id)})))}),i&&i[0]&&Object(c.jsxs)("div",{className:"list flex col",children:[Object(c.jsx)("span",{className:"bold",children:"Users"}),i.map((function(e){return t.every((function(t){return t._id!==e._id}))&&Object(c.jsxs)("div",{className:"flex jb",children:[Object(c.jsx)("span",{children:e.fullname}),Object(c.jsx)("button",{onClick:function(){return n=e,console.log("adding user...",n),void u(ee({name:"users",value:[].concat(Object(Fe.a)(t),[n])}));var n},children:"+"})]},e._id)}))]})]})},ze=Object(ke.a)((function(e){return{typography:{padding:e.spacing(2)}}}));function Xe(e){var t=e.boardMembers,n=(ze(),a.a.useState(null)),r=Object(de.a)(n,2),s=r[0],i=r[1],l=Boolean(s),o=l?"simple-popover":void 0;return Object(c.jsxs)("div",{className:"board-members-section",children:[Object(c.jsx)(Be.a,{className:"board-members-btn","aria-describedby":o,variant:"contained",onClick:function(e){i(e.currentTarget)},children:"Board Members \u25bc"}),Object(c.jsx)(Je.a,{id:o,open:l,anchorEl:s,onClose:function(){i(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(c.jsx)(Pe,{boardMembers:t,setAnchorEl:i})})]})}var He=function(e){var t=e.userBoards,n=e.boardTitle,r=e.boardMembers;Object(l.f)();return Object(c.jsxs)("div",{className:"board-header-section",children:[Object(c.jsx)(Me,{userBoards:t}),Object(c.jsx)("h2",{children:n}),Object(c.jsx)(Xe,{boardMembers:r})]})},Ve=function(){var e=Object(o.c)((function(e){return e.boardReducer.board}))||{},t=e.lists,n=e.title,a=e._id,s=e.users,i=(Object(o.c)((function(e){return e.userReducer}))||{}).userBoards,l=Object(r.useState)(!1),u=Object(de.a)(l,2),d=u[0],b=u[1],h=Object(r.useState)({title:"",cards:[]}),f=Object(de.a)(h,2),O=f[0],p=f[1],v=Object(o.b)();Object(r.useEffect)((function(){return a||v(Z("60006d95c1a9f1ce84d21c64")),E(),B(I,a),R(D,(function(e){return v({type:Q,payload:e})})),function(){A()}}),[]);var x=function(e,t){v(function(e,t){return function(n,c){var r=Object(L.cloneDeep)(c().boardReducer.board);e._id=m(),e=ce(e,"card");var a=r.lists.findIndex((function(e){return e._id===t}));r.lists[a].cards.push(e),n(te(r))}}(e,t))},g=function(e){window.confirm("Are you sure?")&&v(function(e){return function(t,n){var c=Object(L.cloneDeep)(n().boardReducer.board),r=c.lists.findIndex((function(t){return t._id===e}));c.lists.splice(r,1),t(te(c))}}(e))},N=Object(xe.a)({accept:"LIST",collect:function(e){return{isOver:!!e.isOver()}}}),y=Object(de.a)(N,2),k=(y[0].isOver,y[1]),C=function(e){var n=e.item,c=e.targetListId,r=e.targetCardId,a=e.placeholderPos,s=n.type,i=n.sourceListId,l=n.sourceCardId,o=Object(L.cloneDeep)(t);if("LIST"===s){var u=o.findIndex((function(e){return e._id===i})),d=o.splice(u,1),b=Object(de.a)(d,1)[0],j=o.findIndex((function(e){return e._id===c}));o.splice(j+a,0,b)}else if("CARD"===s){var h=ne(o,l),f=h.cardIdx,O=h.list.cards.splice(f,1),m=Object(de.a)(O,1)[0],p=ne(o,r),x=p.cardIdx;p.list.cards.splice(x+a,0,m)}v(ee({name:"lists",value:o}))};return Object(c.jsxs)("main",{ref:k,className:"board",children:[Object(c.jsx)(He,{boardTitle:n,boardMembers:s,userBoards:i}),Object(c.jsxs)("section",{className:"container flex",children:[null===t||void 0===t?void 0:t.map((function(e){return Object(c.jsx)(Ae,{list:e,removeList:g,addCard:x,handleDrop:C},e._id)})),d&&Object(c.jsxs)("form",{action:"",className:"add-list-form",onSubmit:function(e){var t;e.preventDefault(),v((t=O,function(e,n){var c=Object(L.cloneDeep)(n().boardReducer.board);t._id=m(),c.lists.push(t),e(te(c))})),b(!1),p({title:"",cards:[]})},children:[Object(c.jsx)("input",{placeholder:"Enter a title for this list...",type:"text",name:"title",value:O.title,onChange:function(e,t){var n=e.target,c=n.name,r=n.value;p(Object(j.a)(Object(j.a)({},O),{},Object(Oe.a)({},c,r)))}}),Object(c.jsxs)("div",{className:"add-list-btns",children:[Object(c.jsx)("button",{className:"add-list-btn",children:"Add list"}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),b(!1)},className:"close-btn",children:"X"})]})]}),!d&&Object(c.jsx)("div",{className:"add-list-container",onClick:function(){return b(!0)},children:Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{children:"+"})," Add another list"]})})]})]})},We=n(255),Ge=n(130),qe=n.n(Ge),Qe=n(259),Ke=n(262),Ye=n(254),Ze=n(83),$e=n(260);function et(e){return Object(c.jsxs)($e.a,{display:"flex",alignItems:"center",children:[Object(c.jsx)($e.a,{width:"100%",mr:1,children:Object(c.jsx)(Ye.a,Object(j.a)({variant:"determinate"},e))}),Object(c.jsx)($e.a,{minWidth:35,children:Object(c.jsx)(Ze.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}var tt=Object(ke.a)({root:{width:"100%"}});function nt(e){var t=e.progress,n=tt();return Object(c.jsx)("div",{className:n.root,children:Object(c.jsx)(et,{value:t})})}var ct=function(e){var t=e.checklist,n=e.cardChecklists,a=e.cardId,s=Object(r.useState)(!1),i=Object(de.a)(s,2),l=i[0],u=i[1],d=Object(r.useState)({_id:m(),desc:"",isChecked:!1}),b=Object(de.a)(d,2),h=b[0],p=b[1],v=Object(o.b)(),x=function(){u(!l)},g=function(){var e=Object(O.a)(f.a.mark((function e(){var c,r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=JSON.parse(JSON.stringify(t)),r=JSON.parse(JSON.stringify(n)),console.log(c),s=r.findIndex((function(e){return e._id===c._id})),console.log(s),r[s].items.push(h),e.next=8,v($({name:"checklist",value:Object(Fe.a)(r),cardId:a}));case 8:p({_id:m(),desc:"",isChecked:!1}),x();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"checklists-section",children:[Object(c.jsxs)("div",{className:"list-header",children:[Object(c.jsx)("h3",{children:t.title}),Object(c.jsx)("button",{onClick:function(){var e=JSON.parse(JSON.stringify(n)),c=e.findIndex((function(e){return e._id===t._id}));e.splice(c,1),v($({name:"checklist",value:Object(Fe.a)(e),cardId:a}))},children:"Delete"})]}),Object(c.jsx)(nt,{progress:function(){var e=+t.items.filter((function(e){return!0===e.isChecked})).length/+t.items.length*100;return isNaN(e)&&(e=0),e}()}),t.items.map((function(e,r){return Object(c.jsxs)("div",{className:"checklist-item-container",children:[Object(c.jsxs)("div",{className:"checklist-item-main",children:[Object(c.jsx)(Ke.a,{color:"primary",inputProps:{"aria-label":"checkbox"},checked:e.isChecked,onChange:function(){return function(e){var c=JSON.parse(JSON.stringify(t)),r=JSON.parse(JSON.stringify(n));c.items[e].isChecked=!c.items[e].isChecked;var s=r.findIndex((function(e){return e._id===c._id}));r[s]=c,v($({name:"checklist",value:Object(Fe.a)(r),cardId:a}))}(r)}}),Object(c.jsx)("p",{children:e.desc})]}),Object(c.jsx)("button",{onClick:function(){return function(e){var c=JSON.parse(JSON.stringify(t)),r=JSON.parse(JSON.stringify(n));c.items.splice(e,1);var s=r.findIndex((function(e){return e._id===c._id}));r[s]=c,v($({name:"checklist",value:Object(Fe.a)(r),cardId:a}))}(r)},children:"X"})]},r)})),!l&&Object(c.jsx)("button",{onClick:x,children:"Add an item"}),l&&Object(c.jsxs)("div",{className:"add-item-container",children:[Object(c.jsx)("input",{autoFocus:!0,type:"text",name:"desc",value:h.desc,onChange:function(e){var t=e.target.name,n=e.target.value;p(Object(j.a)(Object(j.a)({},h),{},Object(Oe.a)({},t,n)))},id:""}),Object(c.jsxs)("div",{className:"btns-container",children:[Object(c.jsx)("button",{onClick:g,children:"Add"}),Object(c.jsx)("button",{onClick:x,children:"X"})]})]})]})},rt=n(256),at=function(e){var t=e.children,n=e.anchorEl,r=e.setAnchorEl;return n&&Object(c.jsx)(We.a,{onClickAway:function(){return r(null)},children:Object(c.jsx)(rt.a,{open:!!n,anchorEl:n,disablePortal:!0,style:{zIndex:1e3},onClose:function(){return r(null)},placement:"bottom-start",children:t})})},st=function(e){var t=e.card,n=t.attachments,a=t._id,s=e.setAnchorEl,i=Object(r.useState)(""),l=Object(de.a)(i,2),u=l[0],d=l[1],b=Object(o.b)(),j=function(){var e=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(t);case 2:n=e.sent,console.log(n.url),d(n.url);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"attachment-section reusable",children:[Object(c.jsx)("button",{className:"close-btn pos-tr",onClick:function(){return s(null)},children:"X"}),Object(c.jsx)("p",{children:"Attachments"}),Object(c.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),b($({name:"attachments",value:[].concat(Object(Fe.a)(n),[u]),cardId:a}))},className:"attachment-form",children:[Object(c.jsxs)("label",{htmlFor:"imgUrl",children:[Object(c.jsx)("p",{children:"Upload an attachment:"}),Object(c.jsx)("img",{src:"https://cdn.onlinewebfonts.com/svg/img_192880.png",alt:""})]}),Object(c.jsx)("input",{className:"upload-img",type:"file",name:"imgUrl",onChange:j,id:"imgUrl"}),Object(c.jsx)("button",{children:"Save"})]})]})},it=function(e){var t=e.card,n=t._id,a=t.checklist,s=e.setAnchorEl,i=Object(r.useState)({_id:m(),title:"",items:[]}),l=Object(de.a)(i,2),u=l[0],d=l[1],b=Object(o.b)();return Object(c.jsxs)("div",{className:"checklist-section reusable flex col",children:[Object(c.jsx)("button",{className:"close-btn pos-tr",onClick:function(){return s(null)},children:"X"}),Object(c.jsx)("p",{className:"title bold asc",children:"Add a Check List"}),Object(c.jsxs)("form",{action:"",className:"flex col",onSubmit:function(e){e.preventDefault(),b($({name:"checklist",value:[].concat(Object(Fe.a)(a),[u]),cardId:n}))},children:[Object(c.jsx)("label",{htmlFor:"checklist-title",children:"Title"}),Object(c.jsx)("input",{autoFocus:!0,id:"checklist-title",value:u.title,onChange:function(e){var t=e.target.value,n=e.target.name;d(Object(j.a)(Object(j.a)({},u),{},Object(Oe.a)({},n,t))),console.log(u)},name:"title",type:"text",placeholder:"Insert a title..."}),Object(c.jsx)("button",{children:"Add"})]})]})},lt=function(e){var t=e.card,n=t.dueDate,a=t._id,s=e.setAnchorEl,i=Object(r.useState)(""),l=Object(de.a)(i,2),u=l[0],d=l[1],b=Object(r.useState)(Date.now()),j=Object(de.a)(b,2),h=j[0],f=j[1],O=Object(o.b)();return Object(c.jsxs)("div",{className:"due-date-section reusable flex col",children:[Object(c.jsx)("button",{className:"close-btn pos-tr",onClick:function(){return s(null)},children:"X"}),Object(c.jsx)("p",{className:"title bold asc",children:"Change Due Date"}),Object(c.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),O($({name:"dueDate",value:h,cardId:a}))},className:"due-date-form flex col",children:[Object(c.jsx)("input",{type:"date",value:u||function e(){if(e){var t=new Date(n).getDate(),c=new Date(n).getMonth()+1,r=new Date(n).getFullYear();return"".concat(c).length<2&&(c="0"+c),r+"-"+c+"-"+t}return""}(),onChange:function(e){var t=e.target.value,n=new Date(t).getTime();d(t),f(n)},name:"dueDate",id:""}),Object(c.jsx)("button",{children:"Save"})]})]})},ot=function(e){var t=e.labelToEdit,n=e.setLabelToEdit,a=(e.editMode,e.colors),s=Object(o.b)(),i=Object(o.c)((function(e){return e.boardReducer.board.labels})),l=Object(r.useState)(Object(j.a)({},t)),u=Object(de.a)(l,2),d=u[0],b=u[1],h=function(e){var t=e.target,n=t.name,c=t.value;b(Object(j.a)(Object(j.a)({},d),{},Object(Oe.a)({},n,c)))};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{className:"ass",onClick:function(){return n(null)},children:"Back"}),Object(c.jsxs)("span",{className:"title bold asc",children:[d._id?"Edit":"Add"," Label"]}),Object(c.jsx)("label",{htmlFor:"name",children:"Name"}),Object(c.jsx)("input",{id:"name",name:"name",type:"text",value:d.name,onChange:h}),Object(c.jsx)("label",{children:"Select Color"}),Object(c.jsx)("div",{className:"grid c4 g6",children:a.map((function(e){return Object(c.jsx)("input",{type:"button",name:"color",value:e,onClick:h,className:"pointer color fast ".concat(e).concat(d.color===e?" selected":"")},e)}))}),Object(c.jsxs)("div",{className:"flex jb",children:[Object(c.jsx)("button",{onClick:function(){var e=Object(L.cloneDeep)(i);if(d._id){var c=i.findIndex((function(e){return e._id===t._id}));e.splice(c,1,d)}else d._id=m(),e.push(d);s(ee({name:"labels",value:e})),n(null)},children:"Save"}),d._id&&Object(c.jsx)("button",{onClick:function(){var e=JSON.parse(JSON.stringify(i)).filter((function(e){return e._id!==t._id}));s(ee({name:"labels",value:e})),n(null)},children:"Delete"})]})]})},ut=function(e){var t=e.card,n=t.labels,a=t._id,s=e.setAnchorEl,i=Object(o.c)((function(e){return e.boardReducer.board.labels})),l=Object(r.useState)(""),u=Object(de.a)(l,2),d=u[0],b=u[1],j=Object(r.useState)(null),h=Object(de.a)(j,2),f=h[0],O=h[1],m=Object(o.b)(),p={_id:"",name:"",color:"red"};return Object(c.jsxs)("div",{className:"labels reusable flex col",children:[Object(c.jsx)("button",{className:"close-btn",onClick:function(){return s(null)},children:"X"}),f?Object(c.jsx)(ot,{labelToEdit:f,setLabelToEdit:O,colors:["red","orange","yellow","green","blue","purple","pink","black"]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"title bold asc",children:"Labels"}),Object(c.jsx)("input",{type:"text",placeholder:"Search Labels",value:d,onChange:function(e){return b(e.target.value.toLowerCase())}}),Object(c.jsx)("div",{className:"list flex col",children:i.map((function(e){return e.name.toLowerCase().includes(d)&&Object(c.jsxs)("div",{className:"label fast flex jb pointer ".concat(e.color),children:[Object(c.jsxs)("div",{className:"fw",onClick:function(){return function(e){if(n.some((function(t){return t===e}))){var t=n.filter((function(t){return t!==e}));m($({name:"labels",value:t,cardId:a}))}else m($({name:"labels",value:[].concat(Object(Fe.a)(n),[e]),cardId:a}))}(e._id)},children:[e.name,n.some((function(t){return t===e._id}))&&Object(c.jsx)("span",{children:" V"})]}),Object(c.jsx)("button",{onClick:function(){return O(e)},children:"edit"})]},e._id)}))}),Object(c.jsx)("button",{onClick:function(){return O(p)},children:"Add Label"})]})]})},dt=function(e){var t=e.card,n=t.members,a=t._id,s=e.setAnchorEl,i=Object(o.c)((function(e){return e.boardReducer.board})).users,l=Object(r.useState)(""),u=Object(de.a)(l,2),d=u[0],b=u[1],j=Object(r.useState)(null),h=Object(de.a)(j,2),f=h[0],O=h[1],m=Object(o.b)();Object(r.useEffect)((function(){O(i.filter((function(e){return n.every((function(t){return t!==e._id}))&&(e.fullname.includes(d)||e.email.includes(d))})))}),[d,n]);return Object(c.jsxs)("div",{className:"members reusable flex col",children:[Object(c.jsx)("button",{className:"close-btn pos-tr",onClick:function(){return s(null)},children:"X"}),Object(c.jsx)("span",{className:"title bold asc",children:"Members"}),Object(c.jsx)("input",{type:"text",placeholder:"Search Members",value:d,onChange:function(e){return b(e.target.value)}}),Object(c.jsx)("div",{className:"list flex col",children:i.map((function(e){return n.some((function(t){return t===e._id}))&&Object(c.jsxs)("div",{className:"flex jb",children:[Object(c.jsx)("span",{children:e.fullname}),Object(c.jsx)("button",{onClick:function(){return function(e){var t=n.filter((function(t){return t!==e}));m($({name:"members",value:t,cardId:a}))}(e._id)},children:"X"})]},e._id)}))}),d&&Object(c.jsxs)("div",{className:"list flex col",children:[Object(c.jsx)("span",{className:"bold",children:"Board Members"}),f.map((function(e){return Object(c.jsxs)("div",{className:"flex jb",children:[Object(c.jsx)("span",{children:e.fullname}),Object(c.jsx)("button",{onClick:function(){return t=e._id,void m($({name:"members",value:[].concat(Object(Fe.a)(n),[t]),cardId:a}));var t},children:"+"})]},e._id)}))]})]})},bt=function(e){var t=e.card,n=Object(r.useState)(null),a=Object(de.a)(n,2),s=a[0],i=a[1],l={Members:dt,Labels:ut,CheckList:it,DueDate:lt,Attachment:st},o=function(e){e.stopPropagation(),i(e.target!==s?e.target:null)};return Object(c.jsxs)("div",{className:"side-bar flex col",children:[Object(c.jsx)("span",{className:"title",children:"Add To Card"}),Object(c.jsxs)("div",{className:"buttons",children:[Object.keys(l).map((function(e){return Object(c.jsx)("span",{className:"modal-btn fast",onClick:o,children:e.split(/(?=[A-Z])/).join(" ")},e)})),Object(c.jsx)(at,{anchorEl:s,setAnchorEl:i,children:s&&function(){var e=l[s.innerText.split(" ").join("")];return Object(c.jsx)(e,{setAnchorEl:i,card:t})}()})]})]})},jt=function(e){var t=Object(o.c)((function(e){return e.boardReducer}))||{},n=t.board,a=t.users,s=Object(r.useState)(null),i=Object(de.a)(s,2),u=i[0],d=i[1],b=Object(r.useState)(null),h=Object(de.a)(b,2),f=h[0],O=h[1],m=Object(r.useState)(null),p=Object(de.a)(m,2),v=p[0],x=p[1],g=Object(r.useState)(null),N=Object(de.a)(g,2),y=N[0],k=N[1],C=Object(r.useState)(null),w=Object(de.a)(C,2),S=w[0],_=w[1],I=f||{},D=I.activity,E=I.attachments,A=I.members,R=I.labels,B=I.checklist,L=Object(r.useRef)(null),T=y||{},U=T.title,M=T.desc,J=Object(l.g)()._id,F=Object(l.f)().goBack,P=Object(o.b)(),z=null===D||void 0===D?void 0:D.slice(0,5),X=null===E||void 0===E?void 0:E.slice(0,3);Object(r.useEffect)((function(){if(n){var e=P((r=J,function(e,t){var n=t().boardReducer.board.lists;return ne(n,r)})),t=e.list,c=e.card;d(t),O(c),y||k({title:c.title,desc:c.desc})}else P(Z("5fe4b65432d4a24dbcb7afa2"));var r}),[n,J]),Object(r.useEffect)((function(){return document.addEventListener("keyup",H),function(){document.removeEventListener("keyup",H)}}),[]);var H=function(e){return"Escape"===e.key&&F()},V=function(e){var t=e.target,n=t.name,c=t.value;k(Object(j.a)(Object(j.a)({},y),{},Object(Oe.a)({},n,c))),clearTimeout(v),x(setTimeout((function(){P($({name:n,value:c,cardId:J}))}),1e3))},W=function(e){e.stopPropagation(),_(S?null:L.current)};return f&&a&&Object(c.jsx)("div",{className:"modal-screen flex as jc",children:Object(c.jsx)(We.a,{onClickAway:F,children:Object(c.jsx)("div",{className:"modal-section",children:Object(c.jsxs)("div",{className:"container wrap",children:[Object(c.jsxs)("div",{className:"modal-header fw flex wrap as jb",children:[Object(c.jsx)("input",{className:"card-title",autoComplete:"off",name:"title",value:U,onFocus:function(e){return e.target.select()},onChange:V}),Object(c.jsx)("button",{className:"exit-btn fast flex ac jc",onClick:F,children:"X"}),Object(c.jsxs)("p",{className:"modal-subtitle fw",children:["in list ",Object(c.jsx)("span",{children:u.title})]})]}),Object(c.jsxs)("div",{className:"content",children:[A[0]&&Object(c.jsx)("div",{className:"members-container",children:Object(c.jsx)(De,{className:"card-avatars",members:A})}),R[0]&&Object(c.jsxs)("div",{className:"labels-section",children:[Object(c.jsx)("h3",{children:"Labels"}),Object(c.jsxs)("div",{ref:L,className:"labels-container flex",children:[n.labels.map((function(e){var t=e._id,n=e.color,r=e.name;return R.some((function(e){return e===t}))&&Object(c.jsx)("div",{className:"label ".concat(n," pointer fast"),onClick:W,children:r},t)})),Object(c.jsx)("button",{className:"modal-btn",onClick:W,children:"+"}),Object(c.jsx)(at,{anchorEl:S,setAnchorEl:_,children:Object(c.jsx)(ut,{card:f,setAnchorEl:_})})]})]}),Object(c.jsxs)("div",{className:"desc-container",children:[Object(c.jsx)("h3",{children:"Description"}),Object(c.jsx)(Qe.a,{id:"outlined-multiline-static",multiline:!0,placeholder:"Add a more detailed description...",rows:4,variant:"outlined",name:"desc",value:M,onChange:V})]}),B[0]&&Object(c.jsx)("div",{className:"checklists-container",children:B.map((function(e,t){return Object(c.jsx)(ct,{cardChecklists:B,checklist:e,cardId:J},t)}))}),E[0]&&Object(c.jsxs)("div",{className:"attachments-container",children:[Object(c.jsx)("h3",{children:"Attachments"}),Object(c.jsx)("div",{className:"attach-container flex",children:X.map((function(e,t){return Object(c.jsx)("img",{src:e,alt:""},t)}))})]}),Object(c.jsxs)("div",{className:"activity-section",children:[Object(c.jsx)("h3",{children:"Activity"}),Object(c.jsx)("ul",{className:"activity-container",children:z.map((function(e){var t,n=e.activity,r=e.createdBy,s=e.createdAt,i=a.find((function(e){return e._id===r}))||{},l=i.fullname,o=i.imgUrl;return l&&Object(c.jsx)("li",{children:Object(c.jsx)("div",{className:"activity-main",children:Object(c.jsxs)("div",{className:"activity-secondary",children:[Object(c.jsx)(Ne.a,{alt:l,src:o||"/"}),Object(c.jsxs)("div",{className:"activity-txt",children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{className:"bold",children:[l," "]}),n]}),Object(c.jsx)("p",{children:(t=s,qe()(t).fromNow())})]})]})})},s)}))})]})]}),Object(c.jsx)(bt,{card:f})]})})})})},ht=n(257),ft=function(){var e=Object(ht.a)((function(e){return{item:e.getItem(),pos:e.getSourceClientOffset()}})),t=e.item,n=e.pos,r=t||{},a=r.type,s=r.list,i=r.sourceListId,l=r.width,o=r.height,u=r.card;return t&&!!n&&Object(c.jsxs)("div",{className:"is-dragging",style:{position:"absolute",top:"".concat(n.y,"px"),left:"".concat(n.x,"px"),width:"".concat(l,"px"),height:"".concat(o,"px"),transform:"rotate(3deg)",zIndex:10},children:["CARD"===a&&Object(c.jsx)(Ee,{card:u,listId:i}),"LIST"===a&&Object(c.jsx)(Ae,{list:s})]})},Ot=(n(210),function(e){var t=Object(r.useState)({title:""}),n=Object(de.a)(t,2),a=n[0],s=n[1],i=Object(o.b)(),u=Object(l.f)().goBack,d=Object(l.f)(),b=Object(r.useRef)();Object(r.useEffect)((function(){return document.addEventListener("keyup",h),document.getElementById("root").addEventListener("mouseup",h),function(){document.removeEventListener("keyup",h),document.getElementById("root").removeEventListener("mouseup",h)}}),[]);var h=function(e){var t=e.key,n=e.target,c=e.type;"keyup"===c&&"Escape"===t?u():"mouseup"!==c||b.current.contains(n)||u()},m=function(){var e=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(Y(a));case 2:d.push("/board");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"create-board-section",children:Object(c.jsxs)("div",{className:"create-board-container",ref:b,children:[Object(c.jsx)("button",{onClick:u,children:"X"}),Object(c.jsx)("label",{htmlFor:"",children:"Board Title:"}),Object(c.jsx)("input",{name:"title",type:"text",value:a.title,onChange:function(e){var t=e.target.name,n=e.target.value;s(Object(j.a)(Object(j.a)({},a),{},Object(Oe.a)({},t,n))),console.log(a)}}),Object(c.jsx)("button",{onClick:m,children:"Create Board"})]})})}),mt=function(){return Object(c.jsx)(o.a,{store:ie,children:Object(c.jsxs)(le.a,{backend:ue.a,children:[Object(c.jsxs)(i.a,{children:[Object(c.jsx)(fe,{}),Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{path:"/board",component:Ve}),Object(c.jsx)(l.a,{path:"/",component:ve})]}),Object(c.jsx)(l.a,{path:"/board/modal/:_id",component:jt}),Object(c.jsx)(l.a,{path:"/create-modal",component:Ot})]}),Object(c.jsx)(ft,{})]})})};Object(s.render)(Object(c.jsx)(r.StrictMode,{children:Object(c.jsx)(mt,{})}),document.getElementById("root"))}},[[211,1,2]]]);
//# sourceMappingURL=main.6c0a1b9a.chunk.js.map