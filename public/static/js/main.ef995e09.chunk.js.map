{"version":3,"sources":["pages/service/socketService.js","store/board/BoardActions.js","pages/service/httpService.js","pages/service/utilService.js","pages/service/boardService.js","pages/service/userService.js","store/user/UserActions.js","store/board/BoardReducer.js","store/user/UserReducer.js","store/Store.js","components/Header/Trash/Trash.jsx","components/Avatars/CardAvatar.jsx","components/CreateBoardModal/CreateBoardModal.jsx","components/Popover/Popover.jsx","assets/+.svg","components/Popover/PopoverCmps/Menus/UserMenu.jsx","components/Header/Header.jsx","components/Popover/PopoverCmps/ColorPicker/ColorPicker.jsx","components/Popover/PopoverCmps/Labels/LabelEditor.jsx","components/Popover/PopoverCmps/Labels/LabelsPopover.jsx","assets/x.svg","components/Popover/PopoverCmps/Members/CardMembersPopover.jsx","components/Popover/PopoverCmps/MoveCard/MoveCardPopover.jsx","components/Popover/PopoverCmps/Menus/CardMenu.jsx","components/Popover/PopoverHeader.jsx","components/Popover/PopoverCmps/Delete/DeletePopover.jsx","components/Popover/PopoverCmps/Menus/ListMenu.jsx","components/Board/List/ListHeader/ListHeader.jsx","hooks/useDisableAltKeyBlur.js","assets/clock.svg","components/VideoPlayer/VideoPlayer.jsx","components/Avatars/CardAvatars.jsx","components/Board/CardPreview/CardPreview.jsx","components/Board/List/AddCard/AddCard.jsx","components/Board/List/List.jsx","components/Popover/PopoverCmps/BoardColor.jsx","components/Popover/PopoverCmps/Members/BoardMembersPopover.jsx","components/Popover/PopoverCmps/Menus/BoardSelect.jsx","assets/color-pallete.svg","components/Board/BoardHeader/BoardHeader.jsx","components/Board/AddList/AddList.jsx","pages/Board/Board.jsx","assets/icon-facebook.svg","assets/icon-linkedin.svg","assets/icon-twitter.svg","components/Home/HomeFooter/HomeFooter.jsx","assets/bg-pattern-home-3.svg","components/Home/HomeGetStarted/HomeGetStarted.jsx","assets/bg-pattern-home-1.svg","assets/bg-pattern-home-2.svg","components/Home/HomeHero/HomeHero.jsx","assets/icon-cog.svg","assets/icon-chart.svg","assets/icon-person.svg","components/Home/HomeMain/HomeMain.jsx","assets/bg-pattern-home-4-about-3.svg","assets/bg-pattern-home-5.svg","components/Home/HomeQuotes/HomeQuotes.jsx","pages/Home/Home.jsx","pages/CardModal/CardHeader/CardHeader.jsx","components/Popover/PopoverCmps/CheckList/CheckListPopover.jsx","components/Popover/PopoverCmps/DueDate/DueDatePopover.jsx","pages/service/mediaService.js","components/Popover/PopoverCmps/Attachment/AttachmentPopover.jsx","components/Popover/PopoverCmps/AddVideo/VideoPopover.jsx","pages/CardModal/CardAside/CardAside.jsx","pages/CardModal/CardMain/CardActivity.jsx","pages/CardModal/CardMain/CardDescription.jsx","pages/CardModal/CardMain/CardVideo.jsx","pages/CardModal/CardMain/CardAttachments.jsx","components/CardChecklist/ProgressBar.jsx","components/CardChecklist/CardChecklist.jsx","pages/CardModal/CardMain/CardChecklists.jsx","pages/CardModal/CardNav/CardNav.jsx","pages/CardModal/CardMain/CardMembers.jsx","pages/CardModal/CardMain/CardLabels.jsx","pages/CardModal/CardModal.jsx","components/LoginSignup/LoginSignup.jsx","components/Loader/Loader.jsx","App.jsx","pages/service/dndService.jsx","index.js"],"names":["socket","timer","BASE_URL","axios","Axios","create","withCredentials","httpService","get","endpoint","data","a","newTokensNeeded","getNewTokens","ajax","post","put","delete","accessToken","method","url","headers","authorization","undefined","res","response","match","exp","jwtDecode","Date","now","makeId","length","txt","possible","i","charAt","Math","floor","random","capitalize","string","toLowerCase","split","map","s","toUpperCase","substring","join","colorPicker","name","test","range","RegExp","boardService","id","board","_id","title","userId","users","labels","color","lists","cards","activity","desc","dueDate","members","attachments","checklists","socketTypes","socketService","io","eventName","cb","on","off","emit","userService","query","email","creds","userTypes","LOGIN","dispatch","user","type","payload","boardTypes","SET_BOARD","console","error","SIGNUP","RESET_STATE","SET_ITEMS","SET_DRAG_TYPE","CLEAR_BOARD","CLEAR_ITEMS","list","card","UPDATE_BOARD","value","getState","nextBoard","clone","boardReducer","_removeUserFromCards","SAVE_BOARD","prevBoard","itemId","GET_BY_ID","clearTimeout","setTimeout","_findItems","UPDATE_CARD","cardId","_activityLog","HANDLE_DROP","source","destination","droppableId","index","splice","sourceList","targetList","targetId","listIdx","cardIdx","find","currList","currListIdx","currCard","currCardIdx","nextUsers","userToRemove","includes","forEach","filter","memberId","field","userReducer","unshift","createdAt","createdBy","initState","dragType","isLoading","rootReducer","combineReducers","state","boards","store","createStore","composeWithDevTools","applyMiddleware","thunk","Trash","useSelector","classPicker","isDraggingOver","snapshot","droppableProps","placeholder","innerRef","ref","className","CardAvatar","imgUrl","size","tooltip","Tooltip","arrow","disableHoverListener","Avatar","alt","src","CreateBoardModal","toggleModal","useDispatch","history","useHistory","useState","setTitle","useKey","useLockBodyScroll","onClick","ev","stopPropagation","onChange","target","boardId","ADD_BOARD","push","useStyles","makeStyles","theme","popper","zIndex","top","left","marginTop","width","height","borderWidth","borderColor","palette","background","paper","position","fontSize","content","margin","display","borderStyle","TOGGLE_POPOVER","usePopover","eventBus","useBus","togglePopover","cmp","preserveAnchor","isRedundantClickAway","document","body","Popover","useListener","anchorEl","DynCmp","rect","useSetState","setState","closePopover","inModal","useLocation","pathname","isSameAnchor","anchor","currentTarget","nativeEvent","nextAnchor","getBoundingClientRect","avoidCardModal","arrowRef","setArrowRef","classes","anchorRef","useRef","bottom","ClickAwayListener","onClickAway","mouseEvent","Popper","open","current","modifiers","offset","enabled","element","style","placement","transition","TransitionProps","Grow","timeout","_","UserMenu","MenuList","MenuItem","Header","useToggle","isModalOpen","navigate","dest","isActive","to","role","focusable","viewBox","fillRule","clipRule","d","fill","Button","plus","ColorPicker","selected","LabelEditor","labelToEdit","closeEditor","gLabels","updatedLabel","setUpdatedLabel","handleInput","isNewLabel","updateLabels","updatedLabels","onBack","TextField","variant","label","idx","findIndex","LabelsPopover","searchTerm","toggleLabel","labelId","filteredLabels","useUpdateEffect","gLabel","editLabel","CardMembersPopover","activeMembers","searchRes","updateState","toggleMember","useEffect","x","MoveCardPopover","targetIdx","setTarget","InputLabel","htmlFor","Select","inputProps","disabled","CardMenu","Menu","Labels","Members","Move_Card","Delete_Card","DeletePopover","Object","entries","str","process","PopoverHeader","ListMenu","listId","DELETE_CARD","DELETE_LIST","Delete_List","ListHeader","dragHandleProps","setIsTitleBlurred","isBlurred","activeElement","blurTitle","blur","listInStore","cardInStore","disableAltKeyBlur","key","preventDefault","onMouseDown","onMouseUp","select","onBlur","onSelect","onKeyUp","autoComplete","UPDATE_LIST","VideoPlayer","videoUrl","isGrouped","requestedUrl","paused","getVideoState","pause","currentTime","volume","muted","play","controls","onCanPlay","CardAvatars","max","AvatarGroup","CardPreview","memo","cardVideo","activeLabels","toggleMenu","avoidModal","openModal","menuBtnHovered","setMenuBtnHovered","isDragging","isDropAnimating","draggingOver","draggableId","draggableProps","anchorid","onMouseEnter","onMouseLeave","clock","moment","format","AddCard","isAddCard","toggleAddCard","newCardTitle","setNewCardTitle","onSubmit","ADD_CARD","autoFocus","List","isTitleBlurred","dragClass","disableInteractiveElementBlocking","onScroll","BoardColor","getElementById","BoardMembersPopover","setAnchorEl","filteredRes","every","toggleUser","currUser","isMe","BoardSelect","selectBoard","selectedBoard","BoardHeader","pallete","AddList","isAddList","toggleAddList","newListTitle","setNewListTitle","Board","classList","add","remove","direction","HomeFooter","exact","facebookImg","linkedinImg","twitterImg","HomeGetStarted","patternThree","scrollTop","documentElement","HomeHero","leftImg","rightImg","HomeMain","iconPerson","iconCog","iconChart","HomeQuotes","patternOne","patternTwo","xmlns","Home","props","root","CardHeader","handleEdit","closeModal","listTitle","onKeyPress","onFocus","CheckListPopover","items","checklist","setChecklist","action","DueDatePopover","prevDueDate","dateFormat","setDateFormat","setDueDate","prevDate","toDate","getDate","toMonth","getMonth","toYear","getFullYear","timestamp","getTime","UPLOAD_URL","mediaService","upload","FORM_DATA","FormData","append","files","AttachmentPopover","attachmentUrl","setAttachmentUrl","isUploaded","setIsUploaded","uploadImg","secure_url","cx","cy","rx","ry","AddVideoPopover","setVideoUrl","uploadVideo","log","CardAside","cmpMap","Add_To_Card","Check_List","Due_Date","Attachment","Video","Actions","CardActivity","activityWithUserData","item","isSameUserAsPrev","slice","fromNow","CardDescription","multiline","rows","CardVideo","CardAttachments","attachment","LinearProgressWithLabel","Box","alignItems","mr","LinearProgress","minWidth","Typography","round","ProgressBar","progress","CardChecklist","showInput","toggleInput","isChecked","newItem","setNewItem","toogleCheckBox","aList","removeItem","isNaN","progressStatus","Checkbox","checked","CardChecklists","CardNav","cycleCards","nextCardId","CardMembers","activeUsers","CardLabels","openPopover","CardModal","useParams","setEditables","LoginSingup","goBack","emailAvailable","setEmailAvailable","setTimer","password","setCreds","setUser","handleInputLogin","handleInputSignup","login","signup","Loader","App","useMount","useBeforeunload","PrivateRoute","path","component","DndProvider","children","onDragStart","onDragEnd","render"],"mappings":"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","file":"static/js/main.ef995e09.chunk.js","sourcesContent":["import io from 'socket.io-client'\r\nconst BASE_URL = process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030/'\r\nexport var socket\r\n\r\nexport const socketTypes = {\r\n  JOIN_BOARD: 'JOIN_BOARD',\r\n  LEAVE_BOARD: 'LEAVE_BOARD',\r\n  BOARD_UPDATED: 'BOARD_UPDATED',\r\n}\r\n\r\nexport const socketService = {\r\n  setup() {\r\n    socket = io(BASE_URL)\r\n  },\r\n  terminate() {\r\n    socket = null\r\n  },\r\n  on(eventName, cb) {\r\n    socket.on(eventName, cb)\r\n  },\r\n  off(eventName, cb) {\r\n    socket.off(eventName, cb)\r\n  },\r\n  emit(eventName, data) {\r\n    socket.emit(eventName, data)\r\n  },\r\n}\r\n","import { boardService } from '../../pages/service/boardService'\r\nimport { socketService, socketTypes } from '../../pages/service/socketService.js'\r\nimport { userTypes } from '../user/UserActions'\r\nimport { cloneDeep as clone } from 'lodash'\r\n\r\nexport const boardTypes = {\r\n  RESET_STATE: 'RESET_STATE',\r\n  SET_BOARD: 'SET_BOARD',\r\n  SET_ITEMS: 'SET_ITEMS',\r\n  SET_DRAG_TYPE: 'SET_DRAG_TYPE'\r\n}\r\n\r\nexport const CLEAR_BOARD = () => dispatch => dispatch({ type: boardTypes.RESET_STATE })\r\n\r\nexport const CLEAR_ITEMS = () => dispatch => {\r\n  dispatch({\r\n    type: boardTypes.SET_ITEMS,\r\n    payload: { list: null, card: null }\r\n  })\r\n}\r\n\r\nexport const ADD_BOARD = title => async (dispatch, getState) => {\r\n  const userId = getState().userReducer.user._id\r\n  const board = boardService.createNewBoard(title, userId)\r\n  try {\r\n    const { boardId } = await boardService.add(board)\r\n    dispatch({ type: boardTypes.SET_BOARD, payload: { _id: boardId, ...board } })\r\n    dispatch({ type: userTypes.SET_NEW_USER_BOARD, payload: { _id: boardId, title: board.title } })\r\n  } catch (err) {\r\n    console.error(err)\r\n  }\r\n}\r\n\r\nexport const GET_BOARD_BY_ID = id => async dispatch => {\r\n  try {\r\n    const board = await boardService.getById(id)\r\n    dispatch({ type: boardTypes.SET_BOARD, payload: board })\r\n  } catch (err) {\r\n    console.error(`GET_BOARD_BY_ID ERROR: ${err}`)\r\n  }\r\n}\r\n\r\nexport const UPDATE_BOARD = ({ name, value }) => (dispatch, getState) => {\r\n  const nextBoard = clone(getState().boardReducer.board)\r\n  if (name === 'users') _removeUserFromCards(nextBoard, value)\r\n  nextBoard[name] = value\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nlet timer\r\nexport const SAVE_BOARD = nextBoard => (dispatch, getState) => {\r\n  const { board, list, card } = getState().boardReducer || {}\r\n  const prevBoard = clone(board)\r\n  const itemId = card?._id || list?._id\r\n  dispatch({ type: boardTypes.SET_BOARD, payload: nextBoard })\r\n  if (itemId) dispatch(GET_BY_ID(itemId))\r\n  clearTimeout(timer)\r\n  timer = setTimeout(async () => {\r\n    try {\r\n      await boardService.update(nextBoard)\r\n      socketService.emit(socketTypes.BOARD_UPDATED, nextBoard._id)\r\n    } catch (err) {\r\n      dispatch({ type: boardTypes.SET_BOARD, payload: prevBoard })\r\n      if (itemId) dispatch(GET_BY_ID(itemId))\r\n      console.error('Could not update board', err)\r\n    }\r\n  }, 1500)\r\n}\r\n\r\nexport const ADD_LIST = title => (dispatch, getState) => {\r\n  const nextBoard = clone(getState().boardReducer.board)\r\n  const list = boardService.createNewList(title)\r\n  nextBoard.lists.push(list)\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nexport const UPDATE_LIST = ({ name, value, listId }) => (dispatch, getState) => {\r\n  const nextBoard = clone(getState().boardReducer.board)\r\n  const { list } = _findItems(nextBoard, listId)\r\n  list[name] = value\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nexport const DELETE_LIST = listId => (dispatch, getState) => {\r\n  const nextBoard = clone(getState().boardReducer.board)\r\n  const { listIdx } = _findItems(nextBoard, listId)\r\n  nextBoard.lists.splice(listIdx, 1)\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nexport const GET_BY_ID = itemId => (dispatch, getState) => {\r\n  const board = getState().boardReducer.board\r\n  const { list, card } = _findItems(board, itemId)\r\n  dispatch({ type: boardTypes.SET_ITEMS, payload: { list, card } })\r\n}\r\n\r\nexport const ADD_CARD = (title, listId) => (dispatch, getState) => {\r\n  const nextBoard = clone(getState().boardReducer.board)\r\n  const card = boardService.createNewCard(title)\r\n  dispatch(_activityLog(card, 'addCard'))\r\n  const { list } = _findItems(nextBoard, listId)\r\n  list.cards.push(card)\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nexport const UPDATE_CARD = ({ name, value, cardId }) => (dispatch, getState) => {\r\n  const nextBoard = clone(getState().boardReducer.board)\r\n  const { card } = _findItems(nextBoard, cardId)\r\n  card[name] = value\r\n  dispatch(_activityLog(card, name))\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nexport const DELETE_CARD = cardId => (dispatch, getState) => {\r\n  const nextBoard = clone(getState().boardReducer.board)\r\n  const { cardIdx, list } = _findItems(nextBoard, cardId)\r\n  list.cards.splice(cardIdx, 1)\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nexport const HANDLE_DROP = ({ source, destination, type }) => (dispatch, getState) => {\r\n  if (\r\n    !destination ||\r\n    (source.droppableId === destination.droppableId && source.index === destination.index)\r\n  )\r\n    return\r\n  const nextBoard = clone(getState().boardReducer.board)\r\n  if (type === 'LIST') {\r\n    const [list] = nextBoard.lists.splice(source.index, 1)\r\n    nextBoard.lists.splice(destination.index, 0, list)\r\n  } else {\r\n    const { list: sourceList } = _findItems(nextBoard, source.droppableId)\r\n    const { list: targetList } = _findItems(nextBoard, destination.droppableId)\r\n    const [card] = sourceList.cards.splice(source.index, 1)\r\n    targetList?.cards.splice(destination.index, 0, card)\r\n  }\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nconst _findItems = (board, targetId) => {\r\n  var list, listIdx, card, cardIdx\r\n  board.lists.find((currList, currListIdx) => {\r\n    if (currList._id === targetId) {\r\n      list = currList\r\n      listIdx = currListIdx\r\n      card = null\r\n      cardIdx = currList.cards.length\r\n      return true\r\n    } else {\r\n      currList.cards.find((currCard, currCardIdx) => {\r\n        if (currCard._id === targetId) {\r\n          list = currList\r\n          listIdx = currListIdx\r\n          card = currCard\r\n          cardIdx = currCardIdx\r\n          return true\r\n        } else return false\r\n      })\r\n      return card ? true : false\r\n    }\r\n  })\r\n  return { list, listIdx, card, cardIdx }\r\n}\r\n\r\nconst _removeUserFromCards = ({ users, lists }, nextUsers) => {\r\n  const { _id: userToRemove } = users.find(userId => !nextUsers.includes(userId)) || {}\r\n  if (userToRemove) {\r\n    lists.forEach(({ cards }) => {\r\n      cards.forEach(card => {\r\n        card.members = card.members.filter(memberId => memberId !== userToRemove)\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nconst _activityLog = (card, field) => (dispatch, getState) => {\r\n  const userId = getState().userReducer.user._id\r\n  var activity\r\n  switch (field) {\r\n    case 'addCard':\r\n      activity = 'Added this card'\r\n      break\r\n    case 'desc':\r\n      activity = 'Changed card description'\r\n      break\r\n    case 'members':\r\n      activity = 'Changed card members list'\r\n      break\r\n    case 'title':\r\n      activity = 'Changed card title'\r\n      break\r\n    case 'labels':\r\n      activity = 'Changed card labels'\r\n      break\r\n    case 'attachments':\r\n      activity = 'Added an attachment to card'\r\n      break\r\n    case 'dueDate':\r\n      activity = \"Changed card's due date\"\r\n      break\r\n    case 'checklist':\r\n      activity = 'Changed a checklist item'\r\n      break\r\n    default:\r\n      break\r\n  }\r\n  card.activity.unshift({ activity, createdAt: Date.now(), createdBy: userId })\r\n  return card\r\n}\r\n","import Axios from 'axios'\r\nimport jwtDecode from 'jwt-decode'\r\nconst BASE_URL = process.env.NODE_ENV !== 'development' ? '/api/' : '//localhost:3030/api/'\r\nvar axios = Axios.create({\r\n  withCredentials: true\r\n})\r\n\r\nexport const httpService = {\r\n  get: async (endpoint, data) => {\r\n    if (newTokensNeeded(endpoint)) await getNewTokens()\r\n    return await ajax(endpoint, 'GET', data)\r\n  },\r\n\r\n  post: async (endpoint, data) => {\r\n    if (newTokensNeeded(endpoint)) await getNewTokens()\r\n    return await ajax(endpoint, 'POST', data)\r\n  },\r\n\r\n  put: async (endpoint, data) => {\r\n    if (newTokensNeeded(endpoint)) await getNewTokens()\r\n    return await ajax(endpoint, 'PUT', data)\r\n  },\r\n\r\n  delete: async (endpoint, data) => {\r\n    if (newTokensNeeded(endpoint)) await getNewTokens()\r\n    return await ajax(endpoint, 'DELETE', data)\r\n  }\r\n}\r\n\r\nlet accessToken = null\r\nconst ajax = async (endpoint, method, data = null) => {\r\n  try {\r\n    const res = await axios({\r\n      url: BASE_URL + endpoint,\r\n      headers: { authorization: `bearer ${accessToken}` },\r\n      method,\r\n      data\r\n    })\r\n    if (res.data.accessToken !== undefined) accessToken = res.data.accessToken\r\n    return res.data\r\n  } catch ({ response: { data: err } }) {\r\n    throw err\r\n  }\r\n}\r\n\r\nexport const newTokensNeeded = endpoint => {\r\n  if (endpoint.match(/login|signup|logout|validate_email/)) return false\r\n  const { exp } = jwtDecode(accessToken)\r\n  return Date.now() >= exp * 1000 ? true : false\r\n}\r\n\r\nexport const getNewTokens = async () => {\r\n  const res = await ajax('auth/refresh_token', 'POST')\r\n  accessToken = res.data.accessToken\r\n}\r\n","export const makeId = (length = 8) => {\r\n  var txt = ''\r\n  var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\r\n  for (let i = 0; i < length; i++) {\r\n    txt += possible.charAt(Math.floor(Math.random() * possible.length))\r\n  }\r\n  return txt\r\n}\r\n\r\nexport const capitalize = string => {\r\n  return string\r\n    ? string\r\n        .toLowerCase()\r\n        .split(/,|-| /)\r\n        .map(s => s[0].toUpperCase() + s.substring(1))\r\n        .join(' ')\r\n    : ''\r\n}\r\n\r\nexport const colorPicker = (name = 'a') => {\r\n  const test = range => new RegExp(`(?=[${range}])`, 'i').test(name[1])\r\n  switch (true) {\r\n    case test('a-c'):\r\n      return 'red'\r\n    case test('d-f'):\r\n      return 'orange'\r\n    case test('g-i'):\r\n      return 'yellow'\r\n    case test('j-l'):\r\n      return 'green'\r\n    case test('m-o'):\r\n      return 'blue'\r\n    case test('p-r'):\r\n      return 'purple'\r\n    case test('s-u'):\r\n      return 'pink'\r\n    case test('v-x'):\r\n      return 'black'\r\n    case test('y-z'):\r\n      return 'gold'\r\n    default:\r\n      return 'gray'\r\n  }\r\n}\r\n","import { httpService } from './httpService'\r\nimport { makeId } from './utilService'\r\n\r\nexport const boardService = {\r\n  getById: id => httpService.get(`board/${id}`),\r\n\r\n  update: board => httpService.put(`board/${board._id}`, board),\r\n\r\n  add: board => httpService.post(`board`, board),\r\n\r\n  createNewBoard: (title, userId) => ({\r\n    title,\r\n    users: [userId],\r\n    labels: [\r\n      { _id: makeId(), title: 'Not Started', color: 'red' },\r\n      { _id: makeId(), title: 'In Progress', color: 'orange' },\r\n      { _id: makeId(), title: 'QA', color: 'yellow' },\r\n      { _id: makeId(), title: 'Done', color: 'green' },\r\n      { _id: makeId(), title: 'Production', color: 'blue' }\r\n    ],\r\n    lists: [\r\n      { _id: makeId(), title: 'To Do', cards: [] },\r\n      { _id: makeId(), title: 'Doing', cards: [] },\r\n      { _id: makeId(), title: 'Done', cards: [] },\r\n      { _id: makeId(), title: 'QA', cards: [] }\r\n    ],\r\n    activity: []\r\n  }),\r\n\r\n  createNewList: title => ({\r\n    _id: makeId(),\r\n    title,\r\n    cards: []\r\n  }),\r\n\r\n  createNewCard: title => ({\r\n    _id: makeId(),\r\n    title,\r\n    desc: '',\r\n    dueDate: '',\r\n    members: [],\r\n    labels: [],\r\n    attachments: [],\r\n    checklists: [],\r\n    activity: []\r\n  }),\r\n\r\n  createNewLabel: title => ({\r\n    _id: makeId(),\r\n    title,\r\n    color: ''\r\n  })\r\n}\r\n","import { httpService } from './httpService.js'\r\n\r\nexport const userService = {\r\n  query: query => httpService.get(`user/users/${query}`),\r\n  \r\n  validateEmail: email => httpService.get(`user/validate_email/${email}`),\r\n\r\n  login: creds => httpService.post(creds ? 'auth/login' : 'auth/refresh_token/login', creds),\r\n\r\n  signup: creds => httpService.post('auth/signup', creds),\r\n\r\n  logout: () => httpService.post('auth/logout')\r\n}\r\n","import { userService } from '../../pages/service/userService.js'\r\nimport { boardTypes, CLEAR_BOARD } from '../board/BoardActions.js'\r\n\r\nexport const userTypes = {\r\n  SET_IS_LOADING: 'SET_IS_LOADING',\r\n  SET_LOGGED_USER: 'SET_LOGGED_USER',\r\n  SET_NEW_USER_BOARD: 'SET_NEW_USER_BOARD',\r\n  SET_USER_BOARDS: 'SET_USER_BOARDS'\r\n}\r\n\r\nexport const DEMO_LOGIN = () => async dispatch => {\r\n  var res\r\n  try {\r\n    res = await userService.login()\r\n  } catch (err) {\r\n    try {\r\n      res = await userService.login({ email: 'deni@avdija.com', password: '123' })\r\n    } catch (err) {\r\n      console.error(`DEMO_LOGIN ${err}`)\r\n    }\r\n  } finally {\r\n    if (res) {\r\n      dispatch({ type: userTypes.SET_LOGGED_USER, payload: res.user })\r\n      dispatch({ type: boardTypes.SET_BOARD, payload: res.board })\r\n    }\r\n    dispatch({ type: userTypes.SET_IS_LOADING, payload: false })\r\n  }\r\n}\r\n\r\nexport const LOGIN = creds => async dispatch => {\r\n  try {\r\n    const { user, board } = await userService.login(creds)\r\n    dispatch({ type: userTypes.SET_LOGGED_USER, payload: user })\r\n    dispatch({ type: boardTypes.SET_BOARD, payload: board })\r\n  } catch (err) {\r\n    console.error(`LOGIN ${err}`)\r\n  }\r\n}\r\n\r\nexport const SIGNUP = creds => async dispatch => {\r\n  try {\r\n    const { user } = await userService.signup(creds)\r\n    dispatch({ type: userTypes.SET_LOGGED_USER, payload: user })\r\n  } catch (err) {\r\n    console.error(err)\r\n  }\r\n}\r\n\r\nexport const LOGOUT = () => async dispatch => {\r\n  try {\r\n    await userService.logout()\r\n    dispatch({ type: userTypes.SET_LOGGED_USER, payload: null })\r\n    dispatch(CLEAR_BOARD())\r\n  } catch (err) {\r\n    console.error(err)\r\n  }\r\n}\r\n","import { boardTypes } from './BoardActions'\r\n\r\nconst initState = {\r\n  board: null,\r\n  list: null,\r\n  card: null,\r\n  dragType: null\r\n}\r\n\r\nexport const boardReducer = (state = initState, { type, payload }) => {\r\n  switch (type) {\r\n    case boardTypes.RESET_STATE:\r\n      return initState\r\n    case boardTypes.SET_BOARD:\r\n      return {\r\n        ...state,\r\n        board: payload\r\n      }\r\n    case boardTypes.SET_ITEMS:\r\n      return {\r\n        ...state,\r\n        list: payload.list,\r\n        card: payload.card\r\n      }\r\n    case boardTypes.SET_DRAG_TYPE:\r\n      return {\r\n        ...state,\r\n        dragType: payload\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import { userTypes } from './UserActions'\r\n\r\nconst initState = {\r\n  isLoading: true,\r\n  user: null\r\n}\r\n\r\nexport const userReducer = (state = initState, { type, payload }) => {\r\n  switch (type) {\r\n    case userTypes.SET_IS_LOADING:\r\n      return {\r\n        ...state,\r\n        isLoading: payload\r\n      }\r\n    case userTypes.SET_LOGGED_USER:\r\n      return {\r\n        ...state,\r\n        user: payload\r\n      }\r\n    case userTypes.SET_USER_BOARDS:\r\n      return {\r\n        ...state,\r\n        user: { ...state.user, boards: payload }\r\n      }\r\n    case userTypes.SET_NEW_USER_BOARD:\r\n      return {\r\n        ...state,\r\n        user: { ...state.user, boards: [...state.user.boards, payload] }\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import { combineReducers, createStore, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport { boardReducer } from './board/BoardReducer'\r\nimport { userReducer } from './user/UserReducer'\r\n\r\nconst rootReducer = combineReducers({\r\n  userReducer,\r\n  boardReducer\r\n})\r\nexport const store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunk)))\r\n","import { Droppable } from 'react-beautiful-dnd'\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport const Trash = () => {\r\n  const dragType = useSelector(state => state.boardReducer.dragType)\r\n\r\n  const classPicker = ({ isDraggingOver }) => {\r\n    return `trash ${dragType !== 'CARD' ? ' invisible' : isDraggingOver ? ' red' : 'trans'}`\r\n  }\r\n\r\n  return (\r\n    <Droppable droppableId=\"TRASH\" type=\"CARD\">\r\n      {({ droppableProps, placeholder, innerRef }, snapshot) => (\r\n        <section ref={innerRef} {...droppableProps} className={classPicker(snapshot)}>\r\n          Drop here to delete\r\n          <div className=\"hidden\">{placeholder}</div>\r\n        </section>\r\n      )}\r\n    </Droppable>\r\n  )\r\n}\r\n","import Tooltip from '@material-ui/core/Tooltip'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport { capitalize, colorPicker } from 'pages/service/utilService'\r\n\r\nexport const CardAvatar = ({ user: { name, imgUrl }, size = 'medium', tooltip, className }) => {\r\n  return (\r\n    <Tooltip title={capitalize(name)} arrow disableHoverListener={!tooltip}>\r\n      <div className={className}>\r\n        <Avatar\r\n          alt={capitalize(name)}\r\n          src={imgUrl || '/'}\r\n          className={`avatar ${size} ${imgUrl ? 'white' : colorPicker(name)}`}\r\n        />\r\n      </div>\r\n    </Tooltip>\r\n  )\r\n}\r\n","import { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useKey, useLockBodyScroll } from 'react-use'\r\nimport { ADD_BOARD } from 'store/board/BoardActions'\r\n\r\nexport const CreateBoardModal = ({ toggleModal }) => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const [title, setTitle] = useState('')\r\n\r\n  useKey('Escape', toggleModal)\r\n  \r\n  useLockBodyScroll()\r\n\r\n  const handleInput = ({ target: { value } }) => setTitle(value)\r\n\r\n  const addBoard = () => {\r\n    dispatch(ADD_BOARD(title))\r\n    toggleModal()\r\n    history.push('/board')\r\n  }\r\n\r\n  return (\r\n    <div className=\"modal-screen\" onClick={toggleModal}>\r\n      <div className=\"create-board-section\" onClick={ev => ev.stopPropagation()}>\r\n        <div className=\"create-board-container\">\r\n          <div className=\"title-container\">\r\n            <h2>Add a Board</h2>\r\n            <button className=\"exit-btn\" onClick={toggleModal}>\r\n              X\r\n            </button>\r\n          </div>\r\n          <label className=\"flex col\">\r\n            Board Title:\r\n            <input value={title} onChange={handleInput} />\r\n          </label>\r\n          <button onClick={addBoard}>Create Board</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { ClickAwayListener, makeStyles, Popper } from '@material-ui/core'\r\nimport Grow from '@material-ui/core/Grow'\r\nimport { useEffect, useRef, useState } from 'react'\r\nimport { useBus, useListener } from 'react-bus'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useLocation } from 'react-router'\r\nimport { useKey, useSetState, useUpdateEffect } from 'react-use'\r\nimport { CLEAR_ITEMS } from '../../store/board/BoardActions'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  popper: {\r\n    zIndex: 1,\r\n    '&[x-placement*=\"bottom\"] $arrow': {\r\n      top: 0,\r\n      left: 0,\r\n      marginTop: '-0.9em',\r\n      width: '3em',\r\n      height: '1em',\r\n      '&::before': {\r\n        borderWidth: '0 1em 1em 1em',\r\n        borderColor: `transparent transparent ${theme.palette.background.paper} transparent`\r\n      }\r\n    }\r\n  },\r\n  arrow: {\r\n    position: 'absolute',\r\n    fontSize: 7,\r\n    width: '3em',\r\n    height: '3em',\r\n    '&::before': {\r\n      content: '\"\"',\r\n      margin: 'auto',\r\n      display: 'block',\r\n      width: 0,\r\n      height: 0,\r\n      borderStyle: 'solid'\r\n    }\r\n  }\r\n}))\r\n\r\nconst TOGGLE_POPOVER = 'TOGGLE_POPOVER'\r\nexport const usePopover = () => {\r\n  const eventBus = useBus()\r\n  return {\r\n    togglePopover: (ev, cmp, preserveAnchor) => {\r\n      eventBus.emit(TOGGLE_POPOVER, [ev, cmp, preserveAnchor])\r\n    },\r\n\r\n    isRedundantClickAway: ev => {\r\n      return ev.isRedundantClickAway || (ev.target === document.body && ev.type === 'click')\r\n    }\r\n  }\r\n}\r\n\r\nexport const Popover = () => {\r\n  useListener(TOGGLE_POPOVER, payload => togglePopover(...payload))\r\n  const { isRedundantClickAway } = usePopover()\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const initState = { anchorEl: null, DynCmp: null, rect: {} }\r\n  const [{ anchorEl, DynCmp, rect }, setState] = useSetState(initState)\r\n  const list = useSelector(state => state.boardReducer.list)\r\n\r\n  const closePopover = () => {\r\n    if (!inModal && list) dispatch(CLEAR_ITEMS())\r\n    setState(initState)\r\n  }\r\n\r\n  const inModal = useLocation().pathname.includes('board/card')\r\n\r\n  const isSameAnchor = (ev, anchor) => ev.currentTarget === anchorEl || anchor === anchorEl\r\n\r\n  const togglePopover = (ev = {}, cmp, preserveAnchor) => {\r\n    if (isRedundantClickAway(ev)) return\r\n    if (!cmp || isSameAnchor(ev)) closePopover()\r\n    else {\r\n      ev.nativeEvent.isRedundantClickAway = true\r\n      const nextAnchor = preserveAnchor ? anchorEl : ev.currentTarget\r\n      setState({\r\n        anchorEl: nextAnchor,\r\n        DynCmp: cmp,\r\n        rect: nextAnchor.getBoundingClientRect()\r\n      })\r\n    }\r\n  }\r\n\r\n  // useEffect(() => {\r\n  //   window.addEventListener('wheel', togglePopover)\r\n  //   return () => {\r\n  //     window.removeEventListener('wheel', togglePopover)\r\n  //   }\r\n  // }, [])\r\n\r\n  useKey(\r\n    'Escape',\r\n    ev => {\r\n      if (!DynCmp) return\r\n      ev.avoidCardModal = true\r\n      togglePopover(ev)\r\n    },\r\n    {},\r\n    [anchorEl]\r\n  )\r\n\r\n  const [arrowRef, setArrowRef] = useState(null)\r\n  const classes = useStyles()\r\n  const anchorRef = useRef()\r\n  const { left, width, bottom } = rect\r\n\r\n  return (\r\n    <>\r\n      <ClickAwayListener onClickAway={togglePopover} mouseEvent=\"onClick\">\r\n        <Popper\r\n          className={classes.popper}\r\n          open={!!anchorEl}\r\n          anchorEl={anchorRef.current}\r\n          modifiers={{\r\n            offset: {\r\n              offset: '0,6'\r\n            },\r\n            arrow: {\r\n              enabled: true,\r\n              element: arrowRef\r\n            }\r\n          }}\r\n          style={{ zIndex: 20 }}\r\n          placement=\"bottom\"\r\n          transition>\r\n          {({ TransitionProps }) => (\r\n            <Grow {...TransitionProps} timeout={80}>\r\n              <div onClick={ev => ev.stopPropagation()}>\r\n                <span className={classes.arrow} ref={setArrowRef} />\r\n                {DynCmp && <DynCmp togglePopover={togglePopover} />}\r\n              </div>\r\n            </Grow>\r\n          )}\r\n        </Popper>\r\n      </ClickAwayListener>\r\n      <div\r\n        ref={anchorRef}\r\n        className=\"popover-anchor\"\r\n        style={{ position: 'absolute', top: `${bottom}px`, left: `${left + width / 2}px` }}\r\n      />\r\n    </>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/+.c1f73500.svg\";","import React from 'react'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { LOGOUT } from '../../../../store/user/UserActions'\r\nimport { useHistory } from 'react-router'\r\nimport { usePopover } from '../../Popover'\r\nimport { MenuList } from '@material-ui/core'\r\n\r\nexport default function UserMenu({ togglePopover }) {\r\n  const user = useSelector(state => state.userReducer.user) || {}\r\n\r\n  // const [anchorEl, setAnchorEl] = React.useState(null)\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n  const toHome = ev => {\r\n    togglePopover(ev)\r\n    history.push('/')\r\n  }\r\n\r\n  const onLogout = ev => {\r\n    togglePopover(ev)\r\n    dispatch(LOGOUT())\r\n    history.push('/')\r\n  }\r\n\r\n  const onLogin = ev => {\r\n    togglePopover(ev)\r\n    history.push('/login-signup')\r\n  }\r\n\r\n  return (\r\n    <MenuList className=\"popover-cmp small flex col list-br\">\r\n      <MenuItem onClick={toHome}>Home</MenuItem>\r\n      {user._id ? (\r\n        <MenuItem onClick={onLogout}>Logout</MenuItem>\r\n      ) : (\r\n        <MenuItem onClick={onLogin}>Login/Signup</MenuItem>\r\n      )}\r\n    </MenuList>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { Trash } from 'components/Header/Trash/Trash'\r\nimport { useSelector } from 'react-redux'\r\nimport { Link, NavLink, useHistory, useLocation } from 'react-router-dom'\r\nimport { useToggle } from 'react-use'\r\nimport { CardAvatar } from '../Avatars/CardAvatar'\r\nimport { CreateBoardModal } from '../CreateBoardModal/CreateBoardModal'\r\nimport { usePopover } from '../Popover/Popover'\r\nimport { ReactSVG } from 'react-svg'\r\nimport plus from 'assets/+.svg'\r\n\r\nimport UserMenu from '../Popover/PopoverCmps/Menus/UserMenu'\r\n\r\nexport const Header = () => {\r\n  const user = useSelector(state => state.userReducer.user)\r\n  const [isModalOpen, toggleModal] = useToggle(false)\r\n\r\n  const { push } = useHistory()\r\n  const { pathname } = useLocation()\r\n\r\n  const navigate = dest => pathname !== dest && push(dest)\r\n\r\n  const isActive = dest => (pathname === dest ? ' active' : '')\r\n\r\n  const { togglePopover } = usePopover()\r\n\r\n  return (\r\n    <>\r\n      <header className=\"main-header flex ac jb p6\">\r\n        <Link className=\"logo\" to=\"/\">\r\n          <svg role=\"presentation\" focusable=\"false\" viewBox=\"0 0 22 22\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M3 5a2 2 0 012-2h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm2 1a1 1 0 011-1h4a1 1 0 011 1v10a1 1 0 01-1 1H6a1 1 0 01-1-1V6zm9-1a1 1 0 00-1 1v6a1 1 0 001 1h4a1 1 0 001-1V6a1 1 0 00-1-1h-4z\"\r\n              fill=\"currentColor\"></path>\r\n          </svg>\r\n          <span>Tallo</span>\r\n        </Link>\r\n        <Trash />\r\n        <nav className=\"gr10\">\r\n          {user?._id && (\r\n            <Button size=\"large\" className=\"trans\" onClick={toggleModal}>\r\n              <ReactSVG src={plus} className=\"svg white\" />\r\n            </Button>\r\n          )}\r\n          <Button\r\n            size=\"large\"\r\n            className={`navlink trans${isActive('/')}`}\r\n            onClick={() => navigate('/')}>\r\n            Home\r\n          </Button>\r\n          <Button\r\n            size=\"large\"\r\n            className={`navlink trans${isActive('/board')}`}\r\n            onClick={() => navigate('/board')}>\r\n            Board\r\n          </Button>\r\n          <Button className=\"user-btn trans\" onClick={ev => togglePopover(ev, UserMenu)}>\r\n            {user && <CardAvatar user={user} />}\r\n          </Button>\r\n        </nav>\r\n      </header>\r\n      {isModalOpen && <CreateBoardModal toggleModal={toggleModal} />}\r\n    </>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\n\r\nexport const ColorPicker = ({ className = '', onClick = () => {}, selected = '' }) => {\r\n  const colors = ['red', 'orange', 'yellow', 'green', 'blue', 'purple', 'pink', 'black']\r\n\r\n  return (\r\n    <div className={`${className} grid g6 tc4`}>\r\n      {colors.map(color => (\r\n        <Button\r\n          size=\"large\"\r\n          key={color}\r\n          name=\"color\"\r\n          value={color}\r\n          onClick={onClick}\r\n          className={`${color}${selected === color ? ' selected' : ''}`}\r\n        />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import { useDispatch, useSelector } from 'react-redux'\r\nimport { UPDATE_BOARD } from '../../../../store/board/BoardActions'\r\nimport { Button, TextField } from '@material-ui/core'\r\nimport { useSetState } from 'react-use'\r\nimport { ColorPicker } from '../ColorPicker/ColorPicker'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\n\r\nexport const LabelEditor = ({ labelToEdit, closeEditor }) => {\r\n  const dispatch = useDispatch()\r\n  const gLabels = useSelector(state => state.boardReducer.board.labels)\r\n  const [updatedLabel, setUpdatedLabel] = useSetState({ ...labelToEdit })\r\n\r\n  const handleInput = ({ currentTarget: { name, value } }) => setUpdatedLabel({ [name]: value })\r\n\r\n  const isNewLabel = !gLabels.find(({ _id }) => _id === updatedLabel._id)\r\n\r\n  const saveLabel = () => {\r\n    if (isNewLabel) updateLabels([...gLabels, updatedLabel])\r\n    else {\r\n      const idx = gLabels.findIndex(label => label._id === labelToEdit._id)\r\n      const updatedLabels = [...gLabels]\r\n      updatedLabels.splice(idx, 1, updatedLabel)\r\n      updateLabels(updatedLabels)\r\n    }\r\n  }\r\n\r\n  const deleteLabel = () => updateLabels(gLabels.filter(({ _id }) => _id !== updatedLabel._id))\r\n\r\n  const updateLabels = updatedLabels => {\r\n    dispatch(UPDATE_BOARD({ name: 'labels', value: updatedLabels }))\r\n    closeEditor()\r\n  }\r\n\r\n  return (\r\n    <div className=\"labels popover-cmp grid g6 tc4\">\r\n      <PopoverHeader title={isNewLabel ? 'Add' : 'Edit'} onBack={closeEditor} />\r\n      <TextField\r\n        className=\"gcf\"\r\n        variant=\"outlined\"\r\n        size=\"small\"\r\n        label=\"Label Name\"\r\n        name=\"title\"\r\n        value={updatedLabel.title}\r\n        onChange={handleInput}\r\n      />\r\n      <ColorPicker className=\"gcf\" onClick={handleInput} selected={updatedLabel.color} />\r\n\r\n      <Button size=\"large\" className=\"green gc1\" value={true} onClick={saveLabel}>\r\n        Save\r\n      </Button>\r\n      {!isNewLabel && (\r\n        <Button size=\"large\" className=\"red gc4\" onClick={deleteLabel}>\r\n          Delete\r\n        </Button>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { Button, TextField } from '@material-ui/core'\r\nimport { Fragment } from 'react'\r\nimport { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { UPDATE_CARD } from '../../../../store/board/BoardActions'\r\nimport { LabelEditor } from './LabelEditor'\r\nimport { boardService } from '../../../../pages/service/boardService'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\nimport { useSetState, useUpdateEffect } from 'react-use'\r\n\r\nexport const LabelsPopover = () => {\r\n  const dispatch = useDispatch()\r\n  const gLabels = useSelector(state => state.boardReducer.board.labels) || []\r\n  const { labels = [], _id: cardId = '' } = useSelector(state => state.boardReducer.card) || {}\r\n  const [{ labelToEdit, searchTerm }, setState] = useSetState({ labelToEdit: null, searchTerm: '' })\r\n\r\n  const toggleLabel = ({ currentTarget: { value } }) => {\r\n    dispatch(\r\n      UPDATE_CARD({\r\n        cardId,\r\n        name: 'labels',\r\n        value: labels.includes(value)\r\n          ? labels.filter(labelId => labelId !== value)\r\n          : [...labels, value]\r\n      })\r\n    )\r\n  }\r\n\r\n  const filteredLabels = gLabels.filter(({ title }) => RegExp(searchTerm, 'i').test(title))\r\n\r\n  const handleInput = ({ target: { value } }) => setState({ searchTerm: value })\r\n\r\n  const editLabel = gLabel => setState({ labelToEdit: gLabel })\r\n\r\n  const createNewLabel = () => setState({ labelToEdit: boardService.createNewLabel(searchTerm) })\r\n\r\n  const closeEditor = () => setState({ labelToEdit: null })\r\n\r\n  useUpdateEffect(() => setState({ searchTerm: '' }), [labelToEdit])\r\n\r\n  return !labelToEdit ? (\r\n    <div className=\"labels popover-cmp grid tc4 g6\">\r\n      <PopoverHeader title=\"Labels\" />\r\n      <TextField\r\n        className=\"gcf\"\r\n        size=\"small\"\r\n        variant=\"outlined\"\r\n        label=\"Search Labels\"\r\n        value={searchTerm}\r\n        onChange={handleInput}\r\n      />\r\n      {filteredLabels.map(gLabel => (\r\n        <Fragment key={gLabel._id}>\r\n          <Button\r\n            size=\"large\"\r\n            className={`label gcf-1 flex jb ${gLabel.color}`}\r\n            value={gLabel._id}\r\n            onClick={toggleLabel}>\r\n            <span>{gLabel.title}</span>\r\n            <span>{labels.includes(gLabel._id) && 'V'}</span>\r\n          </Button>\r\n          <Button size=\"large\" className=\"gcl\" onClick={() => editLabel(gLabel)}>\r\n            Edit\r\n          </Button>\r\n        </Fragment>\r\n      ))}\r\n      <Button size=\"large\" className=\"gcf gray\" onClick={createNewLabel}>\r\n        Add Label\r\n      </Button>\r\n    </div>\r\n  ) : (\r\n    <LabelEditor labelToEdit={labelToEdit} closeEditor={closeEditor} />\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/x.b15d1d8c.svg\";","import { Button, TextField } from '@material-ui/core'\r\nimport { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { UPDATE_CARD } from '../../../../store/board/BoardActions'\r\nimport { CardAvatar } from '../../../Avatars/CardAvatar'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\nimport x from 'assets/x.svg'\r\n\r\nexport const CardMembersPopover = () => {\r\n  const dispatch = useDispatch()\r\n  const users = useSelector(state => state.boardReducer.board.users) || []\r\n  const { _id: cardId = '', members = [] } = useSelector(state => state.boardReducer.card) || {}\r\n\r\n  const [{ activeMembers, searchTerm, searchRes }, setState] = useState({\r\n    activeMembers: [],\r\n    searchTerm: '',\r\n    searchRes: []\r\n  })\r\n\r\n  const updateState = ev => {\r\n    setState({\r\n      activeMembers: users.filter(({ _id }) => members.includes(_id)),\r\n      searchTerm: ev?.target.value ?? searchTerm,\r\n      searchRes: users.filter(\r\n        ({ _id, name }) =>\r\n          !members.includes(_id) && RegExp(ev?.target.value ?? searchTerm, 'i').test(name)\r\n      )\r\n    })\r\n  }\r\n\r\n  const toggleMember = userId => {\r\n    dispatch(\r\n      UPDATE_CARD({\r\n        cardId,\r\n        name: 'members',\r\n        value: members.includes(userId)\r\n          ? members.filter(memberId => memberId !== userId)\r\n          : [...members, userId]\r\n      })\r\n    )\r\n  }\r\n\r\n  useEffect(updateState, [users, members])\r\n\r\n  return (\r\n    <div className=\"popover-cmp flex col gb6\">\r\n      <PopoverHeader title=\"Card Members\" />\r\n      <TextField\r\n        size=\"small\"\r\n        variant=\"outlined\"\r\n        label=\"Search Members\"\r\n        value={searchTerm}\r\n        onChange={updateState}\r\n      />\r\n      <div className=\"flex col gb6\">\r\n        {activeMembers.map(user => (\r\n          <Button\r\n            key={user._id}\r\n            classes={{ label: 'flex ac js gr10 sbl' }}\r\n            onClick={() => toggleMember(user._id)}>\r\n            <CardAvatar user={user} size=\"small\" />\r\n            <span className=\"capital tas\">{user.name}</span>\r\n            <img src={x} alt=\"\" className=\"icon small\" />{' '}\r\n          </Button>\r\n        ))}\r\n      </div>\r\n      {searchRes[0] && (\r\n        <div className=\"flex col gb6\">\r\n          <span className=\"tac\">Board Members</span>\r\n          {searchRes.map(user => (\r\n            <Button\r\n              key={user._id}\r\n              classes={{ label: 'flex ac js gr10 sbl' }}\r\n              onClick={() => toggleMember(user._id)}>\r\n              <CardAvatar user={user} size=\"small\" />\r\n              <span className=\"capital tas\">{user.name}</span>\r\n              <span>+</span>\r\n            </Button>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useUpdateEffect, useSetState, useUpdate } from 'react-use'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { HANDLE_DROP } from 'store/board/BoardActions'\r\nimport { Button, InputLabel, MenuItem, Select } from '@material-ui/core'\r\nimport { PopoverHeader } from 'components/Popover/PopoverHeader'\r\nimport { usePopover } from 'components/Popover/Popover'\r\nimport { useLocation } from 'react-router'\r\n\r\nexport const MoveCardPopover = () => {\r\n  const dispatch = useDispatch()\r\n  const card = useSelector(state => state.boardReducer.card) || {}\r\n  const list = useSelector(state => state.boardReducer.list) || {}\r\n  const lists = useSelector(state => state.boardReducer.board.lists)\r\n\r\n  const cardIdx = list.cards.findIndex(({ _id }) => _id === card._id)\r\n\r\n  const initState = { targetList: list, targetIdx: cardIdx }\r\n\r\n  const [{ targetIdx, targetList }, setTarget] = useSetState(initState)\r\n  \r\n  useUpdateEffect(() => setTarget(initState), [card])\r\n\r\n  const handleInput = ({ target: { name, value } }) => {\r\n    if (name === 'targetIdx') setTarget({ targetIdx: value })\r\n    else {\r\n      const targetList = lists.find(({ _id }) => _id === value)\r\n      setTarget({\r\n        targetList,\r\n        targetIdx: targetList._id === list._id ? cardIdx : targetList.cards.length\r\n      })\r\n    }\r\n  }\r\n\r\n  const { togglePopover } = usePopover()\r\n  const inModal = useLocation().pathname.includes('board/card')\r\n  const moveCard = ev => {\r\n    dispatch(\r\n      HANDLE_DROP({\r\n        source: {\r\n          droppableId: list._id,\r\n          index: cardIdx\r\n        },\r\n        destination: {\r\n          droppableId: targetList._id,\r\n          index: targetIdx\r\n        }\r\n      })\r\n    )\r\n    if (!inModal) togglePopover(ev)\r\n  }\r\n\r\n  return (\r\n    <div className=\"popover-cmp flex col gb6\">\r\n      <PopoverHeader title=\"Move Card\" />\r\n      <InputLabel htmlFor=\"targetList\">To List:</InputLabel>\r\n      <Select value={targetList._id} onChange={handleInput} inputProps={{ name: 'targetList' }}>\r\n        {lists.map(({ _id, title }) => (\r\n          <MenuItem value={_id} key={_id}>\r\n            {`${title} ${_id === list._id ? '(Current)' : ''}`}\r\n          </MenuItem>\r\n        ))}\r\n      </Select>\r\n      <InputLabel htmlFor=\"targetIdx\">Position:</InputLabel>\r\n      <Select value={targetIdx} onChange={handleInput} inputProps={{ name: 'targetIdx' }}>\r\n        {targetList.cards.map(({ _id }, idx) => (\r\n          <MenuItem value={idx} key={_id}>\r\n            {`${idx + 1} ${_id === card._id ? '(Current)' : ''}`}\r\n          </MenuItem>\r\n        ))}\r\n        <MenuItem\r\n          className={list._id === targetList._id ? 'hidden' : ''}\r\n          value={targetList.cards.length}>\r\n          {targetList.cards.length + 1}\r\n        </MenuItem>\r\n      </Select>\r\n      <Button\r\n        size=\"large\"\r\n        className=\"green\"\r\n        onClick={moveCard}\r\n        disabled={card._id === targetList.cards[targetIdx]?._id}>\r\n        Move\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n","import { LabelsPopover } from '../../../Popover/PopoverCmps/Labels/LabelsPopover'\r\nimport { CardMembersPopover } from '../../../Popover/PopoverCmps/Members/CardMembersPopover'\r\nimport { DeletePopover } from '../../../Popover/PopoverCmps/Delete/DeletePopover'\r\nimport { MoveCardPopover } from '../../../Popover/PopoverCmps/MoveCard/MoveCardPopover'\r\nimport { MenuItem, MenuList } from '@material-ui/core'\r\n\r\nexport const CardMenu = ({ togglePopover }) => {\r\n  const Menu = {\r\n    Labels: LabelsPopover,\r\n    Members: CardMembersPopover,\r\n    Move_Card: MoveCardPopover,\r\n    Delete_Card: DeletePopover\r\n  }\r\n  const format = str => str.split('_').join(' ')\r\n\r\n  return (\r\n    <MenuList className=\"popover-cmp small flex col list-br\">\r\n      {Object.entries(Menu).map(([name, cmp]) => (\r\n        <MenuItem key={name} onClick={ev => togglePopover(ev, cmp, true)}>\r\n          <img className=\"icon mr10\" src={process.env.PUBLIC_URL + `/${name}.png`} alt=\"\" />\r\n          {format(name)}\r\n        </MenuItem>\r\n      ))}\r\n    </MenuList>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { useSelector } from 'react-redux'\r\nimport { useLocation } from 'react-router'\r\nimport { CardMenu } from './PopoverCmps/Menus/CardMenu'\r\nimport { ListMenu } from './PopoverCmps/Menus/ListMenu'\r\nimport { usePopover } from './Popover'\r\nimport x from 'assets/x.svg'\r\n\r\nexport const PopoverHeader = ({ title, onBack }) => {\r\n  const card = useSelector(state => state.boardReducer.card)\r\n  const list = useSelector(state => state.boardReducer.list)\r\n  const inModal = useLocation().pathname.includes('board/card')\r\n\r\n  const { togglePopover } = usePopover()\r\n\r\n  const backToMenu = ev => togglePopover(ev, card ? CardMenu : ListMenu, true)\r\n\r\n  return onBack || (!inModal && list) ? (\r\n    <div className=\"gcf fw flex rel jb \">\r\n      <Button className=\"\" onClick={onBack || backToMenu}>\r\n        Back\r\n      </Button>\r\n      <span className=\"center\">{title}</span>\r\n      <Button className=\"\" onClick={togglePopover}>\r\n        <img src={x} alt=\"\" className=\"icon small\" />{' '}\r\n      </Button>\r\n    </div>\r\n  ) : (\r\n    <div className=\"gcf fw flex rel col ae \">\r\n      <span className=\"center\">{title}</span>\r\n      <Button className=\"\" onClick={togglePopover}>\r\n        <img src={x} alt=\"\" className=\"icon small\" />\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useLocation } from 'react-router'\r\nimport { DELETE_CARD, DELETE_LIST } from '../../../../store/board/BoardActions'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\n\r\nexport const DeletePopover = ({ togglePopover }) => {\r\n  const cardId = useSelector(state => state.boardReducer.card?._id)\r\n  const listId = useSelector(state => state.boardReducer.list?._id)\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const inModal = useLocation().pathname.includes('board/card')\r\n\r\n  const deleteItem = ev => {\r\n    dispatch(cardId ? DELETE_CARD(cardId) : DELETE_LIST(listId))\r\n    inModal && history.push('/board')\r\n    togglePopover(ev)\r\n  }\r\n\r\n  return (\r\n    <div className=\"popover-cmp gb6\">\r\n      <PopoverHeader title={`Delete ${cardId ? 'Card' : 'List'}?`} />\r\n      <div className=\"flex jb sbl gr6\">\r\n        <Button size=\"large\" className=\"red\" onClick={deleteItem}>\r\n          Delete\r\n        </Button>\r\n        <Button size=\"large\" className=\"gray\" onClick={togglePopover}>\r\n          Cancel\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { DeletePopover } from '../Delete/DeletePopover'\r\nimport { MenuItem, MenuList } from '@material-ui/core'\r\n\r\nexport const ListMenu = ({ togglePopover }) => {\r\n  const Menu = {\r\n    Delete_List: DeletePopover\r\n  }\r\n  \r\n  const format = str => str.split('_').join(' ')\r\n\r\n  return (\r\n    <MenuList className=\"popover-cmp small flex col list-br\">\r\n      {Object.entries(Menu).map(([name, cmp]) => (\r\n        <MenuItem key={name} onClick={ev => togglePopover(ev, cmp, true)}>\r\n          <img className=\"icon small mr10\" src={process.env.PUBLIC_URL + `/${name}.png`} alt=\"\" />\r\n          {format(name)}\r\n        </MenuItem>\r\n      ))}\r\n    </MenuList>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { usePopover } from 'components/Popover/Popover'\r\nimport { ListMenu } from 'components/Popover/PopoverCmps/Menus/ListMenu'\r\nimport { useDisableAltKeyBlur } from 'hooks/useDisableAltKeyBlur'\r\nimport { useEffect, useRef, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useKey } from 'react-use'\r\nimport { GET_BY_ID, UPDATE_LIST } from 'store/board/BoardActions'\r\n\r\nexport const ListHeader = ({ list, dragHandleProps, setIsTitleBlurred }) => {\r\n  const dispatch = useDispatch()\r\n  const listId = list._id\r\n  const [{ title, timer }, setState] = useState({ title: list.title, timer: null })\r\n  const ref = useRef()\r\n\r\n  const isBlurred = () => ref.current !== document.activeElement\r\n\r\n  const blurTitle = () => ref.current.blur()\r\n\r\n  const preventOnFirstMouseDown = ev => isBlurred() && ev.preventDefault()\r\n\r\n  const selectOnFirstMouseUp = ev => isBlurred() && ref.current.select()\r\n\r\n  useKey('Escape', blurTitle)\r\n  useKey('Enter', blurTitle)\r\n\r\n  const handleInput = ({ target: { name, value } }) => {\r\n    clearTimeout(timer)\r\n    setState({\r\n      [name]: value,\r\n      timer: setTimeout(() => dispatch(UPDATE_LIST({ name, value, listId })), 500)\r\n    })\r\n  }\r\n\r\n  const { togglePopover } = usePopover()\r\n  const { list: listInStore, card: cardInStore } = useSelector(state => state.boardReducer)\r\n  const toggleMenu = ev => {\r\n    if (listInStore?._id !== listId || cardInStore) dispatch(GET_BY_ID(listId))\r\n    togglePopover(ev, ListMenu)\r\n  }\r\n\r\n  const disableAltKeyBlur = useDisableAltKeyBlur()\r\n\r\n  return (\r\n    <header className=\"flex ac jb gr2 mb6\" {...dragHandleProps}>\r\n      <input\r\n        onMouseDown={preventOnFirstMouseDown}\r\n        onMouseUp={selectOnFirstMouseUp}\r\n        onBlur={() => setIsTitleBlurred(true)}\r\n        onSelect={() => setIsTitleBlurred(false)}\r\n        onKeyUp={disableAltKeyBlur}\r\n        autoComplete=\"off\"\r\n        name=\"title\"\r\n        value={title}\r\n        ref={ref}\r\n        className=\"title fg1 fast\"\r\n        onChange={handleInput}\r\n      />\r\n      <Button size=\"small\" onClick={toggleMenu}>\r\n        ···\r\n      </Button>\r\n    </header>\r\n  )\r\n}\r\n","\r\n// best placed on 'onKeyUp' handler\r\nexport const useDisableAltKeyBlur = () => ev => ev.key === 'Alt' && ev.preventDefault()\r\n","export default __webpack_public_path__ + \"static/media/clock.966977aa.svg\";","import { useRef } from 'react'\r\nimport { useBus, useListener } from 'react-bus'\r\n\r\nexport const VideoPlayer = ({ videoUrl, isGrouped, className }) => {\r\n  const eventBus = useBus()\r\n  const ref = useRef()\r\n\r\n  const requestVideoFromGroup = () => !isGrouped && eventBus.emit('videoRequest', videoUrl)\r\n\r\n  useListener('videoRequest', requestedUrl => {\r\n    if (isGrouped && !ref.current.paused) {\r\n      if (requestedUrl === videoUrl) {\r\n        eventBus.emit('videoResponse', getVideoState())\r\n      }\r\n      ref.current.pause()\r\n    }\r\n  })\r\n\r\n  const getVideoState = () => {\r\n    const { currentTime, volume, muted } = ref.current\r\n    return { currentTime, volume, muted }\r\n  }\r\n\r\n  useListener('videoResponse', ({ currentTime, volume, muted }) => {\r\n    if (!isGrouped) {\r\n      ref.current.currentTime = currentTime\r\n      ref.current.volume = volume\r\n      ref.current.muted = muted\r\n      ref.current.play()\r\n    }\r\n  })\r\n\r\n  return (\r\n    <video\r\n      className={className}\r\n      controls\r\n      ref={ref}\r\n      onCanPlay={requestVideoFromGroup}\r\n      onClick={ev => isGrouped && ev.preventDefault()}\r\n      src={videoUrl}\r\n    />\r\n  )\r\n}\r\n","import AvatarGroup from '@material-ui/lab/AvatarGroup'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport { capitalize, colorPicker } from 'pages/service/utilService'\r\n\r\nexport const CardAvatars = ({ users, max, className, size = 'medium' }) => {\r\n  return (\r\n    <div className={className}>\r\n      <AvatarGroup max={max}>\r\n        {users.map(({ _id, name, imgUrl }) => (\r\n          <Tooltip title={capitalize(name)} arrow key={_id}>\r\n            <Avatar\r\n              src={imgUrl || '/'}\r\n              alt={capitalize(name)}\r\n              className={`avatar ${size} ${imgUrl ? 'white' : colorPicker(name)}`}\r\n            />\r\n          </Tooltip>\r\n        ))}\r\n      </AvatarGroup>\r\n    </div>\r\n  )\r\n}\r\n","import { memo } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { Button, Tooltip } from '@material-ui/core'\r\nimport { useToggle } from 'react-use'\r\nimport moment from 'moment'\r\nimport clock from 'assets/clock.svg'\r\nimport { usePopover } from 'components/Popover/Popover'\r\nimport { CardMenu } from 'components/Popover/PopoverCmps/Menus/CardMenu'\r\nimport { VideoPlayer } from 'components/VideoPlayer/VideoPlayer'\r\nimport { CardAvatars } from 'components/Avatars/CardAvatars'\r\nimport { Draggable } from 'react-beautiful-dnd'\r\nimport { GET_BY_ID } from 'store/board/BoardActions'\r\nimport { ReactSVG } from 'react-svg'\r\n\r\nexport const CardPreview = memo(({ card, idx }) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const { labels: gLabels, users } = useSelector(state => state.boardReducer.board)\r\n  const { _id: cardId, title, members, attachments, dueDate, labels, cardVideo } = card\r\n  const activeMembers = users.filter(({ _id }) => members.includes(_id))\r\n  const activeLabels = gLabels.filter(({ _id }) => labels.includes(_id))\r\n\r\n  const { togglePopover } = usePopover()\r\n  const cardInStore = useSelector(state => state.boardReducer.card)\r\n  const toggleMenu = ev => {\r\n    ev.avoidModal = true\r\n    if (card !== cardInStore) dispatch(GET_BY_ID(card._id))\r\n    togglePopover(ev, CardMenu)\r\n  }\r\n\r\n  const history = useHistory()\r\n  const openModal = ev => {\r\n    if (ev.avoidModal) return\r\n    history.push(`/board/card/${cardId}`)\r\n  }\r\n\r\n  const [menuBtnHovered, setMenuBtnHovered] = useToggle(false)\r\n\r\n  const classPicker = ({ isDragging, isDropAnimating, draggingOver }) => {\r\n    return menuBtnHovered\r\n      ? ' menu-btn-hovered'\r\n      : isDropAnimating && draggingOver === 'TRASH'\r\n      ? ' trashing'\r\n      : isDropAnimating\r\n      ? ' dropping'\r\n      : isDragging\r\n      ? ' dragging'\r\n      : ''\r\n  }\r\n\r\n  return (\r\n    <Draggable draggableId={cardId} index={idx}>\r\n      {({ draggableProps, dragHandleProps, innerRef }, snapshot) => (\r\n        <div\r\n          ref={innerRef}\r\n          {...draggableProps}\r\n          {...dragHandleProps}\r\n          className={`card-preview flex col gb8 sbl`}>\r\n          <div\r\n            onClick={openModal}\r\n            className={`card-container white flex col p8 gb8 sbl rel shdw2\r\n            ${classPicker(snapshot)}`}>\r\n            <div className=\"flex jb ac\">\r\n              <span className=\"title\">{title}</span>\r\n              <Button\r\n                anchorid={cardId}\r\n                size=\"small\"\r\n                onMouseEnter={() => setMenuBtnHovered(true)}\r\n                onMouseLeave={() => setMenuBtnHovered(false)}\r\n                onClick={toggleMenu}>\r\n                ···\r\n              </Button>\r\n            </div>\r\n            {cardVideo && <VideoPlayer videoUrl={cardVideo} isGrouped={true} />}\r\n            {attachments[0] && (\r\n              <div className=\"attachments\">\r\n                <img src={attachments[0]} alt=\"\" />\r\n              </div>\r\n            )}\r\n            {activeLabels[0] && (\r\n              <div className=\"labels flex\">\r\n                {activeLabels.map(label => (\r\n                  <Tooltip title={label.title} key={label._id}>\r\n                    <div className={`label ${label.color}`} />\r\n                  </Tooltip>\r\n                ))}\r\n              </div>\r\n            )}\r\n            {(!!dueDate || !!activeMembers[0]) && (\r\n              <div className=\"grid tc-a1a\">\r\n                {!!dueDate && (\r\n                  <div className=\"gc1 due-date flex ac\">\r\n                    <ReactSVG src={clock} className=\"svg small mr2\" />\r\n                    <p>{moment(dueDate).format('MMM Do')}</p>\r\n                  </div>\r\n                )}\r\n                {activeMembers[0] && <CardAvatars className=\"gc3\" max={4} users={activeMembers} />}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </Draggable>\r\n  )\r\n})\r\n","import { Button, ClickAwayListener, Input, TextField } from '@material-ui/core'\r\nimport { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useKey, useToggle, useUpdateEffect } from 'react-use'\r\nimport { ADD_CARD } from 'store/board/BoardActions'\r\nimport x from 'assets/x.svg'\r\nimport plus from 'assets/+.svg'\r\n\r\nexport const AddCard = ({ listId }) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const [isAddCard, toggleAddCard] = useToggle(false)\r\n  const [newCardTitle, setNewCardTitle] = useState('')\r\n\r\n  useUpdateEffect(() => setNewCardTitle(''), [isAddCard])\r\n\r\n  const addCard = ev => {\r\n    ev.preventDefault()\r\n    dispatch(ADD_CARD(newCardTitle, listId))\r\n    toggleAddCard()\r\n  }\r\n\r\n  useKey('Escape', () => toggleAddCard(false))\r\n\r\n  const dragType = useSelector(state => state.boardReducer.dragType)\r\n\r\n  return isAddCard ? (\r\n    <ClickAwayListener onClickAway={toggleAddCard} mouseEvent=\"onMouseDown\">\r\n      <form className=\"add-card fw\" onSubmit={addCard}>\r\n        <input\r\n          className=\"shdw2 rem fw mb6 br4 white\"\r\n          autoFocus\r\n          autoComplete=\"off\"\r\n          placeholder=\"Enter a title for this card...\"\r\n          value={newCardTitle}\r\n          onChange={ev => setNewCardTitle(ev.target.value)}\r\n        />\r\n        <div className=\"flex jb\">\r\n          <Button className=\"green\" type=\"submit\">\r\n            Add Card\r\n          </Button>\r\n          <Button onClick={toggleAddCard}>\r\n            <img src={x} alt=\"\" className=\"icon small\" />\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </ClickAwayListener>\r\n  ) : (\r\n    <>\r\n      <Button className={`flex js${dragType ? ' no-hover' : ''}`} onClick={toggleAddCard}>\r\n        <img src={plus} alt=\"\" className=\"icon small mr10\" />\r\n        Add another card\r\n      </Button>\r\n    </>\r\n  )\r\n}\r\n","import { memo, useState } from 'react'\r\nimport { ListHeader } from 'components/Board/List/ListHeader/ListHeader'\r\nimport { CardPreview } from 'components/Board/CardPreview/CardPreview'\r\nimport { AddCard } from 'components/Board/List/AddCard/AddCard'\r\nimport { Draggable, Droppable } from 'react-beautiful-dnd'\r\nimport { usePopover } from 'components/Popover/Popover'\r\n\r\nexport const List = memo(({ list, idx }) => {\r\n  const { _id: listId, cards } = list\r\n\r\n  const [isTitleBlurred, setIsTitleBlurred] = useState(true)\r\n\r\n  const dragClass = ({ isDropAnimating, isDragging }) => {\r\n    return isDropAnimating ? ' dropping' : isDragging ? ' dragging' : ''\r\n  }\r\n\r\n  const placeholderClass = ({ isDraggingOver }) => {\r\n    return !isDraggingOver ? 'hidden' : ''\r\n  }\r\n\r\n  const { togglePopover } = usePopover()\r\n\r\n  return (\r\n    <Draggable draggableId={listId} index={idx} disableInteractiveElementBlocking={isTitleBlurred}>\r\n      {({ draggableProps, dragHandleProps, innerRef }, snapshot) => (\r\n        <div {...draggableProps} ref={innerRef} className={`list flex col`}>\r\n          <div className={`container gray flex col${dragClass(snapshot)}`}>\r\n            <ListHeader\r\n              list={list}\r\n              dragHandleProps={dragHandleProps}\r\n              setIsTitleBlurred={setIsTitleBlurred}\r\n            />\r\n            <Droppable droppableId={listId} type=\"CARD\">\r\n              {({ droppableProps, placeholder, innerRef }, snapshot) => (\r\n                <div\r\n                  {...droppableProps}\r\n                  ref={innerRef}\r\n                  className=\"cards flex col gb6\"\r\n                  onScroll={togglePopover}>\r\n                  {cards.map((card, idx) => (\r\n                    <CardPreview key={card._id} card={card} idx={idx} />\r\n                  ))}\r\n                  <div className={placeholderClass(snapshot)}>{placeholder}</div>\r\n                </div>\r\n              )}\r\n            </Droppable>\r\n            <AddCard listId={listId} />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </Draggable>\r\n  )\r\n})\r\n","import { ColorPicker } from './ColorPicker/ColorPicker'\r\nimport { PopoverHeader } from '../PopoverHeader'\r\n\r\nexport const BoardColor = () => {\r\n  const onColorPick = ({ currentTarget: { value } }) => {\r\n    var root = document.getElementById('root')\r\n    value = value === 'gradient' ? 'linear-gradient(#006f83, #00aecc)' : value\r\n    root.style.background = value\r\n  }\r\n\r\n  return (\r\n    <div className=\"popover-cmp flex col gb6\">\r\n      <PopoverHeader title=\"Choose Color\" />\r\n      <ColorPicker className=\"\" onClick={onColorPick} />\r\n    </div>\r\n  )\r\n}\r\n","import { useSetState, useUpdateEffect } from 'react-use'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { userService } from '../../../../pages/service/userService'\r\nimport { UPDATE_BOARD } from '../../../../store/board/BoardActions'\r\nimport { CardAvatar } from '../../../Avatars/CardAvatar'\r\nimport { Button, TextField } from '@material-ui/core'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\nimport x from 'assets/x.svg'\r\n\r\nexport const BoardMembersPopover = ({ setAnchorEl }) => {\r\n  const dispatch = useDispatch()\r\n  const users = useSelector(state => state.boardReducer.board.users)\r\n  const userId = useSelector(state => state.userReducer.user._id)\r\n  const [{ searchTerm, searchRes, filteredRes }, setState] = useSetState({\r\n    searchTerm: '',\r\n    searchRes: [],\r\n    filteredRes: []\r\n  })\r\n\r\n  const handleInput = ({ target: { value } }) => setState({ searchTerm: value })\r\n\r\n  useUpdateEffect(async () => {\r\n    setState({ searchRes: searchTerm ? await userService.query(searchTerm) : [] })\r\n  }, [searchTerm])\r\n\r\n  useUpdateEffect(() => {\r\n    setState({ filteredRes: searchRes.filter(res => users.every(user => res._id !== user._id)) })\r\n  }, [searchRes, users])\r\n\r\n  const toggleUser = user => {\r\n    dispatch(\r\n      UPDATE_BOARD({\r\n        name: 'users',\r\n        value: users.includes(user) ? users.filter(currUser => currUser !== user) : [...users, user]\r\n      })\r\n    )\r\n  }\r\n\r\n  const isMe = id => id === userId\r\n\r\n  return (\r\n    <div className=\"popover-cmp flex col gb6\">\r\n      <PopoverHeader title=\"Board Members\" />\r\n      <TextField\r\n        size=\"small\"\r\n        variant=\"outlined\"\r\n        label=\"Search Members\"\r\n        value={searchTerm}\r\n        onChange={handleInput}\r\n      />\r\n      <div className=\"flex col gb6 \">\r\n        {users.map(user => (\r\n          <Button\r\n            className={isMe(user._id) ? 'first' : ''}\r\n            classes={{ label: 'flex ac js gr10 sbl' }}\r\n            key={user._id}\r\n            disabled={isMe(user._id)}\r\n            onClick={() => toggleUser(user)}>\r\n            <CardAvatar user={user} size=\"small\" />\r\n            <span className=\"capital tas\">{user.name}</span>\r\n            {isMe(user._id) ? <b>(You)</b> : <img src={x} alt=\"\" className=\"icon small\" />}\r\n          </Button>\r\n        ))}\r\n      </div>\r\n      {filteredRes[0] && (\r\n        <div className=\"flex col gb6\">\r\n          <span className=\"tac\">Users</span>\r\n          {filteredRes.map(user => (\r\n            <Button\r\n              classes={{ label: 'flex ac js gr10 sbl' }}\r\n              key={user._id}\r\n              onClick={() => toggleUser(user)}>\r\n              <CardAvatar user={user} size=\"small\" />\r\n              <span className=\"capital tas\">{user.name}</span>\r\n              <span>+</span>\r\n            </Button>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { MenuItem, MenuList } from '@material-ui/core'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { GET_BOARD_BY_ID } from '../../../../store/board/BoardActions'\r\nimport { usePopover } from '../../Popover'\r\n\r\nexport const BoardSelect = () => {\r\n  const boardId = useSelector(state => state.boardReducer.board._id)\r\n  const boards = useSelector(state => state.userReducer.user.boards)\r\n  const dispatch = useDispatch()\r\n  const { togglePopover } = usePopover()\r\n\r\n  const selectBoard = (ev, selectedBoard) => {\r\n    if (selectedBoard !== boardId) {\r\n      dispatch(GET_BOARD_BY_ID(selectedBoard))\r\n      togglePopover(ev)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <MenuList className=\"popover-cmp small flex col list-br\">\r\n      {boards.map(({ _id, title }) => (\r\n        <MenuItem key={_id} onClick={ev => selectBoard(ev, _id)}>\r\n          {title}\r\n        </MenuItem>\r\n      ))}\r\n    </MenuList>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/color-pallete.775a2aea.svg\";","import { Button } from '@material-ui/core'\r\nimport { usePopover } from 'components/Popover/Popover'\r\nimport { BoardColor } from 'components/Popover/PopoverCmps/BoardColor'\r\nimport { BoardMembersPopover } from 'components/Popover/PopoverCmps/Members/BoardMembersPopover'\r\nimport { BoardSelect } from 'components/Popover/PopoverCmps/Menus/BoardSelect'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { CLEAR_ITEMS } from 'store/board/BoardActions'\r\nimport { ReactSVG } from 'react-svg'\r\nimport pallete from 'assets/color-pallete.svg'\r\n\r\n\r\nexport const BoardHeader = () => {\r\n  const dispatch = useDispatch()\r\n\r\n  const title = useSelector(state => state.boardReducer.board.title)\r\n  const list = useSelector(state => state.boardReducer.list)\r\n\r\n  const { togglePopover } = usePopover()\r\n  const toggleMenu = (ev, cmp) => {\r\n    if (list) dispatch(CLEAR_ITEMS())\r\n    togglePopover(ev, cmp)\r\n  }\r\n\r\n  return (\r\n    <header className=\"board-header flex ac jb p6 rel\">\r\n      <div className=\"flex ac gr10 \">\r\n        <Button className=\"trans\" size=\"large\" onClick={ev => toggleMenu(ev, BoardSelect)}>\r\n          Boards ▼\r\n        </Button>\r\n        <h2>{title}</h2>\r\n        <Button className=\"trans\" size=\"large\" onClick={ev => toggleMenu(ev, BoardMembersPopover)}>\r\n          Users ▼\r\n        </Button>\r\n        <Button size=\"large\" className=\"trans\" onClick={ev => toggleMenu(ev, BoardColor)}>\r\n          <ReactSVG src={pallete} className=\"svg white large\" />\r\n        </Button>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n","import { Button, ClickAwayListener } from '@material-ui/core'\r\nimport { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useKey, useToggle, useUpdateEffect } from 'react-use'\r\nimport { ADD_LIST } from 'store/board/BoardActions'\r\nimport { ReactSVG } from 'react-svg'\r\nimport plus from 'assets/+.svg'\r\n\r\nexport const AddList = () => {\r\n  const dispatch = useDispatch()\r\n\r\n  const [isAddList, toggleAddList] = useToggle(false)\r\n  const [newListTitle, setNewListTitle] = useState('')\r\n\r\n  useUpdateEffect(() => setNewListTitle(''), [isAddList])\r\n\r\n  const addList = ev => {\r\n    ev.preventDefault()\r\n    dispatch(ADD_LIST(newListTitle))\r\n    toggleAddList()\r\n  }\r\n\r\n  useKey('Escape', () => toggleAddList(false))\r\n\r\n  return (\r\n    <div className=\"add-list\">\r\n      {isAddList ? (\r\n        <ClickAwayListener onClickAway={toggleAddList} mouseEvent=\"onMouseDown\">\r\n          <form className=\"fw gray gb6 br4\" onSubmit={addList}>\r\n            <input\r\n              className=\"rem fw white\"\r\n              autoFocus\r\n              autoComplete=\"off\"\r\n              placeholder=\"Enter a title for this list...\"\r\n              value={newListTitle}\r\n              onChange={ev => setNewListTitle(ev.target.value)}\r\n            />\r\n            <div className=\"flex jb\">\r\n              <Button className=\"green\" type=\"submit\">\r\n                Add List\r\n              </Button>\r\n              <Button onClick={toggleAddList}>X</Button>\r\n            </div>\r\n          </form>\r\n        </ClickAwayListener>\r\n      ) : (\r\n        <Button className=\"fp flex ac js trans br4\" onClick={toggleAddList}>\r\n          <ReactSVG src={plus} className=\"svg small white mr10\" />\r\n          Add another list\r\n        </Button>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { boardTypes } from 'store/board/BoardActions'\r\nimport { List } from 'components/Board/List/List'\r\nimport { BoardHeader } from 'components/Board/BoardHeader/BoardHeader'\r\nimport { useHistory } from 'react-router'\r\nimport { AddList } from 'components/Board/AddList/AddList'\r\nimport { Droppable } from 'react-beautiful-dnd'\r\nimport { socketService, socketTypes } from 'pages/service/socketService'\r\nimport { usePopover } from 'components/Popover/Popover'\r\n\r\nexport const Board = () => {\r\n  const dispatch = useDispatch()\r\n\r\n  const { _id: boardId = '', lists = [] } = useSelector(state => state.boardReducer.board) || {}\r\n\r\n  useEffect(() => {\r\n    document.getElementById('root').classList.add('ofy-h')\r\n    socketService.emit(socketTypes.JOIN_BOARD, boardId)\r\n    socketService.on(socketTypes.BOARD_UPDATED, nextBoard => {\r\n      dispatch({ type: boardTypes.SET_BOARD, payload: nextBoard })\r\n    })\r\n    return () => {\r\n      document.getElementById('root').classList.remove('ofy-h')\r\n      socketService.emit(socketTypes.LEAVE_BOARD, boardId)\r\n      socketService.off(socketTypes.BOARD_UPDATED)\r\n    }\r\n  }, [])\r\n  const { togglePopover } = usePopover()\r\n\r\n  return (\r\n    <main className=\"board fg1 flex col\" onScroll={togglePopover}>\r\n      <BoardHeader />\r\n      {boardId && (\r\n        <Droppable droppableId=\"board\" direction=\"horizontal\" type=\"LIST\">\r\n          {({ droppableProps, placeholder, innerRef }, snapshot) => (\r\n            <main {...droppableProps} ref={innerRef} className=\"flex\">\r\n              {lists.map((list, idx) => (\r\n                <List list={list} key={list._id} idx={idx} />\r\n              ))}\r\n              {placeholder}\r\n              <AddList />\r\n            </main>\r\n          )}\r\n        </Droppable>\r\n      )}\r\n    </main>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/icon-facebook.229c75a0.svg\";","export default __webpack_public_path__ + \"static/media/icon-linkedin.416b1433.svg\";","export default __webpack_public_path__ + \"static/media/icon-twitter.1d5c6d5e.svg\";","import { NavLink } from 'react-router-dom';\r\nimport facebookImg from '../../../assets/icon-facebook.svg';\r\nimport linkedinImg from '../../../assets/icon-linkedin.svg';\r\nimport twitterImg from '../../../assets/icon-twitter.svg';\r\n\r\n\r\nexport const HomeFooter = () => {\r\n\r\n  return (\r\n    <footer className=\"main-grid\">\r\n      <section className=\"footer-container\">\r\n        <nav>\r\n          <div className=\"logo-container\">\r\n            <div className=\"logo-div\">\r\n              <svg width=\"24\" height=\"24\" role=\"presentation\" focusable=\"false\" viewBox=\"0 0 24 24\"><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M3 5a2 2 0 012-2h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm2 1a1 1 0 011-1h4a1 1 0 011 1v10a1 1 0 01-1 1H6a1 1 0 01-1-1V6zm9-1a1 1 0 00-1 1v6a1 1 0 001 1h4a1 1 0 001-1V6a1 1 0 00-1-1h-4z\" fill=\"currentColor\"></path></svg>\r\n              <p>Tallo</p>\r\n            </div>\r\n            <div className=\"routes-container\">\r\n              <NavLink className=\"nav-item\" to=\"/\" exact>Home</NavLink>\r\n              <NavLink className=\"nav-item\" to=\"/board\">Board</NavLink>\r\n            </div>\r\n          </div>\r\n          <div className=\"address\">\r\n            <p>987 Hillcrest Lane</p>\r\n            <p>Irvine, CA</p>\r\n            <p>California 92714</p>\r\n            <p>Call Us : 949-833-7432</p>\r\n          </div>\r\n        </nav>\r\n        <div className=\"right-footer-container\">\r\n          <div className=\"social-container\">\r\n            <img src={facebookImg} alt=\"\" />\r\n            <img src={linkedinImg} alt=\"\" />\r\n            <img src={twitterImg} alt=\"\" />\r\n          </div>\r\n          <p>Copyright 2020. All Rights Reserved</p>\r\n        </div>\r\n      </section>\r\n    </footer>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/bg-pattern-home-3.4bc172f9.svg\";","import { useHistory } from 'react-router';\r\nimport patternThree from '../../../assets/bg-pattern-home-3.svg';\r\n\r\n\r\nexport const HomeGetStarted = () => {\r\n  const history = useHistory();\r\n\r\n  const onLogin = () => {\r\n    document.body.scrollTop = 0;\r\n    document.documentElement.scrollTop = 0;\r\n    history.push('/login-signup');\r\n  }\r\n\r\n  return (\r\n    <div className=\"get-started-section main-grid\">\r\n      <div className=\"container\">\r\n        <img src={patternThree} alt=\"\" />\r\n        <main>\r\n          <h2>Ready to get started?</h2>\r\n          <button onClick={onLogin}>Login / Signup</button>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/bg-pattern-home-1.270440fb.svg\";","export default __webpack_public_path__ + \"static/media/bg-pattern-home-2.889d5d8c.svg\";","import leftImg from '../../../assets/bg-pattern-home-1.svg';\r\nimport rightImg from '../../../assets/bg-pattern-home-2.svg';\r\n\r\n\r\nexport const HomeHero = () => {\r\n\r\n  return (\r\n    <div className=\"hero-section\">\r\n      <img className=\"left-img\" src={leftImg} alt=\"\" />\r\n      <div className=\"hero-title\">\r\n        <h1>Manage the</h1>\r\n        <h1>best <span>projects</span></h1>\r\n      </div>\r\n      <div className=\"side-container\">\r\n        <div></div>\r\n        <p>\r\n        Tallo helps teams work more collaboratively and get more done.\r\n        Tallo’s boards, lists, and cards enable teams to organize and prioritize projects in a fun,\r\n         flexible, and rewarding way.\r\n      </p>\r\n        <img className=\"right-img\" src={rightImg} alt=\"\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/icon-cog.c5d2403f.svg\";","export default __webpack_public_path__ + \"static/media/icon-chart.8de3d4d2.svg\";","export default __webpack_public_path__ + \"static/media/icon-person.0a313a85.svg\";","import iconCog from '../../../assets/icon-cog.svg';\r\nimport iconChart from '../../../assets/icon-chart.svg';\r\nimport iconPerson from '../../../assets/icon-person.svg';\r\n\r\n\r\nexport const HomeMain = () => {\r\n\r\n  return (\r\n    <div className=\"main-section main-grid\">\r\n      <section className=\"main-container\">\r\n        <div className=\"design-div\"></div>\r\n        <h2>Build &amp; manage your projects any time, anywhere.</h2>\r\n        <div className=\"secondary-container\">\r\n          <div className=\"item-container\">\r\n            <img src={iconPerson} alt=\"\" />\r\n            <div className=\"item-txt\">\r\n              <h4>Work with any team</h4>\r\n              <p>Whether it’s for work, a side project or even the next family vacation, Tallo helps your team stay organized.</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"item-container\">\r\n            <img src={iconCog} alt=\"\" />\r\n            <div className=\"item-txt\">\r\n              <h4>Always In Sync</h4>\r\n              <p>No matter where you are, Tallo stays in sync across all of your devices. Collaborate with your team anywhere.</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"item-container\">\r\n            <img src={iconChart} alt=\"\" />\r\n            <div className=\"item-txt\">\r\n              <h4>Information at a glance</h4>\r\n              <p>Dive into the details by adding attachments, due dates, and more directly to Tallo cards.</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/bg-pattern-home-4-about-3.aacd4e03.svg\";","export default __webpack_public_path__ + \"static/media/bg-pattern-home-5.95a2a621.svg\";","import patternOne from '../../../assets/bg-pattern-home-4-about-3.svg';\r\nimport patternTwo from '../../../assets/bg-pattern-home-5.svg';\r\n\r\n\r\nexport const HomeQuotes = () => {\r\n\r\n  return (\r\n    <div className=\"quotes-section main-grid\">\r\n    <img src={patternOne} alt=\"\" className=\"bgc-img-1\" />\r\n    <img src={patternTwo} alt=\"\" className=\"bgc-img-2\" />\r\n    <section className=\"quotes-container\">\r\n      <h1>Delivering real results for top companies. Some of our <span>success stories.</span></h1>\r\n      <main>\r\n        <div className=\"item\">\r\n          <p>“It’s easy to get your team up and running with Tallo. We’ve collected all of the boards and tools your team needs to succeed in one handy resource.”</p>\r\n          <div className=\"item-avatar\">\r\n            <h4>Tal Harouvi</h4>\r\n            <p>Full Stack Developer at Tallo</p>\r\n            <img src=\"https://res.cloudinary.com/ariecloud/image/upload/v1607248716/users/tal_fofpvu.jpg\" alt=\"\" />\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"67\" height=\"56\"><path fill=\"#2C6269\" d=\"M51.273 56c4.638 0 8.368-1.322 11.19-3.967 2.823-2.645 4.235-5.799 4.235-9.46 0-2.95-.429-5.494-1.286-7.63a197.251 197.251 0 01-2.495-6.562c-.806-2.237-1.21-4.933-1.21-8.087 0-2.746.454-5.798 1.361-9.155C63.976 7.782 65.286 4.069 67 0H55.356c-3.73 3.662-7.032 7.833-9.905 12.512-2.873 4.68-5.166 9.359-6.88 14.038C36.857 31.23 36 35.4 36 39.063c0 5.391 1.361 9.562 4.083 12.512C42.805 54.525 46.535 56 51.273 56zm-36 0c4.638 0 8.368-1.322 11.19-3.967 2.823-2.645 4.235-5.799 4.235-9.46 0-2.95-.429-5.494-1.286-7.63a197.251 197.251 0 01-2.495-6.562c-.806-2.237-1.21-4.933-1.21-8.087 0-2.746.454-5.798 1.361-9.155C27.976 7.782 29.286 4.069 31 0H19.356c-3.73 3.662-7.032 7.833-9.905 12.512-2.873 4.68-5.166 9.359-6.88 14.038C.857 31.23 0 35.4 0 39.063c0 5.391 1.361 9.562 4.083 12.512C6.805 54.525 10.535 56 15.273 56z\"/></svg>\r\n          </div>\r\n        </div>\r\n        <div className=\"item\">\r\n          <p>“Integrate the apps your team already uses directly into your workflow. Power-Ups turn Tallo boards into living applications to meet your team's unique business needs.”</p>\r\n          <div className=\"item-avatar\">\r\n            <h4>Arie Moldawsky</h4>\r\n            <p>Full Stack Developer at Tallo</p>\r\n            <img src=\"https://res.cloudinary.com/ariecloud/image/upload/v1611138519/users/66681D8E-0B6F-4F34-9FED-CCF9DF3B1E69_mftdzu.jpg\" alt=\"\" />\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"67\" height=\"56\"><path fill=\"#2C6269\" d=\"M51.273 56c4.638 0 8.368-1.322 11.19-3.967 2.823-2.645 4.235-5.799 4.235-9.46 0-2.95-.429-5.494-1.286-7.63a197.251 197.251 0 01-2.495-6.562c-.806-2.237-1.21-4.933-1.21-8.087 0-2.746.454-5.798 1.361-9.155C63.976 7.782 65.286 4.069 67 0H55.356c-3.73 3.662-7.032 7.833-9.905 12.512-2.873 4.68-5.166 9.359-6.88 14.038C36.857 31.23 36 35.4 36 39.063c0 5.391 1.361 9.562 4.083 12.512C42.805 54.525 46.535 56 51.273 56zm-36 0c4.638 0 8.368-1.322 11.19-3.967 2.823-2.645 4.235-5.799 4.235-9.46 0-2.95-.429-5.494-1.286-7.63a197.251 197.251 0 01-2.495-6.562c-.806-2.237-1.21-4.933-1.21-8.087 0-2.746.454-5.798 1.361-9.155C27.976 7.782 29.286 4.069 31 0H19.356c-3.73 3.662-7.032 7.833-9.905 12.512-2.873 4.68-5.166 9.359-6.88 14.038C.857 31.23 0 35.4 0 39.063c0 5.391 1.361 9.562 4.083 12.512C6.805 54.525 10.535 56 15.273 56z\"/></svg>\r\n          </div>\r\n        </div>\r\n        <div className=\"item\">\r\n          <p> “I've had absolutely nothing to do with this app untill they've reached me. I'm just an Israeli NBA Player and an ambassador of the app.”</p>\r\n          <div className=\"item-avatar\">\r\n            <h4>Deni Avdija</h4>\r\n            <p>NBA Player at Washington Wizards</p>\r\n            <img src=\"https://res.cloudinary.com/ariecloud/image/upload/v1610031903/deni_whuhmk.jpg\" alt=\"\" />\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"67\" height=\"56\"><path fill=\"#2C6269\" d=\"M51.273 56c4.638 0 8.368-1.322 11.19-3.967 2.823-2.645 4.235-5.799 4.235-9.46 0-2.95-.429-5.494-1.286-7.63a197.251 197.251 0 01-2.495-6.562c-.806-2.237-1.21-4.933-1.21-8.087 0-2.746.454-5.798 1.361-9.155C63.976 7.782 65.286 4.069 67 0H55.356c-3.73 3.662-7.032 7.833-9.905 12.512-2.873 4.68-5.166 9.359-6.88 14.038C36.857 31.23 36 35.4 36 39.063c0 5.391 1.361 9.562 4.083 12.512C42.805 54.525 46.535 56 51.273 56zm-36 0c4.638 0 8.368-1.322 11.19-3.967 2.823-2.645 4.235-5.799 4.235-9.46 0-2.95-.429-5.494-1.286-7.63a197.251 197.251 0 01-2.495-6.562c-.806-2.237-1.21-4.933-1.21-8.087 0-2.746.454-5.798 1.361-9.155C27.976 7.782 29.286 4.069 31 0H19.356c-3.73 3.662-7.032 7.833-9.905 12.512-2.873 4.68-5.166 9.359-6.88 14.038C.857 31.23 0 35.4 0 39.063c0 5.391 1.361 9.562 4.083 12.512C6.805 54.525 10.535 56 15.273 56z\"/></svg>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </section>\r\n  </div>\r\n  )\r\n}\r\n","import { useDispatch, useSelector } from 'react-redux'\r\nimport { useEffect } from 'react'\r\nimport { HomeFooter } from '../../components/Home/HomeFooter/HomeFooter'\r\nimport { HomeGetStarted } from '../../components/Home/HomeGetStarted/HomeGetStarted'\r\nimport { HomeHero } from '../../components/Home/HomeHero/HomeHero'\r\nimport { HomeMain } from '../../components/Home/HomeMain/HomeMain'\r\nimport { HomeQuotes } from '../../components/Home/HomeQuotes/HomeQuotes'\r\nimport { LOGIN } from '../../store/user/UserActions'\r\n\r\nexport const Home = props => {\r\n\r\n  useEffect(() => {\r\n    var root = document.getElementById('root')\r\n    if (root.style.background !== 'linear-gradient(#006f83, #00aecc)')\r\n      root.style.background = 'linear-gradient(#006f83, #00aecc)'\r\n  }, [])\r\n\r\n  return (\r\n    <main className=\"home main-grid\">\r\n      <HomeHero />\r\n      <HomeMain />\r\n      <HomeQuotes />\r\n      <HomeGetStarted />\r\n      <HomeFooter />\r\n    </main>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { useDisableAltKeyBlur } from 'hooks/useDisableAltKeyBlur'\r\nimport { useSelector } from 'react-redux'\r\nimport x from 'assets/x.svg'\r\n\r\nexport const CardHeader = ({ title, handleEdit, closeModal }) => {\r\n  const listTitle = useSelector(state => state.boardReducer.list.title)\r\n\r\n  const blurTitle = ({ key, target }) => key === 'Enter' && target.blur()\r\n  const disableAltKeyBlur = useDisableAltKeyBlur()\r\n\r\n  return (\r\n    <header className=\"fw grid tc-a1aa g8\">\r\n      <img className=\"section-icon asc gc1\" src={`${process.env.PUBLIC_URL}/Card.png`} alt=\"\" />\r\n      <input\r\n        className=\"gc2 title pointer\"\r\n        autoComplete=\"off\"\r\n        name=\"title\"\r\n        value={title}\r\n        onKeyPress={blurTitle}\r\n        onKeyUp={disableAltKeyBlur}\r\n        onFocus={ev => ev.target.select()}\r\n        onChange={handleEdit}\r\n      />\r\n      <Button className=\"gc4 \" size=\"large\" onClick={closeModal}>\r\n        <img src={x} alt=\"\" className=\"icon\" />\r\n      </Button>\r\n      <span className=\"gc2\">\r\n        in list <u>{listTitle}</u>\r\n      </span>\r\n    </header>\r\n  )\r\n}\r\n","import { useDispatch, useSelector } from 'react-redux'\r\nimport { UPDATE_CARD } from '../../../../store/board/BoardActions'\r\nimport { makeId } from '../../../../pages/service/utilService'\r\nimport { useSetState } from 'react-use'\r\n\r\nexport const CheckListPopover = ({ togglePopover }) => {\r\n  const { _id: cardId = '', checklists = [] } = useSelector(state => state.boardReducer.card) || {}\r\n\r\n  const [checklist, setChecklist] = useSetState({\r\n    _id: makeId(),\r\n    title: '',\r\n    items: []\r\n  })\r\n  const dispatch = useDispatch()\r\n\r\n  const onAddChecklist = ev => {\r\n    ev.preventDefault()\r\n    dispatch(UPDATE_CARD({ name: 'checklist', value: [...checklists, checklist], cardId }))\r\n  }\r\n\r\n  const handleInput = ({ target: { value } }) => setChecklist({ title: value })\r\n\r\n  return (\r\n    <div className=\"popover-cmp checklist-section flex col\">\r\n      <button className=\"close-btn pos-tr\" onClick={togglePopover}>\r\n        X\r\n      </button>\r\n      <p className=\"title bold asc\">Add a Check List</p>\r\n      <form action=\"\" className=\"flex col\" onSubmit={onAddChecklist}>\r\n        <label htmlFor=\"checklist-title\">Title:</label>\r\n        <input\r\n          autoFocus\r\n          id=\"checklist-title\"\r\n          value={checklist.title}\r\n          onChange={handleInput}\r\n          type=\"text\"\r\n          placeholder=\"Insert a title...\"\r\n        />\r\n        <button>Add</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { UPDATE_CARD } from '../../../../store/board/BoardActions'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\n\r\nexport const DueDatePopover = ({ togglePopover }) => {\r\n  const { dueDate: prevDueDate, _id: cardId } = useSelector(state => state.boardReducer.card)\r\n  const [dateFormat, setDateFormat] = useState('')\r\n  const [dueDate, setDueDate] = useState(Date.now())\r\n  const dispatch = useDispatch()\r\n\r\n  const prevDate = () => {\r\n    if (prevDate) {\r\n      var toDate = new Date(prevDueDate).getDate()\r\n      var toMonth = new Date(prevDueDate).getMonth() + 1\r\n      var toYear = new Date(prevDueDate).getFullYear()\r\n      if (`${toMonth}`.length < 2) toMonth = '0' + toMonth\r\n      var originalDate = toYear + '-' + toMonth + '-' + toDate\r\n      return originalDate\r\n    } else return ''\r\n  }\r\n\r\n  const saveDueDate = ev => {\r\n    ev.preventDefault()\r\n    dispatch(UPDATE_CARD({ name: 'dueDate', value: dueDate, cardId }))\r\n    togglePopover(ev)\r\n  }\r\n\r\n  const onHandleChange = ev => {\r\n    const value = ev.target.value\r\n    const date = new Date(value)\r\n    const timestamp = date.getTime()\r\n    setDateFormat(value)\r\n    setDueDate(timestamp)\r\n  }\r\n\r\n  return (\r\n    <div className=\"popover-cmp due-date-section flex col\">\r\n      <PopoverHeader title=\"Due Date\" />\r\n      <form action=\"\" onSubmit={saveDueDate} className=\"due-date-form flex col\">\r\n        <input\r\n          type=\"date\"\r\n          value={dateFormat ? dateFormat : prevDate()}\r\n          onChange={onHandleChange}\r\n          name=\"dueDate\"\r\n          id=\"\"\r\n        />\r\n        <button>Save</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import axios from 'axios'\r\nimport { getNewTokens, newTokensNeeded } from './httpService'\r\n\r\nconst UPLOAD_PRESET = 'iuzstnbj'\r\nconst CLOUD_NAME = 'ariecloud'\r\nconst VIDEO = 'video/upload'\r\nconst IMAGE = 'image/upload'\r\nconst UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/`\r\n\r\nexport const mediaService = {\r\n  uploadImg: ev => upload(ev, IMAGE),\r\n\r\n  uploadVideo: ev => upload(ev, VIDEO)\r\n}\r\n\r\nconst upload = async (ev, endpoint) => {\r\n  const FORM_DATA = new FormData()\r\n  FORM_DATA.append('file', ev.target.files[0])\r\n  FORM_DATA.append('upload_preset', UPLOAD_PRESET)\r\n  try {\r\n    if (newTokensNeeded(endpoint)) await getNewTokens()\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: UPLOAD_URL + endpoint,\r\n      data: FORM_DATA\r\n    })\r\n    return res.data\r\n  } catch (err) {\r\n    console.error('ERROR:', err)\r\n  }\r\n}\r\n","import { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { mediaService } from '../../../../pages/service/mediaService.js'\r\nimport { UPDATE_CARD } from '../../../../store/board/BoardActions.js'\r\n\r\nexport const AttachmentPopover = ({ togglePopover }) => {\r\n  const { attachments = [], _id: cardId = '' } = useSelector(state => state.boardReducer.card) || {}\r\n  const [attachmentUrl, setAttachmentUrl] = useState('')\r\n  const [isUploaded, setIsUploaded] = useState(false)\r\n  const dispatch = useDispatch()\r\n\r\n  const saveAttachment = ev => {\r\n    ev.preventDefault()\r\n    if (attachmentUrl)\r\n      dispatch(UPDATE_CARD({ name: 'attachments', value: [...attachments, attachmentUrl], cardId }))\r\n  }\r\n\r\n  const uploadImg = async ev => {\r\n    setIsUploaded(false)\r\n    const { secure_url } = await mediaService.uploadImg(ev)\r\n    setIsUploaded(true)\r\n    setAttachmentUrl(secure_url)\r\n  }\r\n\r\n  return (\r\n    <div className=\"attachment-section popover-cmp\">\r\n      <button className=\"close-btn pos-tr\" onClick={togglePopover}>\r\n        X\r\n      </button>\r\n      <p>Attachments</p>\r\n      <form action=\"\" onSubmit={saveAttachment} className=\"attachment-form\">\r\n        <label htmlFor=\"imgUrl\">\r\n          <p>Upload an attachment:</p>\r\n          <div className=\"label-container\">\r\n            <img\r\n              src=\"https://res.cloudinary.com/ariecloud/image/upload/v1611571897/tallo/PinClipart.com_button-clipart_321890_rkdp7l.png\"\r\n              alt=\"\"\r\n            />\r\n            {isUploaded && (\r\n              <svg className=\"uploaded-svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512.063 512.063\">\r\n                <g fill=\"#00df76\">\r\n                  <ellipse cx=\"256.032\" cy=\"256.032\" rx=\"255.949\" ry=\"256.032\" />\r\n                  <path d=\"M256.032 0l-.347.004v512.055l.347.004c141.357 0 255.949-114.629 255.949-256.032S397.389 0 256.032 0z\" />\r\n                </g>\r\n                <g fill=\"#fff\">\r\n                  <path d=\"M111.326 261.118L214.85 364.642c4.515 4.515 11.836 4.515 16.351 0l169.957-169.957c4.515-4.515 4.515-11.836 0-16.351l-30.935-30.935c-4.515-4.515-11.836-4.515-16.351 0L230.255 271.014c-4.515 4.515-11.836 4.515-16.351 0l-55.397-55.397c-4.426-4.426-11.571-4.526-16.119-.226l-30.83 29.149c-4.732 4.475-4.837 11.973-.232 16.578z\" />\r\n                  <path d=\"m370.223 147.398c-4.515-4.515-11.836-4.515-16.351 0l-98.187 98.187v94.573l145.473-145.473c4.515-4.515 4.515-11.836 0-16.352z\" />\r\n                </g>\r\n              </svg>\r\n            )}\r\n          </div>\r\n        </label>\r\n        <input className=\"upload-img\" type=\"file\" name=\"imgUrl\" onChange={uploadImg} id=\"imgUrl\" />\r\n        <button>Save</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useToggle } from 'react-use'\r\nimport { mediaService } from '../../../../pages/service/mediaService.js'\r\nimport { UPDATE_CARD } from '../../../../store/board/BoardActions.js'\r\n\r\nexport const AddVideoPopover = ({ togglePopover }) => {\r\n  const cardId = useSelector(state => state.boardReducer.card._id) || ''\r\n  const [videoUrl, setVideoUrl] = useState('')\r\n  // const [isUploaded, setIsUploaded] = useToggle(false)\r\n  const dispatch = useDispatch()\r\n\r\n  const saveVideo = ev => {\r\n    ev.preventDefault()\r\n    if (videoUrl) dispatch(UPDATE_CARD({ name: 'cardVideo', value: videoUrl, cardId }))\r\n  }\r\n\r\n  const uploadVideo = async ev => {\r\n    // setIsUploaded(false)\r\n    const { secure_url } = await mediaService.uploadVideo(ev)\r\n    console.log(secure_url)\r\n    // setIsUploaded(true)\r\n    setVideoUrl(secure_url)\r\n  }\r\n\r\n  return (\r\n    <div className=\"attachment-section popover-cmp\">\r\n      <button className=\"close-btn pos-tr\" onClick={togglePopover}>\r\n        X\r\n      </button>\r\n      <p>Card Video</p>\r\n      <form action=\"\" onSubmit={saveVideo} className=\"attachment-form\">\r\n        <label htmlFor=\"videoUrl\">\r\n          <p>Upload a video:</p>\r\n          <div className=\"label-container\">\r\n            <img\r\n              src=\"https://res.cloudinary.com/ariecloud/image/upload/v1611571897/tallo/PinClipart.com_button-clipart_321890_rkdp7l.png\"\r\n              alt=\"\"\r\n            />\r\n            {videoUrl && (\r\n              <svg className=\"uploaded-svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512.063 512.063\">\r\n                <g fill=\"#00df76\">\r\n                  <ellipse cx=\"256.032\" cy=\"256.032\" rx=\"255.949\" ry=\"256.032\" />\r\n                  <path d=\"M256.032 0l-.347.004v512.055l.347.004c141.357 0 255.949-114.629 255.949-256.032S397.389 0 256.032 0z\" />\r\n                </g>\r\n                <g fill=\"#fff\">\r\n                  <path d=\"M111.326 261.118L214.85 364.642c4.515 4.515 11.836 4.515 16.351 0l169.957-169.957c4.515-4.515 4.515-11.836 0-16.351l-30.935-30.935c-4.515-4.515-11.836-4.515-16.351 0L230.255 271.014c-4.515 4.515-11.836 4.515-16.351 0l-55.397-55.397c-4.426-4.426-11.571-4.526-16.119-.226l-30.83 29.149c-4.732 4.475-4.837 11.973-.232 16.578z\" />\r\n                  <path d=\"m370.223 147.398c-4.515-4.515-11.836-4.515-16.351 0l-98.187 98.187v94.573l145.473-145.473c4.515-4.515 4.515-11.836 0-16.352z\" />\r\n                </g>\r\n              </svg>\r\n            )}\r\n          </div>\r\n        </label>\r\n        <input\r\n          className=\"upload-img\"\r\n          type=\"file\"\r\n          name=\"videoUrl\"\r\n          onChange={uploadVideo}\r\n          id=\"videoUrl\"\r\n        />\r\n        <button>Save</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import { CardMembersPopover } from '../../../components/Popover/PopoverCmps/Members/CardMembersPopover'\r\nimport { LabelsPopover } from '../../../components/Popover/PopoverCmps/Labels/LabelsPopover'\r\nimport { CheckListPopover } from '../../../components/Popover/PopoverCmps/CheckList/CheckListPopover'\r\nimport { DueDatePopover } from '../../../components/Popover/PopoverCmps/DueDate/DueDatePopover'\r\nimport { AttachmentPopover } from '../../../components/Popover/PopoverCmps/Attachment/AttachmentPopover'\r\nimport { MoveCardPopover } from '../../../components/Popover/PopoverCmps/MoveCard/MoveCardPopover'\r\nimport { DeletePopover } from '../../../components/Popover/PopoverCmps/Delete/DeletePopover'\r\nimport { AddVideoPopover } from '../../../components/Popover/PopoverCmps/AddVideo/VideoPopover'\r\nimport { Button } from '@material-ui/core'\r\nimport { usePopover } from '../../../components/Popover/Popover'\r\n\r\nexport const CardAside = () => {\r\n  const { togglePopover } = usePopover()\r\n\r\n  const cmpMap = {\r\n    Add_To_Card: {\r\n      Members: CardMembersPopover,\r\n      Labels: LabelsPopover,\r\n      Check_List: CheckListPopover,\r\n      Due_Date: DueDatePopover,\r\n      Attachment: AttachmentPopover,\r\n      Video: AddVideoPopover\r\n    },\r\n    Actions: {\r\n      Move_Card: MoveCardPopover,\r\n      Delete_Card: DeletePopover\r\n    }\r\n  }\r\n\r\n  const format = str => str.split('_').join(' ')\r\n  return (\r\n    <aside className=\"gb18\">\r\n      {Object.entries(cmpMap).map(([title, list]) => (\r\n        <div key={title} className=\"gb6\">\r\n          <h4>{format(title)}</h4>\r\n          <div className=\"buttons grid g6\">\r\n            {Object.entries(list).map(([name, cmp]) => (\r\n              <Button\r\n                size=\"large\"\r\n                className=\"gray flex js\"\r\n                onClick={ev => togglePopover(ev, cmp)}\r\n                key={name}>\r\n                <img className=\"icon mr10\" src={process.env.PUBLIC_URL + `/${name}.png`} alt=\"\" />\r\n                <span>{format(name)}</span>\r\n              </Button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </aside>\r\n  )\r\n}\r\n","import { CardAvatar } from '../../../components/Avatars/CardAvatar'\r\nimport moment from 'moment'\r\nimport { useSelector } from 'react-redux'\r\nimport { Fragment } from 'react'\r\n\r\nexport const CardActivity = ({ activity }) => {\r\n  const users = useSelector(state => state.boardReducer.board.users)\r\n  // The activity array contains only the user Id (createdBy)\r\n  // Here we get his name and image from the global users array\r\n  const activityWithUserData = activity.map(item => ({\r\n    ...item,\r\n    ...users.find(({ _id }) => _id === item.createdBy)\r\n  }))\r\n\r\n  const isSameUserAsPrev = idx =>\r\n    !idx || activity[idx]._id !== activity[idx - 1]._id ? false : true\r\n\r\n  return (\r\n    <div className=\"activity fw grid tc-aaaa1 g8\">\r\n      <img className=\"section-icon\" src={process.env.PUBLIC_URL + `/Activity.png`} alt=\"\" />\r\n      <h3 className=\"gc2-6\">Activity</h3>\r\n      {activityWithUserData.slice(0, 10).map((item, idx) => (\r\n        <Fragment key={item.createdAt}>\r\n          {!isSameUserAsPrev(idx) && (\r\n            <>\r\n              <CardAvatar className=\"gc2\" user={item} size=\"small\" />\r\n              <h4 className=\"gc3-6 asc\">{item.name} :</h4>\r\n            </>\r\n          )}\r\n          <span className=\"gc2-4\">{item.activity}</span>\r\n          <h5 className=\"gc5\">{moment(item.createdAt).fromNow()}</h5>\r\n        </Fragment>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import { TextField } from '@material-ui/core'\r\n\r\nexport const CardDescription = ({ desc, handleEdit = () => {} }) => {\r\n  return (\r\n    <div className=\"description fw grid tc-a1 g8\">\r\n      <img className=\"section-icon\" src={process.env.PUBLIC_URL + `/Description.png`} alt=\"\" />\r\n      <h3 className=\"gc2\">Description</h3>\r\n      <TextField\r\n        className=\"gc2\"\r\n        multiline\r\n        placeholder=\"Add a more detailed description...\"\r\n        rows={4}\r\n        variant=\"outlined\"\r\n        name=\"desc\"\r\n        value={desc}\r\n        onChange={handleEdit}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","import { VideoPlayer } from '../../../components/VideoPlayer/VideoPlayer'\r\n\r\nexport const CardVideo = ({ cardVideo }) => {\r\n  return (\r\n    <div className=\"video fw grid tc-a1 g8\">\r\n      <img className=\"section-icon\" src={process.env.PUBLIC_URL + `/Video.png`} alt=\"\" />\r\n      <h3 className=\"gc2\">Card Video</h3>\r\n      <VideoPlayer className=\"gc2\" videoUrl={cardVideo} />\r\n    </div>\r\n  )\r\n}\r\n","import { useSelector } from 'react-redux'\r\n\r\nexport const CardAttachments = ({ attachments }) => {\r\n  return (\r\n    <div className=\"attachments fw grid tc-a1 g8\">\r\n      <img className=\"section-icon\" src={process.env.PUBLIC_URL + `/Attachment.png`} alt=\"\" />\r\n      <h3 className=\"gc2\">Attachments</h3>\r\n      {attachments.slice(0, 3).map(attachment => (\r\n        <img className=\"gc2 item\" key={attachment} src={attachment} alt=\"\" />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport LinearProgress from '@material-ui/core/LinearProgress'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Box from '@material-ui/core/Box'\r\n\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <LinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\">{`${Math.round(\r\n          props.value\r\n        )}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  value: PropTypes.number.isRequired\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: '100%'\r\n  }\r\n})\r\n\r\nexport const ProgressBar = ({ progress }) => {\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <LinearProgressWithLabel value={progress} />\r\n    </div>\r\n  )\r\n}\r\n","import { Button, Checkbox } from '@material-ui/core'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { UPDATE_CARD } from 'store/board/BoardActions'\r\nimport { useToggle, useSetState } from 'react-use'\r\nimport { makeId } from 'pages/service/utilService'\r\nimport { ProgressBar } from 'components/CardChecklist/ProgressBar'\r\nimport { cloneDeep as clone } from 'lodash'\r\n\r\nexport const CardChecklist = ({ checklist, checklists }) => {\r\n  const dispatch = useDispatch()\r\n  const cardId = useSelector(state => state.boardReducer.card._id)\r\n  const [showInput, toggleInput] = useToggle(false)\r\n  const [newItem, setNewItem] = useSetState({\r\n    _id: makeId(),\r\n    desc: '',\r\n    isChecked: false\r\n  })\r\n\r\n  const progressStatus = () => {\r\n    var checkedItems = checklist.items.filter(item => item.isChecked === true)\r\n    let res = (+checkedItems.length / +checklist.items.length) * 100\r\n    if (isNaN(res)) res = 0\r\n    return res\r\n  }\r\n\r\n  const toogleCheckBox = ({ target: { value } }) => {\r\n    let list = clone(checklist)\r\n    let lists = clone(checklists)\r\n    list.items[value].isChecked = !list.items[value].isChecked\r\n    const listIdx = lists.findIndex(aList => aList._id === list._id)\r\n    lists[listIdx] = list\r\n    dispatch(UPDATE_CARD({ name: 'checklist', value: [...lists], cardId }))\r\n  }\r\n\r\n  const addNewItem = () => {\r\n    let list = clone(checklist)\r\n    let lists = clone(checklists)\r\n    const listIdx = lists.findIndex(aList => aList._id === list._id)\r\n    lists[listIdx].items.push(newItem)\r\n    dispatch(UPDATE_CARD({ name: 'checklist', value: [...lists], cardId }))\r\n    setNewItem({ _id: makeId(), desc: '', isChecked: false })\r\n    toggleInput()\r\n  }\r\n\r\n  const removeItem = ({ target: { value } }) => {\r\n    let list = clone(checklist)\r\n    let lists = clone(checklists)\r\n    list.items.splice(value, 1)\r\n    const listIdx = lists.findIndex(aList => aList._id === list._id)\r\n    lists[listIdx] = list\r\n    dispatch(UPDATE_CARD({ name: 'checklist', value: [...lists], cardId }))\r\n  }\r\n\r\n  const handleInput = ({ target: { name, value } }) => setNewItem({ [name]: value })\r\n\r\n  const removeList = () => {\r\n    let lists = clone(checklists)\r\n    const listIdx = lists.findIndex(list => list._id === checklist._id)\r\n    lists.splice(listIdx, 1)\r\n    dispatch(UPDATE_CARD({ name: 'checklist', value: [...lists], cardId }))\r\n  }\r\n\r\n  return (\r\n    <div className=\"checklist gb6\">\r\n      <div className=\"flex ac gr10 sbl \">\r\n        <img className=\"section-icon\" src={process.env.PUBLIC_URL + `/Check_List.png`} alt=\"\" />\r\n        <h3>{checklist.title}</h3>\r\n        <Button className=\"gray\" onClick={removeList}>\r\n          Delete\r\n        </Button>\r\n      </div>\r\n      <div className=\"ml30\">\r\n        <ProgressBar progress={progressStatus()} />\r\n        <div className=\"flex wrap\">\r\n          {checklist.items.map((item, idx) => (\r\n            <div key={item._id} className=\"item flex ac sbl ml-12\">\r\n              <Checkbox\r\n                color=\"primary\"\r\n                inputProps={{ 'aria-label': 'checkbox' }}\r\n                checked={item.isChecked}\r\n                value={idx}\r\n                onChange={toogleCheckBox}\r\n              />\r\n              <span>{item.desc}</span>\r\n              <Button className=\"\" value={idx} onClick={removeItem}>\r\n                X\r\n              </Button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        {!showInput ? (\r\n          <Button className=\"gray\" onClick={toggleInput}>\r\n            Add an item\r\n          </Button>\r\n        ) : (\r\n          <div className=\"flex col w50 gb6\">\r\n            <input autoFocus name=\"desc\" value={newItem.desc} onChange={handleInput} />\r\n            <div className=\"flex gr6\">\r\n              <Button className=\"green\" onClick={addNewItem}>\r\n                Add\r\n              </Button>\r\n              <Button className=\"\" onClick={toggleInput}>\r\n                X\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { CardChecklist } from 'components/CardChecklist/CardChecklist'\r\nexport const CardChecklists = ({ checklists }) => {\r\n  return (\r\n    <div className=\"checklists fw gb10\">\r\n      {checklists.map(checklist => (\r\n        <CardChecklist key={checklist._id} checklists={checklists} checklist={checklist} />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router'\r\n\r\nexport const CardNav = () => {\r\n  const cards = useSelector(state => state.boardReducer.list?.cards)\r\n  const cardId = useSelector(state => state.boardReducer.card?._id)\r\n\r\n  const history = useHistory()\r\n\r\n  const cycleCards = ev => {\r\n    ev.nativeEvent.avoidCardModal = true\r\n    const cardIdx = cards.findIndex(currCard => currCard._id === cardId)\r\n    const nextCardId = cardIdx > -1 && cards[cardIdx + +ev.currentTarget.value]?._id\r\n    if (nextCardId) history.push(nextCardId)\r\n  }\r\n\r\n  return cards ? (\r\n    <nav className=\"flex jb fw\">\r\n      <Button variant=\"outlined\" size=\"large\" className=\"white\" value={-1} onClick={cycleCards}>\r\n        Previous Card\r\n      </Button>\r\n      <Button variant=\"outlined\" size=\"large\" className=\"white\" value={1} onClick={cycleCards}>\r\n        Next Card\r\n      </Button>\r\n    </nav>\r\n  ) : (\r\n    <></>\r\n  )\r\n}\r\n","import { Portal } from '@material-ui/core'\r\nimport { useRef, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { CardAvatars } from '../../../components/Avatars/CardAvatars'\r\nimport { usePopover } from '../../../components/Popover/Popover'\r\nimport { CardMembersPopover } from '../../../components/Popover/PopoverCmps/Members/CardMembersPopover'\r\n\r\nexport const CardMembers = ({ members }) => {\r\n  const users = useSelector(state => state.boardReducer.board.users)\r\n  const activeUsers = users.filter(({ _id }) => members.includes(_id))\r\n  const { togglePopover } = usePopover()\r\n\r\n  const openPopover = ev => togglePopover(ev, CardMembersPopover)\r\n\r\n  return (\r\n    <div>\r\n      {activeUsers[0] && (\r\n        <div className={`ml32 gb6 pointer`} onClick={openPopover}>\r\n          <h4>Members</h4>\r\n          <CardAvatars users={activeUsers} max={12} size=\"medium\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { Button, Portal } from '@material-ui/core'\r\nimport { useEffect, useRef, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { usePopover } from '../../../components/Popover/Popover'\r\nimport { LabelsPopover } from '../../../components/Popover/PopoverCmps/Labels/LabelsPopover'\r\n\r\nexport const CardLabels = ({ labels }) => {\r\n  const gLabels = useSelector(state => state.boardReducer.board.labels)\r\n  const activeLabels = gLabels.filter(({ _id }) => labels.includes(_id))\r\n  const { togglePopover } = usePopover()\r\n\r\n  const openPopover = ev => togglePopover(ev, LabelsPopover, false)\r\n\r\n  return (\r\n    <div className=\"fg1\">\r\n      {activeLabels[0] && (\r\n        <div className={`ml32 wfc`}>\r\n          <h4>Labels</h4>\r\n          <div className=\"flex gr6 wfc wrap\">\r\n            {activeLabels.map(({ _id, color, title }) => (\r\n              <Button size=\"large\" className={`mt6 ${color}`} key={_id} onClick={openPopover}>\r\n                {title}\r\n              </Button>\r\n            ))}\r\n            <Button size=\"large\" className={`mt6 gray`} onClick={openPopover}>\r\n              +\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport { useKey, useSetState, useUpdateEffect } from 'react-use'\r\nimport { CLEAR_ITEMS, GET_BY_ID, UPDATE_CARD } from '../../store/board/BoardActions'\r\nimport { CardHeader } from './CardHeader/CardHeader'\r\nimport { CardAside } from './CardAside/CardAside'\r\nimport { CardActivity } from './CardMain/CardActivity'\r\nimport { CardDescription } from './CardMain/CardDescription'\r\nimport { CardVideo } from './CardMain/CardVideo'\r\nimport { CardAttachments } from './CardMain/CardAttachments'\r\nimport { CardChecklists } from './CardMain/CardChecklists'\r\nimport { CardNav } from './CardNav/CardNav'\r\nimport { CardMembers } from './CardMain/CardMembers'\r\nimport { CardLabels } from './CardMain/CardLabels'\r\nimport { ClickAwayListener } from '@material-ui/core'\r\nimport { usePopper } from 'react-popper'\r\nimport { usePopover } from 'components/Popover/Popover'\r\n\r\nexport const CardModal = () => {\r\n  const history = useHistory()\r\n  const dispatch = useDispatch()\r\n\r\n  const { cardId } = useParams()\r\n  useEffect(() => dispatch(GET_BY_ID(cardId)), [cardId])\r\n\r\n  const card = useSelector(state => state.boardReducer.card)\r\n\r\n  const [{ title, desc, timer }, setEditables] = useSetState({ title: '', desc: '', timer: null })\r\n  const updateEditablesOnCardNav = () => setEditables({ title: card.title, desc: card.desc })\r\n  useUpdateEffect(updateEditablesOnCardNav, [card?._id])\r\n\r\n  const { isRedundantClickAway } = usePopover()\r\n\r\n  const closeModal = ev => {\r\n    if (isRedundantClickAway(ev)) return\r\n    history.push('/board')\r\n    dispatch(CLEAR_ITEMS())\r\n  }\r\n  useKey('Escape', ev => setTimeout(() => !ev.avoidCardModal && closeModal(ev), 0))\r\n\r\n  const handleEdit = ({ target: { name, value } }) => {\r\n    clearTimeout(timer)\r\n    setEditables({\r\n      [name]: value,\r\n      timer: setTimeout(() => dispatch(UPDATE_CARD({ name, value, cardId })), 500)\r\n    })\r\n  }\r\n\r\n  const { members, labels, cardVideo, attachments, checklists, activity } = card || {}\r\n  return (\r\n    <div className=\"card modal-screen\">\r\n      <CardNav />\r\n      {card && (\r\n        <ClickAwayListener onClickAway={closeModal} mouseEvent=\"onClick\">\r\n          <section className=\"card-modal white grid g16\">\r\n            <CardHeader title={title} handleEdit={handleEdit} closeModal={closeModal} />\r\n            <main className=\"flex wrap gb16\">\r\n              <CardMembers members={members} />\r\n              <CardLabels labels={labels} />\r\n              {cardVideo && <CardVideo cardVideo={cardVideo} />}\r\n              {attachments?.[0] && <CardAttachments attachments={attachments} />}\r\n              <CardDescription desc={desc} handleEdit={handleEdit} />\r\n              {checklists?.[0] && <CardChecklists checklists={checklists} />}\r\n              {activity?.[0] && <CardActivity activity={activity} />}\r\n            </main>\r\n            <CardAside />\r\n          </section>\r\n        </ClickAwayListener>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useDispatch } from 'react-redux'\r\nimport { LOGIN, SIGNUP } from '../../store/user/UserActions'\r\nimport { mediaService } from '../../pages/service/mediaService.js'\r\nimport { useHistory } from 'react-router'\r\nimport { useRef } from 'react'\r\nimport { useKey, useSetState, useToggle, useUpdateEffect } from 'react-use'\r\nimport { userService } from '../../pages/service/userService'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { TextField } from '@material-ui/core'\r\n\r\nexport const LoginSingup = () => {\r\n  const dispatch = useDispatch()\r\n  const { goBack, push } = useHistory()\r\n  const [emailAvailable, setEmailAvailable] = useState(true)\r\n  const [timer, setTimer] = useState(null)\r\n  const [creds, setCreds] = useSetState({\r\n    email: '',\r\n    password: ''\r\n  })\r\n  const [user, setUser] = useSetState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    imgUrl: '',\r\n    boards: []\r\n  })\r\n\r\n  useKey('Escape', goBack)\r\n\r\n  // const handleInputLogin = ev => console.log(ev.target.name)\r\n  const handleInputLogin = ({ target: { name, value } }) => setCreds({ [name]: value })\r\n  const handleInputSignup = ({ target: { name, value } }) => setUser({ [name]: value })\r\n\r\n  useUpdateEffect(() => {\r\n    clearTimeout(timer)\r\n    setEmailAvailable(true)\r\n    if (!user.email) return\r\n    setTimer(\r\n      setTimeout(async () => {\r\n        const res = await userService.validateEmail(user.email)\r\n        setEmailAvailable(res)\r\n      }, 300)\r\n    )\r\n  }, [user.email])\r\n\r\n  const login = async ev => {\r\n    ev.preventDefault()\r\n    dispatch(LOGIN(creds))\r\n    push('/board')\r\n  }\r\n\r\n  const signup = async ev => {\r\n    ev.preventDefault()\r\n    if (!emailAvailable) return\r\n    dispatch(SIGNUP(user))\r\n    push('/board')\r\n  }\r\n\r\n  const uploadImg = async ev => {\r\n    const { secure_url } = await mediaService.uploadImg(ev)\r\n    setUser({ imgUrl: secure_url })\r\n  }\r\n\r\n  return (\r\n    <div className=\"modal-screen\" onClick={goBack}>\r\n      <div className=\"login-signup gb20\" onClick={ev => ev.stopPropagation()}>\r\n        <form className=\"login-form gb10\" onSubmit={login}>\r\n          <div className=\"flex ac jb\">\r\n            <h2>Login</h2>\r\n            <button className=\"btn \" onClick={goBack}>\r\n              X\r\n            </button>\r\n          </div>\r\n          <TextField\r\n            size=\"small\"\r\n            type=\"email\"\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            variant=\"outlined\"\r\n            value={creds.email}\r\n            onChange={handleInputLogin}\r\n          />\r\n\r\n          <TextField\r\n            size=\"small\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            variant=\"outlined\"\r\n            value={creds.password}\r\n            onChange={handleInputLogin}\r\n          />\r\n          <button className=\"btn blue large\">Login</button>\r\n        </form>\r\n        {/* <div className=\"forms-seperator\">-Or-</div> */}\r\n        <form className=\"signup-form gb10\" onSubmit={signup}>\r\n          <h2>Signup</h2>\r\n          <TextField\r\n            size=\"small\"\r\n            label=\"Name\"\r\n            name=\"name\"\r\n            variant=\"outlined\"\r\n            value={user.name}\r\n            onChange={handleInputSignup}\r\n          />\r\n          <TextField\r\n            size=\"small\"\r\n            type=\"email\"\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            variant=\"outlined\"\r\n            value={user.email}\r\n            onChange={handleInputSignup}\r\n          />\r\n\r\n          <TextField\r\n            size=\"small\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            variant=\"outlined\"\r\n            value={user.password}\r\n            onChange={handleInputSignup}\r\n          />\r\n          <label>\r\n            <p>Upload a Profile Picture:</p>\r\n            <img\r\n              src=\"https://res.cloudinary.com/ariecloud/image/upload/v1611571897/tallo/PinClipart.com_button-clipart_321890_rkdp7l.png\"\r\n              alt=\"\"\r\n            />\r\n            <input className=\"upload-img\" type=\"file\" name=\"imgUrl\" onChange={uploadImg} />\r\n          </label>\r\n          <button className=\"btn blue large\">Signup</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","export const Loader = () => {\r\n  return (\r\n    <div className=\"loader center flex ac jc\">\r\n      <div className=\"sk-chase\">\r\n        <div className=\"sk-chase-dot\"></div>\r\n        <div className=\"sk-chase-dot\"></div>\r\n        <div className=\"sk-chase-dot\"></div>\r\n        <div className=\"sk-chase-dot\"></div>\r\n        <div className=\"sk-chase-dot\"></div>\r\n        <div className=\"sk-chase-dot\"></div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useDispatch, useSelector } from 'react-redux'\r\nimport { useBeforeunload } from 'react-beforeunload'\r\nimport { Redirect, Route, Switch } from 'react-router-dom'\r\nimport { DEMO_LOGIN } from './store/user/UserActions'\r\nimport { useMount } from 'react-use'\r\nimport { socketService } from './pages/service/socketService'\r\nimport { Header } from './components/Header/Header'\r\nimport { Board } from './pages/Board/Board'\r\nimport { Home } from './pages/Home/Home'\r\nimport { CardModal } from './pages/CardModal/CardModal'\r\nimport { LoginSingup } from './components/LoginSignup/LoginSignup'\r\nimport { Loader } from './components/Loader/Loader'\r\nimport { Popover } from './components/Popover/Popover'\r\nimport './styles/styles.scss'\r\n\r\n\r\nexport const App = () => {\r\n  const dispatch = useDispatch()\r\n  const { user, isLoading } = useSelector(state => state.userReducer) || {}\r\n\r\n  useMount(() => {\r\n    dispatch(DEMO_LOGIN())\r\n    socketService.setup()\r\n  })\r\n\r\n  useBeforeunload(socketService.terminate)\r\n\r\n  const PrivateRoute = props => (user?._id ? <Route {...props} /> : <Redirect to=\"/\" />)\r\n\r\n  return isLoading ? (\r\n    <Loader />\r\n  ) : (\r\n    <>\r\n      <Header />\r\n      <Switch>\r\n        <PrivateRoute path=\"/board\" component={Board} />\r\n        <Route path=\"/\" component={Home} />\r\n      </Switch>\r\n      <PrivateRoute path=\"/board/card/:cardId\" component={CardModal} />\r\n      <Route path=\"/login-signup\" component={LoginSingup} />\r\n      <Popover />\r\n    </>\r\n  )\r\n}\r\n","import { usePopover } from 'components/Popover/Popover'\r\nimport { DragDropContext } from 'react-beautiful-dnd'\r\nimport { useDispatch } from 'react-redux'\r\nimport { boardTypes, HANDLE_DROP } from 'store/board/BoardActions'\r\n\r\nexport const DndProvider = ({ children }) => {\r\n  const dispatch = useDispatch()\r\n  const { togglePopover } = usePopover()\r\n\r\n  const onDragStart = ev => {\r\n    document.activeElement.blur()\r\n    togglePopover(ev)\r\n    dispatch({ type: boardTypes.SET_DRAG_TYPE, payload: ev.type })\r\n  }\r\n\r\n  const onDragEnd = res => {\r\n    dispatch(HANDLE_DROP(res))\r\n    dispatch({ type: boardTypes.SET_DRAG_TYPE, payload: null })\r\n  }\r\n\r\n  return (\r\n    <DragDropContext onDragStart={onDragStart} onDragEnd={onDragEnd}>\r\n      {children}\r\n    </DragDropContext>\r\n  )\r\n}\r\n","import { StrictMode } from 'react'\r\nimport { render } from 'react-dom'\r\nimport { HashRouter as RouterProvider } from 'react-router-dom'\r\nimport { Provider as ReduxProvider } from 'react-redux'\r\nimport { Provider as EventBusProvider } from 'react-bus'\r\nimport { store } from 'store/Store'\r\nimport { App } from 'App.jsx'\r\nimport { DndProvider } from 'pages/service/dndService'\r\n\r\nrender(\r\n  // <StrictMode>\r\n  <EventBusProvider>\r\n    <RouterProvider>\r\n      <ReduxProvider store={store}>\r\n        <DndProvider>\r\n          <App />\r\n        </DndProvider>\r\n      </ReduxProvider>\r\n    </RouterProvider>\r\n  </EventBusProvider>,\r\n  // </StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// navigator.serviceWorker.register('./serviceWorker.js');\r\n"],"sourceRoot":""}