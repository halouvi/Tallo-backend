{"version":3,"sources":["service/socketService.js","store/board/BoardActions.js","service/httpService.js","service/utilService.js","service/boardService.js","service/userService.js","store/user/UserActions.js","store/board/BoardReducer.js","store/user/UserReducer.js","store/Store.js","components/Avatars/CardAvatar.jsx","components/CreateBoardModal/CreateBoardModal.jsx","components/Popover/Popover.jsx","components/Popover/PopoverCmps/Menus/UserMenu.jsx","components/Header/Header.jsx","components/Avatars/CardAvatars.jsx","components/Popover/PopoverCmps/ColorPicker/ColorPicker.jsx","components/Popover/PopoverCmps/Delete/DeletePopover.jsx","components/Popover/PopoverCmps/Menus/ListMenu.jsx","components/Popover/PopoverHeader.jsx","components/Popover/PopoverCmps/Labels/LabelEditor.jsx","components/Popover/PopoverCmps/Labels/LabelsPopover.jsx","components/Popover/PopoverCmps/Members/CardMembersPopover.jsx","components/Popover/PopoverCmps/MoveCard/MoveCardPopover.jsx","components/Popover/PopoverCmps/Menus/CardMenu.jsx","assets/clock.svg","components/VideoPlayer/VideoPlayer.jsx","components/Board/CardPreview/CardPreview.jsx","components/Board/List/ListHeader/ListHeader.jsx","components/Board/List/CardDropZone.jsx","components/Board/List/AddCard/AddCard.jsx","components/Board/List/List.jsx","components/Popover/PopoverCmps/Menus/BoardSelect.jsx","components/Popover/PopoverCmps/BoardColor.jsx","components/Popover/PopoverCmps/Members/BoardMembersPopover.jsx","components/Board/BoardHeader/BoardHeader.jsx","components/Board/AddList/AddList.jsx","pages/Board/Board.jsx","assets/icon-facebook.svg","assets/icon-linkedin.svg","assets/icon-twitter.svg","components/Home/HomeFooter/HomeFooter.jsx","assets/bg-pattern-home-3.svg","components/Home/HomeGetStarted/HomeGetStarted.jsx","assets/bg-pattern-home-1.svg","assets/bg-pattern-home-2.svg","components/Home/HomeHero/HomeHero.jsx","assets/icon-cog.svg","assets/icon-chart.svg","assets/icon-person.svg","components/Home/HomeMain/HomeMain.jsx","assets/bg-pattern-home-4-about-3.svg","assets/bg-pattern-home-5.svg","components/Home/HomeQuotes/HomeQuotes.jsx","pages/Home/Home.jsx","pages/CardModal/CardHeader/CardHeader.jsx","components/Popover/PopoverCmps/CheckList/CheckListPopover.jsx","components/Popover/PopoverCmps/DueDate/DueDatePopover.jsx","service/mediaService.js","components/Popover/PopoverCmps/Attachment/AttachmentPopover.jsx","components/Popover/PopoverCmps/AddVideo/VideoPopover.jsx","pages/CardModal/CardAside/CardAside.jsx","pages/CardModal/CardMain/CardActivity.jsx","pages/CardModal/CardMain/CardDescription.jsx","pages/CardModal/CardMain/CardVideo.jsx","pages/CardModal/CardMain/CardAttachments.jsx","components/CardChecklist/ProgressBar.jsx","components/CardChecklist/CardChecklist.jsx","pages/CardModal/CardMain/CardChecklists.jsx","pages/CardModal/CardNav/CardNav.jsx","pages/CardModal/CardMain/CardMembers.jsx","pages/CardModal/CardMain/CardLabels.jsx","pages/CardModal/CardModal.jsx","components/LoginSignup/LoginSignup.jsx","components/DragLayer/DragLayer.jsx","components/Loader/Loader.jsx","App.jsx","index.js"],"names":["socket","timer","BASE_URL","axios","Axios","create","withCredentials","httpService","get","endpoint","data","a","newTokensNeeded","getNewTokens","ajax","post","put","delete","accessToken","method","url","headers","authorization","undefined","res","response","match","exp","jwtDecode","Date","now","makeId","length","txt","possible","i","charAt","Math","floor","random","capitalize","string","toLowerCase","split","map","s","toUpperCase","substring","join","colorPicker","name","test","range","RegExp","boardService","id","board","_id","title","userId","users","activity","lists","cards","labels","color","attachments","checklist","desc","dueDate","members","socketTypes","socketService","io","eventName","cb","on","off","emit","userService","query","email","creds","userTypes","LOGIN","dispatch","user","type","payload","boardTypes","SET_BOARD","console","error","SIGNUP","RESET_STATE","SET_ITEMS","CLEAR_BOARD","CLEAR_ITEMS","list","card","UPDATE_BOARD","value","getState","nextBoard","boardReducer","_removeUserFromCards","SAVE_BOARD","prevBoard","itemId","GET_BY_ID","clearTimeout","setTimeout","_findItems","UPDATE_CARD","cardId","_activityLog","HANDLE_DROP","sourceId","targetId","posOffset","sourceIdx","listIdx","splice","targetIdx","sourceList","cardIdx","targetList","find","currList","currListIdx","currCard","currCardIdx","nextUsers","userToRemove","includes","forEach","filter","memberId","field","userReducer","unshift","createdAt","createdBy","initState","isLoading","rootReducer","combineReducers","state","boards","store","createStore","composeWithDevTools","applyMiddleware","thunk","CardAvatar","size","tooltip","className","Tooltip","arrow","disableHoverListener","Avatar","alt","src","imgUrl","CreateBoardModal","toggleModal","useDispatch","history","useHistory","useState","setTitle","useKey","onClick","ev","stopPropagation","onChange","target","boardId","ADD_BOARD","push","useStyles","makeStyles","theme","popper","zIndex","top","left","marginTop","width","height","borderWidth","borderColor","palette","background","paper","position","fontSize","content","margin","display","borderStyle","usePopover","eventBus","useBus","cmp","preserveAnchor","Popover","useListener","togglePopover","anchorEl","DynCmp","useSetState","setState","useSelector","inModal","useLocation","pathname","avoidPopoverClickAway","document","body","currentTarget","nativeEvent","avoidCardModal","arrowRef","setArrowRef","classes","ClickAwayListener","onClickAway","Popper","open","modifiers","offset","enabled","element","style","placement","transition","TransitionProps","Grow","timeout","ref","UserMenu","MenuList","MenuItem","Header","useToggle","isModalOpen","navigate","dest","isActive","to","role","focusable","viewBox","fillRule","clipRule","d","fill","Button","data-original","CardAvatars","max","AvatarGroup","ColorPicker","selected","DeletePopover","listId","DELETE_CARD","DELETE_LIST","ListMenu","Menu","Delete_List","Object","entries","str","process","PopoverHeader","onBack","CardMenu","LabelEditor","labelToEdit","closeEditor","gLabels","updatedLabel","setUpdatedLabel","handleInput","isNewLabel","updateLabels","updatedLabels","TextField","variant","label","idx","findIndex","LabelsPopover","searchTerm","toggleLabel","labelId","filteredLabels","useUpdateEffect","gLabel","editLabel","CardMembersPopover","activeMembers","searchRes","updateState","useEffect","toggleMember","MoveCardPopover","targetPos","setTarget","InputLabel","htmlFor","Select","inputProps","onOpen","log","Labels","Members","Move_Card","Delete_Card","VideoPlayer","videoUrl","isGrouped","videoRef","useRef","requestedUrl","current","paused","getVideoState","pause","currentTime","volume","muted","play","controls","onCanPlay","preventDefault","CardPreview","isDragLayer","cardVideo","rectRef","useDrag","collect","monitor","isDragging","item","begin","getBoundingClientRect","overListId","drag","useDrop","accept","hover","isOver","getClientOffset","y","hoverHeight","getItem","drop","cardInStore","menuBtnHovered","setMenuBtnHovered","avoidModal","onMouseEnter","onMouseLeave","some","clock","toDateString","ListHeader","titleRef","blur","listInStore","autoComplete","onMouseDown","activeElement","onMouseUp","select","UPDATE_LIST","CardDropZone","AddCard","isAddCard","toggleAddCard","newCardTitle","setNewCardTitle","onSubmit","ADD_CARD","autoFocus","placeholder","List","x","hoverWidth","listOver","getItemType","cardOver","canDrop","BoardSelect","selectBoard","selectedBoard","BoardColor","getElementById","BoardMembersPopover","setAnchorEl","filteredRes","toggleUser","currUser","BoardHeader","toggleMenu","AddList","isAddList","toggleAddList","newListTitle","setNewListTitle","Board","replace","HomeFooter","exact","facebookImg","linkedinImg","twitterImg","HomeGetStarted","patternThree","scrollTop","documentElement","HomeHero","leftImg","rightImg","HomeMain","iconPerson","iconCog","iconChart","HomeQuotes","patternOne","patternTwo","xmlns","Home","props","root","CardHeader","handleEdit","closeModal","listTitle","onFocus","CheckListPopover","checklists","items","setChecklist","action","DueDatePopover","prevDueDate","dateFormat","setDateFormat","setDueDate","prevDate","toDate","getDate","toMonth","getMonth","toYear","getFullYear","timestamp","getTime","UPLOAD_URL","mediaService","upload","FORM_DATA","FormData","append","files","AttachmentPopover","attachmentUrl","setAttachmentUrl","isUploaded","setIsUploaded","uploadImg","secure_url","cx","cy","rx","ry","AddVideoPopover","setVideoUrl","uploadVideo","CardAside","cmpMap","Add_To_Card","Check_List","Due_Date","Attachment","Video","Actions","format","CardActivity","activityWithUserData","isSameUserAsPrev","slice","moment","fromNow","CardDescription","multiline","rows","CardVideo","CardAttachments","attachment","LinearProgressWithLabel","Box","alignItems","mr","LinearProgress","minWidth","Typography","round","ProgressBar","progress","CardChecklist","showInput","toggleInput","isChecked","newItem","setNewItem","toogleCheckBox","JSON","parse","stringify","aList","addNewItem","removeItem","isNaN","progressStatus","Checkbox","checked","CardChecklists","CardNav","cycleCards","nextCardId","CardMembers","activeUsers","CardLabels","activelabels","CardModal","useParams","setEditables","setTimer","LoginSingup","goBack","emailAvailable","setEmailAvailable","password","setCreds","setUser","handleInputLogin","handleInputSignup","login","signup","DragLayer","useDragLayer","pos","getSourceClientOffset","Loader","App","useMount","useBeforeunload","PrivateRoute","path","component","render","DndProvider","backend","MouseBackEnd"],"mappings":"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","file":"static/js/main.d05c88a7.chunk.js","sourcesContent":["import io from 'socket.io-client'\r\nconst BASE_URL = process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030'\r\nexport var socket\r\n\r\nexport const socketTypes = {\r\n  JOIN_BOARD: 'JOIN_BOARD',\r\n  LEAVE_BOARD: 'LEAVE_BOARD',\r\n  BOARD_UPDATED: 'BOARD_UPDATED',\r\n}\r\n\r\nexport const socketService = {\r\n  setup() {\r\n    socket = io(BASE_URL)\r\n  },\r\n  terminate() {\r\n    socket = null\r\n  },\r\n  on(eventName, cb) {\r\n    socket.on(eventName, cb)\r\n  },\r\n  off(eventName, cb) {\r\n    socket.off(eventName, cb)\r\n  },\r\n  emit(eventName, data) {\r\n    socket.emit(eventName, data)\r\n  },\r\n}\r\n","import { boardService } from '../../service/boardService'\r\nimport { socketService, socketTypes } from '../../service/socketService.js'\r\nimport { userTypes } from '../user/UserActions'\r\n\r\nexport const boardTypes = {\r\n  RESET_STATE: 'RESET_STATE',\r\n  SET_BOARD: 'SET_BOARD',\r\n  SET_ITEMS: 'SET_ITEMS'\r\n}\r\n\r\nexport const CLEAR_BOARD = () => dispatch => dispatch({ type: boardTypes.RESET_STATE })\r\n\r\nexport const CLEAR_ITEMS = () => dispatch => {\r\n  dispatch({\r\n    type: boardTypes.SET_ITEMS,\r\n    payload: { list: null, card: null }\r\n  })\r\n}\r\n\r\nexport const ADD_BOARD = title => async (dispatch, getState) => {\r\n  const userId = getState().userReducer.user._id\r\n  const board = boardService.createNewBoard(title, userId)\r\n  try {\r\n    const { boardId } = await boardService.add(board)\r\n    dispatch({ type: boardTypes.SET_BOARD, payload: { _id: boardId, ...board } })\r\n    dispatch({ type: userTypes.SET_NEW_USER_BOARD, payload: { _id: boardId, title: board.title } })\r\n  } catch (err) {\r\n    console.error(err)\r\n  }\r\n}\r\n\r\nexport const GET_BOARD_BY_ID = id => async dispatch => {\r\n  try {\r\n    const board = await boardService.getById(id)\r\n    dispatch({ type: boardTypes.SET_BOARD, payload: board })\r\n  } catch (err) {\r\n    console.error(`GET_BOARD_BY_ID ERROR: ${err}`)\r\n  }\r\n}\r\n\r\nexport const UPDATE_BOARD = ({ name, value }) => (dispatch, getState) => {\r\n  const nextBoard = { ...getState().boardReducer.board }\r\n  if (name === 'users') _removeUserFromCards(nextBoard, value)\r\n  nextBoard[name] = value\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nlet timer\r\nexport const SAVE_BOARD = nextBoard => (dispatch, getState) => {\r\n  const { board, list, card } = getState().boardReducer || {}\r\n  const prevBoard = { ...board }\r\n  const itemId = card?._id || list?._id\r\n  dispatch({ type: boardTypes.SET_BOARD, payload: nextBoard })\r\n  if (itemId) dispatch(GET_BY_ID(itemId))\r\n  clearTimeout(timer)\r\n  timer = setTimeout(async () => {\r\n    try {\r\n      await boardService.update(nextBoard)\r\n      socketService.emit(socketTypes.BOARD_UPDATED, nextBoard._id)\r\n    } catch (err) {\r\n      dispatch({ type: boardTypes.SET_BOARD, payload: prevBoard })\r\n      if (itemId) dispatch(GET_BY_ID(itemId))\r\n      console.error('Could not update board', err)\r\n    }\r\n  }, 2500)\r\n}\r\n\r\nexport const ADD_LIST = title => (dispatch, getState) => {\r\n  const nextBoard = { ...getState().boardReducer.board }\r\n  const list = boardService.createNewList(title)\r\n  nextBoard.lists.push(list)\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nexport const UPDATE_LIST = ({ name, value, listId }) => (dispatch, getState) => {\r\n  console.log('updating')\r\n  const nextBoard = { ...getState().boardReducer.board }\r\n  const { list } = _findItems(nextBoard, listId)\r\n  list[name] = value\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nexport const DELETE_LIST = listId => (dispatch, getState) => {\r\n  const nextBoard = { ...getState().boardReducer.board }\r\n  const { listIdx } = _findItems(nextBoard, listId)\r\n  nextBoard.lists.splice(listIdx, 1)\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nexport const GET_BY_ID = itemId => (dispatch, getState) => {\r\n  const board = getState().boardReducer.board\r\n  const { list, card } = _findItems(board, itemId)\r\n  dispatch({ type: boardTypes.SET_ITEMS, payload: { list, card } })\r\n}\r\n\r\nexport const ADD_CARD = (title, listId) => (dispatch, getState) => {\r\n  const nextBoard = { ...getState().boardReducer.board }\r\n  const card = boardService.createNewCard(title)\r\n  dispatch(_activityLog(card, 'addCard'))\r\n  const { list } = _findItems(nextBoard, listId)\r\n  list.cards.push(card)\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nexport const UPDATE_CARD = ({ name, value, cardId }) => (dispatch, getState) => {\r\n  const nextBoard = { ...getState().boardReducer.board }\r\n  const { card } = _findItems(nextBoard, cardId)\r\n  card[name] = value\r\n  dispatch(_activityLog(card, name))\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nexport const DELETE_CARD = cardId => (dispatch, getState) => {\r\n  const nextBoard = { ...getState().boardReducer.board }\r\n  const { cardIdx, list } = _findItems(nextBoard, cardId)\r\n  list.cards.splice(cardIdx, 1)\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nexport const HANDLE_DROP = ({ type, sourceId, targetId, posOffset }) => (dispatch, getState) => {\r\n  const nextBoard = { ...getState().boardReducer.board }\r\n  if (type === 'LIST') {\r\n    const { listIdx: sourceIdx } = _findItems(nextBoard, sourceId)\r\n    const [list] = nextBoard.lists.splice(sourceIdx, 1)\r\n    const { listIdx: targetIdx } = _findItems(nextBoard, targetId)\r\n    nextBoard.lists.splice(targetIdx + posOffset, 0, list)\r\n  } else {\r\n    const { list: sourceList, cardIdx: sourceIdx } = _findItems(nextBoard, sourceId)\r\n    const [card] = sourceList.cards.splice(sourceIdx, 1)\r\n    const { list: targetList, cardIdx: targetIdx } = _findItems(nextBoard, targetId)\r\n    if (posOffset === null) {\r\n      // posOffset is set to null when transfering card via menu and not DnD\r\n      // this calculation needs to happen after the dragged card has been spliced\r\n      posOffset = sourceList === targetList && targetIdx >= sourceIdx ? 1 : 0\r\n    }\r\n    targetList.cards.splice(targetIdx + posOffset, 0, card)\r\n  }\r\n  dispatch(SAVE_BOARD(nextBoard))\r\n}\r\n\r\nconst _findItems = (board, targetId) => {\r\n  var list, listIdx, card, cardIdx\r\n  board.lists.find((currList, currListIdx) => {\r\n    if (currList._id === targetId) {\r\n      list = currList\r\n      listIdx = currListIdx\r\n      card = null\r\n      cardIdx = currList.cards.length\r\n      return true\r\n    } else {\r\n      currList.cards.find((currCard, currCardIdx) => {\r\n        if (currCard._id === targetId) {\r\n          list = currList\r\n          listIdx = currListIdx\r\n          card = currCard\r\n          cardIdx = currCardIdx\r\n          return true\r\n        } else return false\r\n      })\r\n      return card ? true : false\r\n    }\r\n  })\r\n  return { list, listIdx, card, cardIdx }\r\n}\r\n\r\nconst _removeUserFromCards = ({ users, lists }, nextUsers) => {\r\n  const { _id: userToRemove } = users.find(userId => !nextUsers.includes(userId)) || {}\r\n  if (userToRemove) {\r\n    lists.forEach(({ cards }) => {\r\n      cards.forEach(card => {\r\n        card.members = card.members.filter(memberId => memberId !== userToRemove)\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nconst _activityLog = (card, field) => (dispatch, getState) => {\r\n  const userId = getState().userReducer.user._id\r\n  var activity\r\n  switch (field) {\r\n    case 'addCard':\r\n      activity = 'Added this card'\r\n      break\r\n    case 'desc':\r\n      activity = 'Changed card description'\r\n      break\r\n    case 'members':\r\n      activity = 'Changed card members list'\r\n      break\r\n    case 'title':\r\n      activity = 'Changed card title'\r\n      break\r\n    case 'labels':\r\n      activity = 'Changed card labels'\r\n      break\r\n    case 'attachments':\r\n      activity = 'Added an attachment to card'\r\n      break\r\n    case 'dueDate':\r\n      activity = \"Changed card's due date\"\r\n      break\r\n    case 'checklist':\r\n      activity = 'Changed a checklist item'\r\n      break\r\n    default:\r\n      break\r\n  }\r\n  card.activity.unshift({ activity, createdAt: Date.now(), createdBy: userId })\r\n  return card\r\n}\r\n","import Axios from 'axios'\r\nimport jwtDecode from 'jwt-decode'\r\nconst BASE_URL = process.env.NODE_ENV !== 'development' ? '/api/' : '//localhost:3030/api/'\r\nvar axios = Axios.create({\r\n  withCredentials: true\r\n})\r\n\r\nexport const httpService = {\r\n  get: async (endpoint, data) => {\r\n    if (newTokensNeeded(endpoint)) await getNewTokens()\r\n    return await ajax(endpoint, 'GET', data)\r\n  },\r\n\r\n  post: async (endpoint, data) => {\r\n    if (newTokensNeeded(endpoint)) await getNewTokens()\r\n    return await ajax(endpoint, 'POST', data)\r\n  },\r\n\r\n  put: async (endpoint, data) => {\r\n    if (newTokensNeeded(endpoint)) await getNewTokens()\r\n    return await ajax(endpoint, 'PUT', data)\r\n  },\r\n\r\n  delete: async (endpoint, data) => {\r\n    if (newTokensNeeded(endpoint)) await getNewTokens()\r\n    return await ajax(endpoint, 'DELETE', data)\r\n  }\r\n}\r\n\r\nlet accessToken = null\r\nconst ajax = async (endpoint, method, data = null) => {\r\n  try {\r\n    const res = await axios({\r\n      url: BASE_URL + endpoint,\r\n      headers: { authorization: `bearer ${accessToken}` },\r\n      method,\r\n      data\r\n    })\r\n    if (res.data.accessToken !== undefined) accessToken = res.data.accessToken\r\n    return res.data\r\n  } catch ({ response: { data: err } }) {\r\n    throw err\r\n  }\r\n}\r\n\r\nexport const newTokensNeeded = endpoint => {\r\n  if (endpoint.match(/login|signup|logout|validate_email/)) return false\r\n  const { exp } = jwtDecode(accessToken)\r\n  return Date.now() >= exp * 1000 ? true : false\r\n}\r\n\r\nexport const getNewTokens = async () => {\r\n  const res = await ajax('auth/refresh_token', 'POST')\r\n  accessToken = res.data.accessToken\r\n}\r\n","export const makeId = (length = 8) => {\r\n  var txt = ''\r\n  var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\r\n  for (let i = 0; i < length; i++) {\r\n    txt += possible.charAt(Math.floor(Math.random() * possible.length))\r\n  }\r\n  return txt\r\n}\r\n\r\nexport const capitalize = (string = '') => {\r\n  return string\r\n    .toLowerCase()\r\n    .split(/,|-| /)\r\n    .map(s => s[0].toUpperCase() + s.substring(1))\r\n    .join(' ')\r\n}\r\n\r\nexport const colorPicker = (name = 'a') => {\r\n  const test = range => new RegExp(`(?=[${range}])`, 'i').test(name[1])\r\n  switch (true) {\r\n    case test('a-c'):\r\n      return 'red'\r\n    case test('d-f'):\r\n      return 'orange'\r\n    case test('g-i'):\r\n      return 'yellow'\r\n    case test('j-l'):\r\n      return 'green'\r\n    case test('m-o'):\r\n      return 'blue'\r\n    case test('p-r'):\r\n      return 'purple'\r\n    case test('s-u'):\r\n      return 'pink'\r\n    case test('v-x'):\r\n      return 'black'\r\n    case test('y-z'):\r\n      return 'gold'\r\n    default:\r\n      return 'gray'\r\n  }\r\n}\r\n","import { httpService } from './httpService'\r\nimport { makeId } from './utilService'\r\n\r\nexport const boardService = {\r\n  getById: id => httpService.get(`board/${id}`),\r\n\r\n  update: board => httpService.put(`board/${board._id}`, board),\r\n\r\n  add: board => httpService.post(`board`, board),\r\n\r\n  createNewBoard: (title, userId) => ({\r\n    title,\r\n    users: [userId],\r\n    activity: [],\r\n    lists: [\r\n      { _id: makeId(), title: 'To Do', cards: [] },\r\n      { _id: makeId(), title: 'Doing', cards: [] },\r\n      { _id: makeId(), title: 'Done', cards: [] },\r\n      { _id: makeId(), title: 'QA', cards: [] }\r\n    ],\r\n    labels: [\r\n      { _id: makeId(), title: 'Not Started', color: 'red' },\r\n      { _id: makeId(), title: 'In Progress', color: 'orange' },\r\n      { _id: makeId(), title: 'QA', color: 'yellow' },\r\n      { _id: makeId(), title: 'Done', color: 'green' },\r\n      { _id: makeId(), title: 'Production', color: 'blue' }\r\n    ]\r\n  }),\r\n\r\n  createNewList: title => ({\r\n    _id: makeId(),\r\n    title,\r\n    cards: []\r\n  }),\r\n\r\n  createNewCard: title => ({\r\n    _id: makeId(),\r\n    title,\r\n    activity: [],\r\n    attachments: [],\r\n    checklist: [],\r\n    desc: '',\r\n    dueDate: '',\r\n    labels: [],\r\n    members: []\r\n  }),\r\n\r\n  createNewLabel: title => ({\r\n    _id: makeId(),\r\n    title,\r\n    color: ''\r\n  })\r\n}\r\n","import { httpService } from './httpService.js'\r\n\r\nexport const userService = {\r\n  query: query => httpService.get(`user/users/${query}`),\r\n  \r\n  validateEmail: email => httpService.get(`user/validate_email/${email}`),\r\n\r\n  login: creds => httpService.post(creds ? 'auth/login' : 'auth/refresh_token/login', creds),\r\n\r\n  signup: creds => httpService.post('auth/signup', creds),\r\n\r\n  logout: () => httpService.post('auth/logout')\r\n}\r\n","import { userService } from '../../service/userService.js'\r\nimport { boardTypes, CLEAR_BOARD } from '../board/BoardActions.js'\r\n\r\nexport const userTypes = {\r\n  SET_IS_LOADING: 'SET_IS_LOADING',\r\n  SET_LOGGED_USER: 'SET_LOGGED_USER',\r\n  SET_NEW_USER_BOARD: 'SET_NEW_USER_BOARD',\r\n  SET_USER_BOARDS: 'SET_USER_BOARDS'\r\n}\r\n\r\nexport const DEMO_LOGIN = () => async dispatch => {\r\n  var res\r\n  try {\r\n    res = await userService.login()\r\n  } catch (err) {\r\n    try {\r\n      res = await userService.login({ email: 'deni@avdija.com', password: '123' })\r\n    } catch (err) {\r\n      console.error(`DEMO_LOGIN ${err}`)\r\n    }\r\n  } finally {\r\n    if (res) {\r\n      dispatch({ type: userTypes.SET_LOGGED_USER, payload: res.user })\r\n      dispatch({ type: boardTypes.SET_BOARD, payload: res.board })\r\n    }\r\n    dispatch({ type: userTypes.SET_IS_LOADING, payload: false })\r\n  }\r\n}\r\n\r\nexport const LOGIN = creds => async dispatch => {\r\n  try {\r\n    const { user, board } = await userService.login(creds)\r\n    dispatch({ type: userTypes.SET_LOGGED_USER, payload: user })\r\n    dispatch({ type: boardTypes.SET_BOARD, payload: board })\r\n  } catch (err) {\r\n    console.error(`LOGIN ${err}`)\r\n  }\r\n}\r\n\r\nexport const SIGNUP = creds => async dispatch => {\r\n  try {\r\n    const { user } = await userService.signup(creds)\r\n    dispatch({ type: userTypes.SET_LOGGED_USER, payload: user })\r\n  } catch (err) {\r\n    console.error(err)\r\n  }\r\n}\r\n\r\nexport const LOGOUT = () => async dispatch => {\r\n  try {\r\n    await userService.logout()\r\n    dispatch({ type: userTypes.SET_LOGGED_USER, payload: null })\r\n    dispatch(CLEAR_BOARD())\r\n  } catch (err) {\r\n    console.error(err)\r\n  }\r\n}\r\n","import { boardTypes } from './BoardActions'\r\n\r\nconst initState = {\r\n  board: null,\r\n  list: null,\r\n  card: null\r\n}\r\n\r\nexport const boardReducer = (state = initState, { type, payload }) => {\r\n  switch (type) {\r\n    case boardTypes.RESET_STATE:\r\n      return initState\r\n    case boardTypes.SET_BOARD:\r\n      return {\r\n        ...state,\r\n        board: payload\r\n      }\r\n    case boardTypes.SET_ITEMS:\r\n      return {\r\n        ...state,\r\n        list: payload.list,\r\n        card: payload.card\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import { userTypes } from './UserActions'\r\n\r\nconst initState = {\r\n  isLoading: true,\r\n  user: null\r\n}\r\n\r\nexport const userReducer = (state = initState, { type, payload }) => {\r\n  switch (type) {\r\n    case userTypes.SET_IS_LOADING:\r\n      return {\r\n        ...state,\r\n        isLoading: payload\r\n      }\r\n    case userTypes.SET_LOGGED_USER:\r\n      return {\r\n        ...state,\r\n        user: payload\r\n      }\r\n    case userTypes.SET_USER_BOARDS:\r\n      return {\r\n        ...state,\r\n        user: { ...state.user, boards: payload }\r\n      }\r\n    case userTypes.SET_NEW_USER_BOARD:\r\n      return {\r\n        ...state,\r\n        user: { ...state.user, boards: [...state.user.boards, payload] }\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import { combineReducers, createStore, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport { boardReducer } from './board/BoardReducer'\r\nimport { userReducer } from './user/UserReducer'\r\n\r\nconst rootReducer = combineReducers({\r\n  userReducer,\r\n  boardReducer\r\n})\r\nexport const store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunk)))\r\n","import Tooltip from '@material-ui/core/Tooltip'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport { capitalize, colorPicker } from '../../service/utilService'\r\n\r\nexport const CardAvatar = ({ user, size = 'medium', tooltip, className }) => {\r\n  return (\r\n    <Tooltip title={capitalize(user.name)} arrow disableHoverListener={!tooltip}>\r\n      <div className={className}>\r\n        <Avatar\r\n          alt={capitalize(user.name)}\r\n          src={user.imgUrl || '/'}\r\n          className={`avatar ${size} ${user.imgUrl ? 'white' : colorPicker(user.name)}`}\r\n        />\r\n      </div>\r\n    </Tooltip>\r\n  )\r\n}\r\n","import { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useKey } from 'react-use'\r\nimport { ADD_BOARD } from '../../store/board/BoardActions'\r\n\r\nexport const CreateBoardModal = ({ toggleModal }) => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const [title, setTitle] = useState('')\r\n\r\n  useKey('Escape', toggleModal)\r\n\r\n  const handleInput = ({ target: { value } }) => setTitle(value)\r\n\r\n  const addBoard = () => {\r\n    dispatch(ADD_BOARD(title))\r\n    toggleModal()\r\n    history.push('/board')\r\n  }\r\n\r\n  return (\r\n    <div className=\"modal-screen\" onClick={toggleModal}>\r\n      <div className=\"create-board-section\" onClick={ev => ev.stopPropagation()}>\r\n        <div className=\"create-board-container\">\r\n          <div className=\"title-container\">\r\n            <h2>Add a Board</h2>\r\n            <button className=\"exit-btn\" onClick={toggleModal}>\r\n              X\r\n            </button>\r\n          </div>\r\n          <label className=\"flex col\">\r\n            Board Title:\r\n            <input value={title} onChange={handleInput} />\r\n          </label>\r\n          <button onClick={addBoard}>Create Board</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { ClickAwayListener, makeStyles, Popper } from '@material-ui/core'\r\nimport Grow from '@material-ui/core/Grow'\r\nimport { useState } from 'react'\r\nimport { useBus, useListener } from 'react-bus'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useLocation } from 'react-router'\r\nimport { useKey, useSetState } from 'react-use'\r\nimport { CLEAR_ITEMS } from '../../store/board/BoardActions'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  popper: {\r\n    zIndex: 1,\r\n    '&[x-placement*=\"bottom\"] $arrow': {\r\n      top: 0,\r\n      left: 0,\r\n      marginTop: '-0.9em',\r\n      width: '3em',\r\n      height: '1em',\r\n      '&::before': {\r\n        borderWidth: '0 1em 1em 1em',\r\n        borderColor: `transparent transparent ${theme.palette.background.paper} transparent`\r\n      }\r\n    }\r\n  },\r\n  arrow: {\r\n    position: 'absolute',\r\n    fontSize: 7,\r\n    width: '3em',\r\n    height: '3em',\r\n    '&::before': {\r\n      content: '\"\"',\r\n      margin: 'auto',\r\n      display: 'block',\r\n      width: 0,\r\n      height: 0,\r\n      borderStyle: 'solid'\r\n    }\r\n  }\r\n}))\r\n\r\nexport const usePopover = () => {\r\n  const eventBus = useBus()\r\n  return (ev, cmp, preserveAnchor) => eventBus.emit('togglePopover', [ev, cmp, preserveAnchor])\r\n}\r\n\r\nexport const Popover = () => {\r\n  useListener('togglePopover', payload => togglePopover(...payload))\r\n\r\n  const initState = { anchorEl: null, DynCmp: null }\r\n  const [{ anchorEl, DynCmp }, setState] = useSetState(initState)\r\n  const list = useSelector(state => state.boardReducer.list)\r\n\r\n  const inModal = useLocation().pathname.includes('board/modal')\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const togglePopover = (ev, cmp, preserveAnchor) => {\r\n    if (ev.avoidPopoverClickAway || (ev.target === document.body && ev.type === 'click')) return\r\n    if (!cmp || ev.currentTarget === anchorEl) {\r\n      if (!inModal && list) dispatch(CLEAR_ITEMS())\r\n      setState(initState)\r\n    } else if (preserveAnchor) {\r\n      setState({ DynCmp: cmp })\r\n    } else {\r\n      ev.nativeEvent.avoidPopoverClickAway = true\r\n      setState({ anchorEl: ev.currentTarget, DynCmp: cmp })\r\n    }\r\n  }\r\n\r\n  useKey(\r\n    'Escape',\r\n    ev => {\r\n      if (anchorEl) {\r\n        ev.avoidCardModal = true\r\n        togglePopover(ev)\r\n      }\r\n    },\r\n    {},\r\n    [anchorEl]\r\n  )\r\n\r\n  const [arrowRef, setArrowRef] = useState(null)\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <ClickAwayListener onClickAway={togglePopover}>\r\n      <Popper\r\n        className={classes.popper}\r\n        open={!!anchorEl}\r\n        anchorEl={anchorEl}\r\n        modifiers={{\r\n          offset: {\r\n            offset: '0,6'\r\n          },\r\n          arrow: {\r\n            enabled: true,\r\n            element: arrowRef\r\n          }\r\n        }}\r\n        style={{ zIndex: 20 }}\r\n        placement=\"bottom\"\r\n        transition>\r\n        {({ TransitionProps }) => (\r\n          <Grow {...TransitionProps} timeout={80}>\r\n            <div onClick={ev => ev.stopPropagation()}>\r\n              <span className={classes.arrow} ref={setArrowRef} />\r\n              {anchorEl && <DynCmp togglePopover={togglePopover} />}\r\n            </div>\r\n          </Grow>\r\n        )}\r\n      </Popper>\r\n    </ClickAwayListener>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { LOGOUT } from '../../../../store/user/UserActions'\r\nimport { useHistory } from 'react-router'\r\nimport { usePopover } from '../../Popover'\r\nimport { MenuList } from '@material-ui/core'\r\n\r\nexport default function UserMenu({ togglePopover }) {\r\n  const user = useSelector(state => state.userReducer.user) || {}\r\n\r\n  // const [anchorEl, setAnchorEl] = React.useState(null)\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n  const toHome = ev => {\r\n    togglePopover(ev)\r\n    history.push('/')\r\n  }\r\n\r\n  const onLogout = ev => {\r\n    togglePopover(ev)\r\n    dispatch(LOGOUT())\r\n    history.push('/')\r\n  }\r\n\r\n  const onLogin = ev => {\r\n    togglePopover(ev)\r\n    history.push('/login-signup')\r\n  }\r\n\r\n  return (\r\n    <MenuList className=\"popover-cmp small flex col list-br\">\r\n      <MenuItem onClick={toHome}>Home</MenuItem>\r\n      {user._id ? (\r\n        <MenuItem onClick={onLogout}>Logout</MenuItem>\r\n      ) : (\r\n        <MenuItem onClick={onLogin}>Login/Signup</MenuItem>\r\n      )}\r\n    </MenuList>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { useSelector } from 'react-redux'\r\nimport { Link, NavLink, useHistory, useLocation } from 'react-router-dom'\r\nimport { useToggle } from 'react-use'\r\nimport { CardAvatar } from '../Avatars/CardAvatar'\r\nimport { CreateBoardModal } from '../CreateBoardModal/CreateBoardModal'\r\nimport { usePopover } from '../Popover/Popover'\r\nimport UserMenu from '../Popover/PopoverCmps/Menus/UserMenu'\r\n\r\nexport const Header = () => {\r\n  const user = useSelector(state => state.userReducer.user)\r\n  const [isModalOpen, toggleModal] = useToggle(false)\r\n\r\n  const { push } = useHistory()\r\n  const { pathname } = useLocation()\r\n\r\n  const navigate = dest => pathname !== dest && push(dest)\r\n\r\n  const isActive = dest => (pathname === dest ? ' active' : '')\r\n\r\n  const togglePopover = usePopover()\r\n\r\n  return (\r\n    <>\r\n      <header className=\"main-header flex ac jb p6\">\r\n        <Link className=\"logo\" to=\"/\">\r\n          <svg role=\"presentation\" focusable=\"false\" viewBox=\"0 0 22 22\">\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              d=\"M3 5a2 2 0 012-2h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm2 1a1 1 0 011-1h4a1 1 0 011 1v10a1 1 0 01-1 1H6a1 1 0 01-1-1V6zm9-1a1 1 0 00-1 1v6a1 1 0 001 1h4a1 1 0 001-1V6a1 1 0 00-1-1h-4z\"\r\n              fill=\"currentColor\"></path>\r\n          </svg>\r\n          <span>Tallo</span>\r\n        </Link>\r\n        <nav className=\"flex ae gr10\">\r\n          {user?._id && (\r\n            <Button size=\"large\" className=\"trans\" onClick={toggleModal}>\r\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 448 448\">\r\n                <g>\r\n                  <path\r\n                    d=\"m408 184H272c-4.417969.0-8-3.582031-8-8V40c0-22.089844-17.910156-40-40-40s-40 17.910156-40 40v136c0 4.417969-3.582031 8-8 8H40c-22.089844.0-40 17.910156-40 40s17.910156 40 40 40h136c4.417969.0 8 3.582031 8 8v136c0 22.089844 17.910156 40 40 40s40-17.910156 40-40V272c0-4.417969 3.582031-8 8-8h136c22.089844.0 40-17.910156 40-40s-17.910156-40-40-40zm0 0\"\r\n                    fill=\"#fff\"\r\n                    data-original=\"#000000\"\r\n                  />\r\n                </g>\r\n              </svg>\r\n            </Button>\r\n          )}\r\n          <Button\r\n            size=\"large\"\r\n            className={`navlink trans${isActive('/')}`}\r\n            onClick={() => navigate('/')}>\r\n            Home\r\n          </Button>\r\n          <Button\r\n            size=\"large\"\r\n            className={`navlink trans${isActive('/board')}`}\r\n            onClick={() => navigate('/board')}>\r\n            Board\r\n          </Button>\r\n          <Button className=\"user-btn trans\" onClick={ev => togglePopover(ev, UserMenu)}>\r\n            {user && <CardAvatar user={user} />}\r\n          </Button>\r\n        </nav>\r\n      </header>\r\n      {isModalOpen && <CreateBoardModal toggleModal={toggleModal} />}\r\n    </>\r\n  )\r\n}\r\n","import AvatarGroup from '@material-ui/lab/AvatarGroup'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport { capitalize, colorPicker } from '../../service/utilService'\r\n\r\nexport const CardAvatars = ({ users, max,className , size = 'medium' }) => {\r\n  return (\r\n    <div className={className}>\r\n      <AvatarGroup max={max}>\r\n        {users.map(({ _id, name, imgUrl }) => (\r\n          <Tooltip title={capitalize(name)} arrow key={_id}>\r\n            <Avatar\r\n              src={imgUrl || '/'}\r\n              alt={capitalize(name)}\r\n              className={`avatar ${size} ${imgUrl ? 'white' : colorPicker(name  )}`}\r\n            />\r\n          </Tooltip>\r\n        ))}\r\n      </AvatarGroup>\r\n    </div>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\n\r\nexport const ColorPicker = ({ className = '', onClick = () => {}, selected = '' }) => {\r\n  const colors = ['red', 'orange', 'yellow', 'green', 'blue', 'purple', 'pink', 'black']\r\n\r\n  return (\r\n    <div className={`${className} grid g6 tc4`}>\r\n      {colors.map(color => (\r\n        <Button\r\n          size=\"large\"\r\n          key={color}\r\n          name=\"color\"\r\n          value={color}\r\n          onClick={onClick}\r\n          className={`${color}${selected === color ? ' selected' : ''}`}\r\n        />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router'\r\nimport { DELETE_CARD, DELETE_LIST } from '../../../../store/board/BoardActions'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\n\r\nexport const DeletePopover = ({ togglePopover }) => {\r\n  const cardId = useSelector(state => state.boardReducer.card?._id)\r\n  const listId = useSelector(state => state.boardReducer.list?._id)\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n  const deleteItem = ev => {\r\n    dispatch(cardId ? DELETE_CARD(cardId) : DELETE_LIST(listId))\r\n    history.push('/board')\r\n    togglePopover(ev)\r\n  }\r\n\r\n  return (\r\n    <div className=\"popover-cmp gb6\">\r\n      <PopoverHeader title={`Delete ${cardId ? 'Card' : 'List'}?`} />\r\n      <div className=\"flex jb sbl gr6\">\r\n        <Button size=\"large\" className=\"red\" onClick={deleteItem}>\r\n          Delete\r\n        </Button>\r\n        <Button size=\"large\" className=\"gray\" onClick={togglePopover}>\r\n          Cancel\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { DeletePopover } from '../Delete/DeletePopover'\r\nimport { MenuItem, MenuList } from '@material-ui/core'\r\n\r\nexport const ListMenu = ({ togglePopover }) => {\r\n  const Menu = {\r\n    Delete_List: DeletePopover\r\n  }\r\n  \r\n  const format = str => str.split('_').join(' ')\r\n\r\n  return (\r\n    <MenuList className=\"popover-cmp small flex col list-br\">\r\n      {Object.entries(Menu).map(([name, cmp]) => (\r\n        <MenuItem key={name} onClick={ev => togglePopover(ev, cmp, true)}>\r\n          <img className=\"icon\" src={process.env.PUBLIC_URL + `/${name}.png`} alt=\"\" />\r\n          {format(name)}\r\n        </MenuItem>\r\n      ))}\r\n    </MenuList>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { useSelector } from 'react-redux'\r\nimport { useLocation } from 'react-router'\r\nimport { CardMenu } from './PopoverCmps/Menus/CardMenu'\r\nimport { ListMenu } from './PopoverCmps/Menus/ListMenu'\r\nimport { usePopover } from './Popover'\r\n\r\nexport const PopoverHeader = ({ title, onBack }) => {\r\n  const card = useSelector(state => state.boardReducer.card)\r\n  const list = useSelector(state => state.boardReducer.list)\r\n  const inModal = useLocation().pathname.includes('board/modal')\r\n\r\n  const togglePopover = usePopover()\r\n\r\n  const backToMenu = ev => togglePopover(ev, card ? CardMenu : ListMenu, true)\r\n\r\n  return onBack || (!inModal && list) ? (\r\n    <div className=\"gcf fw flex rel jb \">\r\n      <Button size=\"large\" className=\"\" onClick={onBack || backToMenu}>\r\n        Back\r\n      </Button>\r\n      <span className=\"center\">{title}</span>\r\n      <Button size=\"large\" className=\"\" onClick={togglePopover}>\r\n        X\r\n      </Button>\r\n    </div>\r\n  ) : (\r\n    <div className=\"gcf fw flex rel col ae \">\r\n      <span className=\"center\">{title}</span>\r\n      <Button size=\"large\" className=\"\" onClick={togglePopover}>\r\n        X\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n","import { useDispatch, useSelector } from 'react-redux'\r\nimport { UPDATE_BOARD } from '../../../../store/board/BoardActions'\r\nimport { Button, TextField } from '@material-ui/core'\r\nimport { useSetState } from 'react-use'\r\nimport { ColorPicker } from '../ColorPicker/ColorPicker'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\n\r\nexport const LabelEditor = ({ labelToEdit, closeEditor }) => {\r\n  const dispatch = useDispatch()\r\n  const gLabels = useSelector(state => state.boardReducer.board.labels)\r\n  const [updatedLabel, setUpdatedLabel] = useSetState({ ...labelToEdit })\r\n\r\n  const handleInput = ({ currentTarget: { name, value } }) => setUpdatedLabel({ [name]: value })\r\n\r\n  const isNewLabel = !gLabels.find(({ _id }) => _id === updatedLabel._id)\r\n\r\n  const saveLabel = () => {\r\n    if (isNewLabel) updateLabels([...gLabels, updatedLabel])\r\n    else {\r\n      const idx = gLabels.findIndex(label => label._id === labelToEdit._id)\r\n      const updatedLabels = [...gLabels]\r\n      updatedLabels.splice(idx, 1, updatedLabel)\r\n      updateLabels(updatedLabels)\r\n    }\r\n  }\r\n\r\n  const deleteLabel = () => updateLabels(gLabels.filter(({ _id }) => _id !== updatedLabel._id))\r\n\r\n  const updateLabels = updatedLabels => {\r\n    dispatch(UPDATE_BOARD({ name: 'labels', value: updatedLabels }))\r\n    closeEditor()\r\n  }\r\n\r\n  return (\r\n    <div className=\"labels popover-cmp grid g6 tc4\">\r\n      <PopoverHeader title={isNewLabel ? 'Add' : 'Edit'} onBack={closeEditor} />\r\n      <TextField\r\n        className=\"gcf\"\r\n        variant=\"outlined\"\r\n        size=\"small\"\r\n        label=\"Label Name\"\r\n        name=\"title\"\r\n        value={updatedLabel.title}\r\n        onChange={handleInput}\r\n      />\r\n      <ColorPicker className=\"gcf\" onClick={handleInput} selected={updatedLabel.color} />\r\n\r\n      <Button size=\"large\" className=\"green gc1\" value={true} onClick={saveLabel}>\r\n        Save\r\n      </Button>\r\n      {!isNewLabel && (\r\n        <Button size=\"large\" className=\"red gc4\" onClick={deleteLabel}>\r\n          Delete\r\n        </Button>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { Button, TextField } from '@material-ui/core'\r\nimport { Fragment } from 'react'\r\nimport { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { UPDATE_CARD } from '../../../../store/board/BoardActions'\r\nimport { LabelEditor } from './LabelEditor'\r\nimport { boardService } from '../../../../service/boardService'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\nimport { useSetState, useUpdateEffect } from 'react-use'\r\n\r\nexport const LabelsPopover = () => {\r\n  const dispatch = useDispatch()\r\n  const gLabels = useSelector(state => state.boardReducer.board.labels) || []\r\n  const { labels = [], _id: cardId = '' } = useSelector(state => state.boardReducer.card) || {}\r\n  const [{ labelToEdit, searchTerm }, setState] = useSetState({ labelToEdit: null, searchTerm: '' })\r\n\r\n  const toggleLabel = ({ currentTarget: { value } }) => {\r\n    dispatch(\r\n      UPDATE_CARD({\r\n        cardId,\r\n        name: 'labels',\r\n        value: labels.includes(value)\r\n          ? labels.filter(labelId => labelId !== value)\r\n          : [...labels, value]\r\n      })\r\n    )\r\n  }\r\n\r\n  const filteredLabels = gLabels.filter(({ title }) => RegExp(searchTerm, 'i').test(title))\r\n\r\n  const handleInput = ({ target: { value } }) => setState({ searchTerm: value })\r\n\r\n  const editLabel = gLabel => setState({ labelToEdit: gLabel })\r\n\r\n  const createNewLabel = () => setState({ labelToEdit: boardService.createNewLabel(searchTerm) })\r\n\r\n  const closeEditor = () => setState({ labelToEdit: null })\r\n\r\n  useUpdateEffect(() => setState({ searchTerm: '' }), [labelToEdit])\r\n\r\n  return !labelToEdit ? (\r\n    <div className=\"labels popover-cmp grid tc4 g6\">\r\n      <PopoverHeader title=\"Labels\" />\r\n      <TextField\r\n        className=\"gcf\"\r\n        size=\"small\"\r\n        variant=\"outlined\"\r\n        label=\"Search Labels\"\r\n        value={searchTerm}\r\n        onChange={handleInput}\r\n      />\r\n      {filteredLabels.map(gLabel => (\r\n        <Fragment key={gLabel._id}>\r\n          <Button\r\n            size=\"large\"\r\n            className={`label gcf-1 flex jb ${gLabel.color}`}\r\n            value={gLabel._id}\r\n            onClick={toggleLabel}>\r\n            <span>{gLabel.title}</span>\r\n            <span>{labels.includes(gLabel._id) && 'V'}</span>\r\n          </Button>\r\n          <Button size=\"large\" className=\" gcl\" onClick={() => editLabel(gLabel)}>\r\n            Edit\r\n          </Button>\r\n        </Fragment>\r\n      ))}\r\n      <Button size=\"large\" className=\"gcf \" onClick={createNewLabel}>\r\n        Add Label\r\n      </Button>\r\n    </div>\r\n  ) : (\r\n    <LabelEditor labelToEdit={labelToEdit} closeEditor={closeEditor} />\r\n  )\r\n}\r\n","import { Button, TextField } from '@material-ui/core'\r\nimport { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { UPDATE_CARD } from '../../../../store/board/BoardActions'\r\nimport { CardAvatar } from '../../../Avatars/CardAvatar'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\n\r\nexport const CardMembersPopover = () => {\r\n  const dispatch = useDispatch()\r\n  const users = useSelector(state => state.boardReducer.board.users) || []\r\n  const { _id: cardId = '', members = [] } = useSelector(state => state.boardReducer.card) || {}\r\n\r\n  const [{ activeMembers, searchTerm, searchRes }, setState] = useState({\r\n    activeMembers: [],\r\n    searchTerm: '',\r\n    searchRes: []\r\n  })\r\n\r\n  const updateState = ev => {\r\n    setState({\r\n      activeMembers: users.filter(({ _id }) => members.includes(_id)),\r\n      searchTerm: ev ? ev.target.value : searchTerm,\r\n      searchRes: users.filter(\r\n        ({ _id, name }) =>\r\n          !members.includes(_id) && RegExp(ev ? ev.target.value : searchTerm, 'i').test(name)\r\n      )\r\n    })\r\n  }\r\n\r\n  useEffect(updateState, [users, members])\r\n\r\n  const toggleMember = ({ currentTarget: { value } }) => {\r\n    dispatch(\r\n      UPDATE_CARD({\r\n        cardId,\r\n        name: 'members',\r\n        value: members.includes(value)\r\n          ? members.filter(memberId => memberId !== value)\r\n          : [...members, value]\r\n      })\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"popover-cmp flex col gb6\">\r\n      <PopoverHeader title=\"Card Members\" />\r\n      <TextField\r\n        className=\"mb6\"\r\n        size=\"small\"\r\n        variant=\"outlined\"\r\n        label=\"Search Members\"\r\n        value={searchTerm}\r\n        onChange={updateState}\r\n      />\r\n      {activeMembers.map(user => (\r\n        <Button key={user._id} className=\" flex js\" value={user._id} onClick={toggleMember}>\r\n          <CardAvatar className=\"\" user={user} size=\"small\" />\r\n          <span className=\"capital ml6 fg1 tas\">{user.name}</span>X\r\n        </Button>\r\n      ))}\r\n      {searchRes[0] && (\r\n        <>\r\n          <b className=\"tac\">Board Members</b>\r\n          {searchRes.map(user => (\r\n            <Button\r\n              key={user._id}\r\n              className=\" flex js\"\r\n              value={user._id}\r\n              onClick={toggleMember}>\r\n              <CardAvatar className=\"\" user={user} size=\"small\" />\r\n              <span className=\"capital ml6 fg1 tas\">{user.name}</span>X\r\n            </Button>\r\n          ))}\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useUpdateEffect, useSetState, useToggle } from 'react-use'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { HANDLE_DROP } from '../../../../store/board/BoardActions'\r\nimport { Button, InputLabel, MenuItem, Select } from '@material-ui/core'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\n\r\nexport const MoveCardPopover = () => {\r\n  const dispatch = useDispatch()\r\n  const card = useSelector(state => state.boardReducer.card) || {}\r\n  const list = useSelector(state => state.boardReducer.list) || {}\r\n  const lists = useSelector(state => state.boardReducer.board.lists)\r\n\r\n  const initState = { targetList: list, targetPos: card._id }\r\n  const [{ targetPos, targetList }, setTarget] = useSetState(initState)\r\n  useUpdateEffect(() => setTarget(initState), [lists])\r\n\r\n  const handleInput = ({ target: { name, value } }) => {\r\n    name === 'targetPos'\r\n      ? setTarget({ targetPos: value })\r\n      : setTarget({\r\n          targetList: lists.find(({ _id }) => _id === value),\r\n          targetPos: value === list._id ? card._id : value\r\n        })\r\n  }\r\n\r\n  const moveCard = () => {\r\n    if (targetPos === card._id) return\r\n    dispatch(\r\n      HANDLE_DROP({\r\n        type: 'CARD',\r\n        posOffset: null,\r\n        sourceId: card._id,\r\n        targetId: targetPos\r\n      })\r\n    )\r\n    setTarget(initState)\r\n  }\r\n\r\n  return (\r\n    <div className=\"popover-cmp flex col gb6\">\r\n      <PopoverHeader title=\"Move Card\" />\r\n      <InputLabel htmlFor=\"targetList\">To List:</InputLabel>\r\n      <Select\r\n        value={targetList._id}\r\n        onChange={handleInput}\r\n        inputProps={{\r\n          name: 'targetList',\r\n          id: 'targetList'\r\n        }}>\r\n        {lists.map(currList => (\r\n          <MenuItem value={currList._id} key={currList._id}>\r\n            {`${currList.title} ${currList === list ? '(Current)' : ''}`}\r\n          </MenuItem>\r\n        ))}\r\n      </Select>\r\n      <InputLabel htmlFor=\"targetPos\">Position:</InputLabel>\r\n      <Select\r\n        onOpen={ev => console.log(ev)}\r\n        value={targetPos}\r\n        onChange={handleInput}\r\n        inputProps={{\r\n          name: 'targetPos',\r\n          id: 'targetPos'\r\n        }}>\r\n        {targetList.cards.map((currCard, idx) => (\r\n          <MenuItem value={currCard._id} key={currCard._id}>\r\n            {`${idx + 1} ${card._id === currCard._id ? '(Current)' : ''}`}\r\n          </MenuItem>\r\n        ))}\r\n        {list._id !== targetList._id && (\r\n          <MenuItem value={targetList._id}>{targetList.cards.length + 1}</MenuItem>\r\n        )}\r\n      </Select>\r\n      <Button size=\"large\" className=\"green\" onClick={moveCard}>\r\n        Move\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n","import { LabelsPopover } from '../../../Popover/PopoverCmps/Labels/LabelsPopover'\r\nimport { CardMembersPopover } from '../../../Popover/PopoverCmps/Members/CardMembersPopover'\r\nimport { DeletePopover } from '../../../Popover/PopoverCmps/Delete/DeletePopover'\r\nimport { MoveCardPopover } from '../../../Popover/PopoverCmps/MoveCard/MoveCardPopover'\r\nimport { MenuItem, MenuList } from '@material-ui/core'\r\n\r\nexport const CardMenu = ({ togglePopover }) => {\r\n  const Menu = {\r\n    Labels: LabelsPopover,\r\n    Members: CardMembersPopover,\r\n    Move_Card: MoveCardPopover,\r\n    Delete_Card: DeletePopover\r\n  }\r\n  const format = str => str.split('_').join(' ')\r\n\r\n  return (\r\n    <MenuList className=\"popover-cmp small flex col list-br\">\r\n      {Object.entries(Menu).map(([name, cmp]) => (\r\n        <MenuItem key={name} onClick={ev => togglePopover(ev, cmp, true)}>\r\n          <img className=\"icon\" src={process.env.PUBLIC_URL + `/${name}.png`} alt=\"\" />\r\n          {format(name)}\r\n        </MenuItem>\r\n      ))}\r\n    </MenuList>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/clock.966977aa.svg\";","import { useRef } from 'react'\r\nimport { useBus, useListener } from 'react-bus'\r\n\r\nexport const VideoPlayer = ({ videoUrl, isGrouped, className }) => {\r\n  const eventBus = useBus()\r\n  const videoRef = useRef()\r\n   \r\n  const isPlaying = () => !videoRef.current.paused\r\n\r\n  const requestVideoFromGroup = () => !isGrouped && eventBus.emit('videoRequest', videoUrl)\r\n\r\n  useListener('videoRequest', requestedUrl => {\r\n    if (isGrouped && isPlaying()) {\r\n      if (requestedUrl === videoUrl) {\r\n        eventBus.emit('videoResponse', getVideoState())\r\n      }\r\n      videoRef.current.pause()\r\n    }\r\n  })\r\n\r\n  const getVideoState = () => {\r\n    const { currentTime, volume, muted } = videoRef.current\r\n    return { currentTime, volume, muted }\r\n  }\r\n\r\n  useListener('videoResponse', ({ currentTime, volume, muted }) => {\r\n    if (!isGrouped) {\r\n      videoRef.current.currentTime = currentTime\r\n      videoRef.current.volume = volume\r\n      videoRef.current.muted = muted\r\n      videoRef.current.play()\r\n    }\r\n  })\r\n\r\n  return (\r\n    <video\r\n      className={className}\r\n      controls\r\n      ref={videoRef}\r\n      onCanPlay={requestVideoFromGroup}\r\n      onClick={ev => isGrouped && ev.preventDefault()}>\r\n      <source src={videoUrl} />\r\n    </video>\r\n  )\r\n}\r\n","import { useRef } from 'react'\r\nimport { useDrag, useDrop } from 'react-dnd'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { CardAvatars } from '../../Avatars/CardAvatars'\r\nimport { CardMenu } from '../../Popover/PopoverCmps/Menus/CardMenu'\r\nimport clock from '../../../assets/clock.svg'\r\nimport { GET_BY_ID, HANDLE_DROP } from '../../../store/board/BoardActions'\r\nimport { VideoPlayer } from '../../VideoPlayer/VideoPlayer'\r\nimport { Button } from '@material-ui/core'\r\nimport { useToggle } from 'react-use'\r\nimport { usePopover } from '../../Popover/Popover'\r\n\r\nexport const CardPreview = ({ card, isDragLayer }) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const { users, labels: gLabels } = useSelector(state => state.boardReducer.board)\r\n  const { _id: cardId, title, attachments, desc, dueDate, labels, cardVideo } = card\r\n  const members = users.filter(({ _id }) => card.members.includes(_id))\r\n\r\n  const rectRef = useRef()\r\n  const [isDragging, drag] = useDrag({\r\n    collect: monitor => monitor.isDragging(),\r\n    item: { type: 'CARD' },\r\n    begin: () => {\r\n      const { height, width } = rectRef.current.getBoundingClientRect()\r\n      return {\r\n        type: 'CARD',\r\n        sourceId: cardId,\r\n        card,\r\n        height,\r\n        overListId: '',\r\n        width\r\n      }\r\n    }\r\n  })\r\n\r\n  const [{ hoverHeight = 0, posOffset = 0 }, drop] = useDrop({\r\n    accept: !isDragLayer ? 'CARD' : '',\r\n    hover: item => (item.overListId = ''),\r\n    collect: monitor => {\r\n      if (!monitor.isOver()) return {}\r\n      else {\r\n        const { top, height } = rectRef.current.getBoundingClientRect()\r\n        const mouseY = monitor.getClientOffset().y\r\n        return {\r\n          posOffset: top + height / 2 > mouseY ? 0 : 1,\r\n          hoverHeight: monitor.getItem().height\r\n        }\r\n      }\r\n    },\r\n    drop: item => dispatch(HANDLE_DROP({ ...item, posOffset, targetId: cardId }))\r\n  })\r\n\r\n  const togglePopover = usePopover()\r\n\r\n  const cardInStore = useSelector(state => state.boardReducer.card)\r\n  const toggleMenu = ev => {\r\n    ev.avoidModal = true\r\n    if (card !== cardInStore) dispatch(GET_BY_ID(card._id))\r\n    togglePopover(ev, CardMenu)\r\n  }\r\n\r\n  const history = useHistory()\r\n  const openModal = ev => {\r\n    if (ev.avoidModal) return\r\n    history.push(`/board/modal/${cardId}`)\r\n  }\r\n\r\n  const [menuBtnHovered, setMenuBtnHovered] = useToggle(false)\r\n  return (\r\n    <div\r\n      ref={!isDragLayer ? drop : null}\r\n      className={`card-drop-container${isDragging ? ' hidden' : ''}`}>\r\n      <div ref={rectRef} className=\"rect-ref\">\r\n        {!!hoverHeight && !posOffset && (\r\n          <div className=\"card-placeholder top\" style={{ height: `${hoverHeight}px` }} />\r\n        )}\r\n        <div ref={!isDragLayer ? drag : null} className=\"card-preview flex col fast gb8 sbl shdw2\">\r\n          <div\r\n            onClick={openModal}\r\n            className={`container white flex col p12 gb8 sbl rel${\r\n              menuBtnHovered ? ' menu-btn-hovered' : ''\r\n            }`}>\r\n            <div className=\"flex jb ac\">\r\n              <span className=\"title\">{title}</span>\r\n              <Button\r\n                size=\"small\"\r\n                className=\"\"\r\n                onMouseEnter={() => setMenuBtnHovered(true)}\r\n                onMouseLeave={() => setMenuBtnHovered(false)}\r\n                onClick={toggleMenu}>\r\n                ···\r\n              </Button>\r\n            </div>\r\n            <span className=\"desc fw\">{desc}</span>\r\n            {cardVideo && <VideoPlayer videoUrl={cardVideo} isGrouped={true} />}\r\n            {attachments[0] && (\r\n              <div className=\"attachments\">\r\n                <img src={attachments[0]} alt=\"\" />\r\n              </div>\r\n            )}\r\n            {labels[0] && (\r\n              <div className=\"labels flex\">\r\n                {gLabels.map(\r\n                  gLabel =>\r\n                    labels.some(label => label === gLabel._id) && (\r\n                      <div className={`label ${gLabel.color}`} key={gLabel._id} />\r\n                    )\r\n                )}\r\n              </div>\r\n            )}\r\n            {(!!dueDate || !!members[0]) && (\r\n              <div className=\"flex jb\">\r\n                {!!dueDate && (\r\n                  <div className=\"due-date flex ac\">\r\n                    <img src={clock} alt=\"\" />\r\n                    <p>{new Date(dueDate).toDateString()}</p>\r\n                  </div>\r\n                )}\r\n                <div className=\"spacer\" />\r\n                {members[0] && <CardAvatars max={4} users={members} />}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        {!!hoverHeight && !!posOffset && (\r\n          <div className=\"card-placeholder bottom\" style={{ height: `${hoverHeight}px` }} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { useRef, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useKey } from 'react-use'\r\nimport { GET_BY_ID, UPDATE_LIST } from '../../../../store/board/BoardActions'\r\nimport { usePopover } from '../../../Popover/Popover'\r\nimport { ListMenu } from '../../../Popover/PopoverCmps/Menus/ListMenu'\r\n\r\nexport const ListHeader = ({ list }) => {\r\n  const dispatch = useDispatch()\r\n  const [{ title, timer }, setState] = useState({ title: list.title, timer: null })\r\n  const titleRef = useRef(null)\r\n\r\n  const preventOnFirstClick = ev => ev.target !== document.activeElement && ev.preventDefault()\r\n  const selectOnFirstClick = ev => ev.target !== document.activeElement && ev.target.select()\r\n\r\n  const blurTitle = () => titleRef.current.blur()\r\n  useKey(['Escape', 'Enter'], blurTitle)\r\n\r\n  const handleInput = ({ target: { name, value } }) => {\r\n    clearTimeout(timer)\r\n    setState({\r\n      title: value,\r\n      timer: setTimeout(() => {\r\n        dispatch(UPDATE_LIST({ name, value, listId: list._id }))\r\n      }, 500)\r\n    })\r\n  }\r\n\r\n  const togglePopover = usePopover()\r\n\r\n  const listInStore = useSelector(state => state.boardReducer.list)\r\n  const toggleMenu = ev => {\r\n    ev.avoidModal = true\r\n    if (list !== listInStore) dispatch(GET_BY_ID(list._id))\r\n    togglePopover(ev, ListMenu)\r\n  }\r\n\r\n  return (\r\n    <header className=\"flex ac jb pointer\">\r\n      <input\r\n        autoComplete=\"off\"\r\n        name=\"title\"\r\n        value={title}\r\n        ref={titleRef}\r\n        className=\"title fast f-110\"\r\n        onMouseDown={preventOnFirstClick}\r\n        onMouseUp={selectOnFirstClick}\r\n        onChange={handleInput}\r\n      />\r\n      <Button\r\n        size=\"small\"\r\n        className=\"\"\r\n        onMouseDown={ev => ev.stopPropagation()}\r\n        onClick={ev => ev.stopPropagation()}\r\n        onMouseUp={toggleMenu}>\r\n        ···\r\n      </Button>\r\n    </header>\r\n  )\r\n}\r\n","import { useDrop } from 'react-dnd'\r\n// import { useDispatch } from 'react-redux'\r\n// import { HANDLE_DROP } from '../../../store/board/BoardActions'\r\n\r\nexport const CardDropZone = ({ listId }) => {\r\n  // const dispatch = useDispatch()\r\n\r\n  const [, drop] = useDrop({\r\n    accept: 'CARD',\r\n    hover: item => (item.overListId = listId),\r\n  })\r\n\r\n  return <div className=\"drop-zone\" ref={drop} />\r\n}\r\n","import { Button, ClickAwayListener, Input, TextField } from '@material-ui/core'\r\nimport { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useKey, useToggle, useUpdateEffect } from 'react-use'\r\nimport { ADD_CARD } from '../../../../store/board/BoardActions'\r\nimport { CardDropZone } from '../CardDropZone'\r\n\r\nexport const AddCard = ({ listId }) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const [isAddCard, toggleAddCard] = useToggle(false)\r\n  const [newCardTitle, setNewCardTitle] = useState('')\r\n\r\n  useUpdateEffect(() => setNewCardTitle(''), [isAddCard])\r\n\r\n  const addCard = ev => {\r\n    ev.preventDefault()\r\n    dispatch(ADD_CARD(newCardTitle, listId))\r\n    toggleAddCard()\r\n  }\r\n\r\n  useKey('Escape', () => toggleAddCard(false))\r\n\r\n  return isAddCard ? (\r\n    <ClickAwayListener onClickAway={toggleAddCard}>\r\n      <form className=\"fw gb6\" onSubmit={addCard}>\r\n        <input\r\n          className=\"shdw2 rem p10 fw br4 white\"\r\n          autoFocus\r\n          autoComplete=\"off\"\r\n          placeholder=\"Enter a title for this card...\"\r\n          value={newCardTitle}\r\n          onChange={ev => setNewCardTitle(ev.target.value)}\r\n        />\r\n        <div className=\"flex jb\">\r\n          <Button className=\"green\">Add Card</Button>\r\n          <Button onClick={toggleAddCard}>X</Button>\r\n        </div>\r\n      </form>\r\n    </ClickAwayListener>\r\n  ) : (\r\n    <>\r\n      <Button className=\"flex ac js\" onClick={toggleAddCard}>\r\n        + Add another card\r\n      </Button>\r\n      {/* <CardDropZone listId={listId} /> */}\r\n    </>\r\n  )\r\n}\r\n","import { ClickAwayListener } from '@material-ui/core'\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { useDrag, useDrop } from 'react-dnd'\r\nimport { useDispatch } from 'react-redux'\r\nimport { HANDLE_DROP } from '../../../store/board/BoardActions'\r\nimport { CardPreview } from '../CardPreview/CardPreview'\r\nimport { ListHeader } from './ListHeader/ListHeader'\r\nimport { AddCard } from './AddCard/AddCard'\r\nimport { CardDropZone } from './CardDropZone'\r\n\r\nexport const List = ({ list, isDragLayer }) => {\r\n  const rectRef = useRef(null)\r\n  const dispatch = useDispatch()\r\n\r\n  const { _id: listId, cards } = list\r\n\r\n  const [isDragging, drag] = useDrag({\r\n    collect: monitor => monitor.isDragging(),\r\n    item: { type: 'LIST' },\r\n    begin: () => {\r\n      const { height, width } = rectRef.current.getBoundingClientRect()\r\n      return {\r\n        type: 'LIST',\r\n        list,\r\n        sourceId: listId,\r\n        width,\r\n        height\r\n      }\r\n    }\r\n  })\r\n\r\n  const [{ cardOver, listOver, hoverWidth, hoverHeight, posOffset }, drop] = useDrop({\r\n    accept: !isDragLayer ? ['LIST', 'CARD'] : '',\r\n    collect: monitor => {\r\n      const { left, width } = rectRef.current?.getBoundingClientRect() || {}\r\n      const mouseX = monitor.getClientOffset()?.x\r\n      return {\r\n        posOffset: left + width / 2 > mouseX ? 0 : 1,\r\n        hoverWidth: monitor.getItem()?.width || 0,\r\n        hoverHeight: monitor.getItem()?.height || 0,\r\n        listOver: monitor.isOver() && monitor.getItemType() === 'LIST',\r\n        cardOver: monitor.getItem()?.overListId === listId\r\n      }\r\n    },\r\n    canDrop: ({ type, sourceId }) => type === 'LIST' || cardOver,\r\n    drop: item => dispatch(HANDLE_DROP({ ...item, posOffset, targetId: listId }))\r\n  })\r\n\r\n  // useEffect(() => {\r\n  //   cardOver && console.log(listId)\r\n  // }, [cardOver])\r\n\r\n  return (\r\n    <div ref={drop} className={`list-drop-container${isDragging ? ' hidden' : ''}`}>\r\n      <div ref={rectRef} className=\"rect-ref flex\">\r\n        {listOver && !posOffset && (\r\n          <div\r\n            className=\"placeholder left\"\r\n            style={{\r\n              width: `${hoverWidth}px`,\r\n              height: `${hoverHeight}px`\r\n            }}\r\n          />\r\n        )}\r\n        <div ref={!isDragLayer ? drag : null} className={`list gray flex col gb6`}>\r\n          <ListHeader list={list} />\r\n          <div className=\"cards flex col\">\r\n            {cards.map(card => (\r\n              <CardPreview key={card._id} card={card} />\r\n            ))}\r\n            {cardOver && (\r\n              <div className=\"card-placeholder\" style={{ height: `${hoverHeight}px` }} />\r\n            )}\r\n          </div>\r\n          <AddCard listId={listId} />\r\n        </div>\r\n        {listOver && !!posOffset && (\r\n          <div\r\n            className=\"list-placeholder right\"\r\n            style={{\r\n              width: `${hoverWidth}px`,\r\n              height: `${hoverHeight}px`\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n      <CardDropZone listId={listId} />\r\n    </div>\r\n  )\r\n}\r\n","import { MenuItem, MenuList } from '@material-ui/core'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { GET_BOARD_BY_ID } from '../../../../store/board/BoardActions'\r\nimport { usePopover } from '../../Popover'\r\n\r\nexport const BoardSelect = () => {\r\n  const boardId = useSelector(state => state.boardReducer.board._id)\r\n  const boards = useSelector(state => state.userReducer.user.boards)\r\n  const dispatch = useDispatch()\r\n  const togglePopover = usePopover()\r\n\r\n  const selectBoard = (ev, selectedBoard) => {\r\n    if (selectedBoard !== boardId) {\r\n      dispatch(GET_BOARD_BY_ID(selectedBoard))\r\n      togglePopover(ev)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <MenuList className=\"popover-cmp small flex col list-br\">\r\n      {boards.map(({ _id, title }) => (\r\n        <MenuItem key={_id} onClick={ev => selectBoard(ev, _id)}>\r\n          {title}\r\n        </MenuItem>\r\n      ))}\r\n    </MenuList>\r\n  )\r\n}\r\n","import { ColorPicker } from './ColorPicker/ColorPicker'\r\nimport { PopoverHeader } from '../PopoverHeader'\r\n\r\nexport const BoardColor = () => {\r\n  const onColorPick = ({ currentTarget: { value } }) => {\r\n    var root = document.getElementById('root')\r\n    value = value === 'gradient' ? 'linear-gradient(#006f83, #00aecc)' : value\r\n    root.style.background = value\r\n  }\r\n\r\n  return (\r\n    <div className=\"popover-cmp flex col\">\r\n      <PopoverHeader title=\"Choose Color\" />\r\n      <ColorPicker className=\"\" onClick={onColorPick} />\r\n    </div>\r\n  )\r\n}\r\n","import { useSetState, useUpdateEffect } from 'react-use'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { userService } from '../../../../service/userService'\r\nimport { UPDATE_BOARD } from '../../../../store/board/BoardActions'\r\nimport { CardAvatar } from '../../../Avatars/CardAvatar'\r\nimport { TextField } from '@material-ui/core'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\n\r\nexport const BoardMembersPopover = ({ setAnchorEl }) => {\r\n  const dispatch = useDispatch()\r\n  const users = useSelector(state => state.boardReducer.board.users)\r\n  const userId = useSelector(state => state.userReducer.user._id)\r\n  const [{ searchTerm, searchRes, filteredRes }, setState] = useSetState({\r\n    searchTerm: '',\r\n    searchRes: [],\r\n    filteredRes: []\r\n  })\r\n\r\n  const handleInput = ({ target: { value } }) => setState({ searchTerm: value })\r\n\r\n  useUpdateEffect(async () => {\r\n    setState({ searchRes: searchTerm ? await userService.query(searchTerm) : [] })\r\n  }, [searchTerm])\r\n\r\n  useUpdateEffect(() => {\r\n    setState({ filteredRes: searchRes.filter(res => !users.some(user => res._id === user._id)) })\r\n  }, [searchRes, users])\r\n\r\n  const toggleUser = user => {\r\n    dispatch(\r\n      UPDATE_BOARD({\r\n        name: 'users',\r\n        value: users.includes(user) ? users.filter(currUser => currUser !== user) : [...users, user]\r\n      })\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"members popover-cmp flex col gb12\">\r\n      <PopoverHeader title=\"Board Members\" />\r\n      <TextField\r\n        size=\"small\"\r\n        label=\"Search Members\"\r\n        variant=\"outlined\"\r\n        value={searchTerm}\r\n        onChange={handleInput}\r\n      />\r\n      <div className=\"flex col gb2\">\r\n        {users.map(user => (\r\n          <button\r\n            className={`btn  sbl${user._id === userId ? ' logged-user' : ''}`}\r\n            key={user._id}\r\n            onClick={() => toggleUser(user)}>\r\n            <CardAvatar user={user} size=\"small\" />\r\n            <span className=\"capital\">{user.name}</span>\r\n            <span>{user._id !== userId ? 'X' : '(You)'}</span>\r\n          </button>\r\n        ))}\r\n      </div>\r\n      {filteredRes[0] && (\r\n        <>\r\n          <b>Users</b>\r\n          <div className=\"flex col gb2\">\r\n            {filteredRes.map(user => (\r\n              <button className=\"btn  sbl\" key={user._id} onClick={() => toggleUser(user)}>\r\n                <CardAvatar user={user} size=\"small\" />\r\n                <span className=\"capital fg1\">{user.name}</span>\r\n                <span>+</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { BoardSelect } from '../../Popover/PopoverCmps/Menus/BoardSelect'\r\nimport { BoardColor } from '../../Popover/PopoverCmps/BoardColor'\r\nimport { BoardMembersPopover } from '../../Popover/PopoverCmps/Members/BoardMembersPopover'\r\nimport { usePopover } from '../../Popover/Popover'\r\nimport { CLEAR_ITEMS } from '../../../store/board/BoardActions'\r\n\r\nexport const BoardHeader = () => {\r\n  const dispatch = useDispatch()\r\n\r\n  const title = useSelector(state => state.boardReducer.board.title)\r\n  const list = useSelector(state => state.boardReducer.list)\r\n  \r\n  const togglePopover = usePopover()\r\n  const toggleMenu = (ev, cmp) => {\r\n    if (list) dispatch(CLEAR_ITEMS())\r\n    togglePopover(ev, cmp)\r\n  }\r\n\r\n  return (\r\n    <header className=\"board-header flex ac p6 gr10\">\r\n      <Button className=\"trans\" size=\"large\" onClick={ev => toggleMenu(ev, BoardSelect)}>\r\n        Boards ▼\r\n      </Button>\r\n      <h2>{title}</h2>\r\n      <Button className=\"trans\" size=\"large\" onClick={ev => toggleMenu(ev, BoardMembersPopover)}>\r\n        Users ▼\r\n      </Button>\r\n      <Button size=\"large\" className=\"trans\" onClick={ev => toggleMenu(ev, BoardColor)}>\r\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 384 384\">\r\n          <path\r\n            d=\"M192 0C85.973 0 0 85.973 0 192s85.973 192 192 192a31.96 31.96 0 0 0 32-32c0-8.32-3.093-15.787-8.32-21.44-5.013-5.653-8-13.013-8-21.227a31.96 31.96 0 0 1 32-32h37.653c58.88 0 106.667-47.787 106.667-106.667C384 76.373 298.027 0 192 0zM74.667 192a31.96 31.96 0 1 1 0-64 31.96 31.96 0 1 1 0 64zm64-85.333a31.96 31.96 0 0 1-32-32 31.96 31.96 0 1 1 64 0 31.96 31.96 0 0 1-32 32zm106.666 0a31.96 31.96 0 0 1-32-32 31.96 31.96 0 1 1 64 0 31.96 31.96 0 0 1-32 32zm64 85.333a31.96 31.96 0 1 1 0-64 31.96 31.96 0 1 1 0 64z\"\r\n            fill=\"#fff\"\r\n          />\r\n        </svg>\r\n      </Button>\r\n    </header>\r\n  )\r\n}\r\n","import { Button, ClickAwayListener } from '@material-ui/core'\r\nimport { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useToggle, useUpdateEffect } from 'react-use'\r\nimport { ADD_LIST } from '../../../store/board/BoardActions'\r\n\r\nexport const AddList = () => {\r\n  const dispatch = useDispatch()\r\n\r\n  const [isAddList, toggleAddList] = useToggle(false)\r\n  const [newListTitle, setNewListTitle] = useState('')\r\n\r\n  useUpdateEffect(() => setNewListTitle(''), [isAddList])\r\n\r\n  const addList = ev => {\r\n    ev.preventDefault()\r\n    dispatch(ADD_LIST(newListTitle))\r\n    toggleAddList()\r\n  }\r\n\r\n  const handleInput = ({ target: { value } }) => setNewListTitle(value)\r\n\r\n  return (\r\n    <div className=\"add-list\">\r\n      {isAddList ? (\r\n        <ClickAwayListener onClickAway={toggleAddList}>\r\n          <form className=\"fw gray gb6 br4\" onSubmit={addList}>\r\n            <input\r\n              className=\"rem fw white\"\r\n              autoFocus\r\n              autoComplete=\"off\"\r\n              placeholder=\"Enter a title for this list...\"\r\n              value={newListTitle}\r\n              onChange={ev => setNewListTitle(ev.target.value)}\r\n            />\r\n            <div className=\"flex jb\">\r\n              <Button className=\"green\">Add List</Button>\r\n              <Button onClick={toggleAddList}>X</Button>\r\n            </div>\r\n          </form>\r\n        </ClickAwayListener>\r\n      ) : (\r\n        <Button className=\"fp flex ac js trans br4\" onClick={toggleAddList}>\r\n          + Add another list\r\n        </Button>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { boardTypes } from '../../store/board/BoardActions'\r\nimport { List } from '../../components/Board/List/List'\r\nimport { socketService, socketTypes } from '../../service/socketService.js'\r\nimport { BoardHeader } from '../../components/Board/BoardHeader/BoardHeader'\r\nimport { useHistory } from 'react-router'\r\nimport { AddList } from '../../components/Board/AddList/AddList'\r\n\r\nexport const Board = () => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n  const boards = useSelector(state => state.userReducer.user?.boards)\r\n  const { _id: boardId = '', lists = [] } = useSelector(state => state.boardReducer.board) || {}\r\n\r\n  useEffect(() => {\r\n    if (!boards[0]) history.replace('/create-modal')\r\n    else {\r\n      socketService.emit(socketTypes.JOIN_BOARD, boardId)\r\n      socketService.on(socketTypes.BOARD_UPDATED, nextBoard => {\r\n        dispatch({ type: boardTypes.SET_BOARD, payload: nextBoard })\r\n      })\r\n    }\r\n    return () => {\r\n      socketService.emit(socketTypes.LEAVE_BOARD, boardId)\r\n      socketService.off(socketTypes.BOARD_UPDATED)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <main className=\"board flex col\">\r\n      <BoardHeader />\r\n      {boardId && (\r\n        <main className=\"container flex\">\r\n          {lists.map(list => (\r\n            <List list={list} key={list._id} />\r\n          ))}\r\n          <AddList />\r\n        </main>\r\n      )}\r\n    </main>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/icon-facebook.229c75a0.svg\";","export default __webpack_public_path__ + \"static/media/icon-linkedin.416b1433.svg\";","export default __webpack_public_path__ + \"static/media/icon-twitter.1d5c6d5e.svg\";","import { NavLink } from 'react-router-dom';\r\nimport facebookImg from '../../../assets/icon-facebook.svg';\r\nimport linkedinImg from '../../../assets/icon-linkedin.svg';\r\nimport twitterImg from '../../../assets/icon-twitter.svg';\r\n\r\n\r\nexport const HomeFooter = () => {\r\n\r\n  return (\r\n    <footer className=\"main-grid\">\r\n      <section className=\"footer-container\">\r\n        <nav>\r\n          <div className=\"logo-container\">\r\n            <div className=\"logo-div\">\r\n              <svg width=\"24\" height=\"24\" role=\"presentation\" focusable=\"false\" viewBox=\"0 0 24 24\"><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M3 5a2 2 0 012-2h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm2 1a1 1 0 011-1h4a1 1 0 011 1v10a1 1 0 01-1 1H6a1 1 0 01-1-1V6zm9-1a1 1 0 00-1 1v6a1 1 0 001 1h4a1 1 0 001-1V6a1 1 0 00-1-1h-4z\" fill=\"currentColor\"></path></svg>\r\n              <p>Tallo</p>\r\n            </div>\r\n            <div className=\"routes-container\">\r\n              <NavLink className=\"nav-item\" to=\"/\" exact>Home</NavLink>\r\n              <NavLink className=\"nav-item\" to=\"/board\">Board</NavLink>\r\n            </div>\r\n          </div>\r\n          <div className=\"address\">\r\n            <p>987 Hillcrest Lane</p>\r\n            <p>Irvine, CA</p>\r\n            <p>California 92714</p>\r\n            <p>Call Us : 949-833-7432</p>\r\n          </div>\r\n        </nav>\r\n        <div className=\"right-footer-container\">\r\n          <div className=\"social-container\">\r\n            <img src={facebookImg} alt=\"\" />\r\n            <img src={linkedinImg} alt=\"\" />\r\n            <img src={twitterImg} alt=\"\" />\r\n          </div>\r\n          <p>Copyright 2020. All Rights Reserved</p>\r\n        </div>\r\n      </section>\r\n    </footer>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/bg-pattern-home-3.4bc172f9.svg\";","import { useHistory } from 'react-router';\r\nimport patternThree from '../../../assets/bg-pattern-home-3.svg';\r\n\r\n\r\nexport const HomeGetStarted = () => {\r\n  const history = useHistory();\r\n\r\n  const onLogin = () => {\r\n    document.body.scrollTop = 0;\r\n    document.documentElement.scrollTop = 0;\r\n    history.push('/login-signup');\r\n  }\r\n\r\n  return (\r\n    <div className=\"get-started-section main-grid\">\r\n      <div className=\"container\">\r\n        <img src={patternThree} alt=\"\" />\r\n        <main>\r\n          <h2>Ready to get started?</h2>\r\n          <button onClick={onLogin}>Login / Signup</button>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/bg-pattern-home-1.270440fb.svg\";","export default __webpack_public_path__ + \"static/media/bg-pattern-home-2.889d5d8c.svg\";","import leftImg from '../../../assets/bg-pattern-home-1.svg';\r\nimport rightImg from '../../../assets/bg-pattern-home-2.svg';\r\n\r\n\r\nexport const HomeHero = () => {\r\n\r\n  return (\r\n    <div className=\"hero-section\">\r\n      <img className=\"left-img\" src={leftImg} alt=\"\" />\r\n      <div className=\"hero-title\">\r\n        <h1>Manage the</h1>\r\n        <h1>best <span>projects</span></h1>\r\n      </div>\r\n      <div className=\"side-container\">\r\n        <div></div>\r\n        <p>\r\n        Tallo helps teams work more collaboratively and get more done.\r\n        Tallo’s boards, lists, and cards enable teams to organize and prioritize projects in a fun,\r\n         flexible, and rewarding way.\r\n      </p>\r\n        <img className=\"right-img\" src={rightImg} alt=\"\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/icon-cog.c5d2403f.svg\";","export default __webpack_public_path__ + \"static/media/icon-chart.8de3d4d2.svg\";","export default __webpack_public_path__ + \"static/media/icon-person.0a313a85.svg\";","import iconCog from '../../../assets/icon-cog.svg';\r\nimport iconChart from '../../../assets/icon-chart.svg';\r\nimport iconPerson from '../../../assets/icon-person.svg';\r\n\r\n\r\nexport const HomeMain = () => {\r\n\r\n  return (\r\n    <div className=\"main-section main-grid\">\r\n      <section className=\"main-container\">\r\n        <div className=\"design-div\"></div>\r\n        <h2>Build &amp; manage your projects any time, anywhere.</h2>\r\n        <div className=\"secondary-container\">\r\n          <div className=\"item-container\">\r\n            <img src={iconPerson} alt=\"\" />\r\n            <div className=\"item-txt\">\r\n              <h4>Work with any team</h4>\r\n              <p>Whether it’s for work, a side project or even the next family vacation, Tallo helps your team stay organized.</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"item-container\">\r\n            <img src={iconCog} alt=\"\" />\r\n            <div className=\"item-txt\">\r\n              <h4>Always In Sync</h4>\r\n              <p>No matter where you are, Tallo stays in sync across all of your devices. Collaborate with your team anywhere.</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"item-container\">\r\n            <img src={iconChart} alt=\"\" />\r\n            <div className=\"item-txt\">\r\n              <h4>Information at a glance</h4>\r\n              <p>Dive into the details by adding attachments, due dates, and more directly to Tallo cards.</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/bg-pattern-home-4-about-3.aacd4e03.svg\";","export default __webpack_public_path__ + \"static/media/bg-pattern-home-5.95a2a621.svg\";","import patternOne from '../../../assets/bg-pattern-home-4-about-3.svg';\r\nimport patternTwo from '../../../assets/bg-pattern-home-5.svg';\r\n\r\n\r\nexport const HomeQuotes = () => {\r\n\r\n  return (\r\n    <div className=\"quotes-section main-grid\">\r\n    <img src={patternOne} alt=\"\" className=\"bgc-img-1\" />\r\n    <img src={patternTwo} alt=\"\" className=\"bgc-img-2\" />\r\n    <section className=\"quotes-container\">\r\n      <h1>Delivering real results for top companies. Some of our <span>success stories.</span></h1>\r\n      <main>\r\n        <div className=\"item\">\r\n          <p>“It’s easy to get your team up and running with Tallo. We’ve collected all of the boards and tools your team needs to succeed in one handy resource.”</p>\r\n          <div className=\"item-avatar\">\r\n            <h4>Tal Harouvi</h4>\r\n            <p>Full Stack Developer at Tallo</p>\r\n            <img src=\"https://res.cloudinary.com/ariecloud/image/upload/v1607248716/users/tal_fofpvu.jpg\" alt=\"\" />\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"67\" height=\"56\"><path fill=\"#2C6269\" d=\"M51.273 56c4.638 0 8.368-1.322 11.19-3.967 2.823-2.645 4.235-5.799 4.235-9.46 0-2.95-.429-5.494-1.286-7.63a197.251 197.251 0 01-2.495-6.562c-.806-2.237-1.21-4.933-1.21-8.087 0-2.746.454-5.798 1.361-9.155C63.976 7.782 65.286 4.069 67 0H55.356c-3.73 3.662-7.032 7.833-9.905 12.512-2.873 4.68-5.166 9.359-6.88 14.038C36.857 31.23 36 35.4 36 39.063c0 5.391 1.361 9.562 4.083 12.512C42.805 54.525 46.535 56 51.273 56zm-36 0c4.638 0 8.368-1.322 11.19-3.967 2.823-2.645 4.235-5.799 4.235-9.46 0-2.95-.429-5.494-1.286-7.63a197.251 197.251 0 01-2.495-6.562c-.806-2.237-1.21-4.933-1.21-8.087 0-2.746.454-5.798 1.361-9.155C27.976 7.782 29.286 4.069 31 0H19.356c-3.73 3.662-7.032 7.833-9.905 12.512-2.873 4.68-5.166 9.359-6.88 14.038C.857 31.23 0 35.4 0 39.063c0 5.391 1.361 9.562 4.083 12.512C6.805 54.525 10.535 56 15.273 56z\"/></svg>\r\n          </div>\r\n        </div>\r\n        <div className=\"item\">\r\n          <p>“Integrate the apps your team already uses directly into your workflow. Power-Ups turn Tallo boards into living applications to meet your team's unique business needs.”</p>\r\n          <div className=\"item-avatar\">\r\n            <h4>Arie Moldawsky</h4>\r\n            <p>Full Stack Developer at Tallo</p>\r\n            <img src=\"https://res.cloudinary.com/ariecloud/image/upload/v1611138519/users/66681D8E-0B6F-4F34-9FED-CCF9DF3B1E69_mftdzu.jpg\" alt=\"\" />\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"67\" height=\"56\"><path fill=\"#2C6269\" d=\"M51.273 56c4.638 0 8.368-1.322 11.19-3.967 2.823-2.645 4.235-5.799 4.235-9.46 0-2.95-.429-5.494-1.286-7.63a197.251 197.251 0 01-2.495-6.562c-.806-2.237-1.21-4.933-1.21-8.087 0-2.746.454-5.798 1.361-9.155C63.976 7.782 65.286 4.069 67 0H55.356c-3.73 3.662-7.032 7.833-9.905 12.512-2.873 4.68-5.166 9.359-6.88 14.038C36.857 31.23 36 35.4 36 39.063c0 5.391 1.361 9.562 4.083 12.512C42.805 54.525 46.535 56 51.273 56zm-36 0c4.638 0 8.368-1.322 11.19-3.967 2.823-2.645 4.235-5.799 4.235-9.46 0-2.95-.429-5.494-1.286-7.63a197.251 197.251 0 01-2.495-6.562c-.806-2.237-1.21-4.933-1.21-8.087 0-2.746.454-5.798 1.361-9.155C27.976 7.782 29.286 4.069 31 0H19.356c-3.73 3.662-7.032 7.833-9.905 12.512-2.873 4.68-5.166 9.359-6.88 14.038C.857 31.23 0 35.4 0 39.063c0 5.391 1.361 9.562 4.083 12.512C6.805 54.525 10.535 56 15.273 56z\"/></svg>\r\n          </div>\r\n        </div>\r\n        <div className=\"item\">\r\n          <p> “I've had absolutely nothing to do with this app untill they've reached me. I'm just an Israeli NBA Player and an ambassador of the app.”</p>\r\n          <div className=\"item-avatar\">\r\n            <h4>Deni Avdija</h4>\r\n            <p>NBA Player at Washington Wizards</p>\r\n            <img src=\"https://res.cloudinary.com/ariecloud/image/upload/v1610031903/deni_whuhmk.jpg\" alt=\"\" />\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"67\" height=\"56\"><path fill=\"#2C6269\" d=\"M51.273 56c4.638 0 8.368-1.322 11.19-3.967 2.823-2.645 4.235-5.799 4.235-9.46 0-2.95-.429-5.494-1.286-7.63a197.251 197.251 0 01-2.495-6.562c-.806-2.237-1.21-4.933-1.21-8.087 0-2.746.454-5.798 1.361-9.155C63.976 7.782 65.286 4.069 67 0H55.356c-3.73 3.662-7.032 7.833-9.905 12.512-2.873 4.68-5.166 9.359-6.88 14.038C36.857 31.23 36 35.4 36 39.063c0 5.391 1.361 9.562 4.083 12.512C42.805 54.525 46.535 56 51.273 56zm-36 0c4.638 0 8.368-1.322 11.19-3.967 2.823-2.645 4.235-5.799 4.235-9.46 0-2.95-.429-5.494-1.286-7.63a197.251 197.251 0 01-2.495-6.562c-.806-2.237-1.21-4.933-1.21-8.087 0-2.746.454-5.798 1.361-9.155C27.976 7.782 29.286 4.069 31 0H19.356c-3.73 3.662-7.032 7.833-9.905 12.512-2.873 4.68-5.166 9.359-6.88 14.038C.857 31.23 0 35.4 0 39.063c0 5.391 1.361 9.562 4.083 12.512C6.805 54.525 10.535 56 15.273 56z\"/></svg>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </section>\r\n  </div>\r\n  )\r\n}\r\n","import { useDispatch, useSelector } from 'react-redux'\r\nimport { useEffect } from 'react'\r\nimport { HomeFooter } from '../../components/Home/HomeFooter/HomeFooter'\r\nimport { HomeGetStarted } from '../../components/Home/HomeGetStarted/HomeGetStarted'\r\nimport { HomeHero } from '../../components/Home/HomeHero/HomeHero'\r\nimport { HomeMain } from '../../components/Home/HomeMain/HomeMain'\r\nimport { HomeQuotes } from '../../components/Home/HomeQuotes/HomeQuotes'\r\nimport { LOGIN } from '../../store/user/UserActions'\r\n\r\nexport const Home = props => {\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    var root = document.getElementById('root')\r\n    if (root.style.background !== 'linear-gradient(#006f83, #00aecc)') root.style.background = 'linear-gradient(#006f83, #00aecc)'\r\n  }, [])\r\n\r\n  return (\r\n    <main className=\"home main-grid\">\r\n      <HomeHero></HomeHero>\r\n      <HomeMain></HomeMain>\r\n      <HomeQuotes></HomeQuotes>\r\n      <HomeGetStarted></HomeGetStarted>\r\n      <HomeFooter></HomeFooter>\r\n    </main>\r\n  )\r\n}","import { Button } from '@material-ui/core'\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport const CardHeader = ({ title, handleEdit = () => {}, closeModal = () => {} }) => {\r\n  const listTitle = useSelector(state => state.boardReducer.list.title)\r\n\r\n  return (\r\n    <header className=\"fw grid tc-a1aa g8\">\r\n      <img className=\"section-icon asc gc1\" src={`${process.env.PUBLIC_URL}/Card.png`} alt=\"\" />\r\n      <input\r\n        className=\"gc2 title pointer\"\r\n        autoComplete=\"off\"\r\n        name=\"title\"\r\n        value={title}\r\n        onFocus={ev => ev.target.select()}\r\n        onChange={handleEdit}\r\n      />\r\n      <Button className=\"gc4 \" size=\"large\" onClick={closeModal}>\r\n        X\r\n      </Button>\r\n      <span className=\"gc2\">\r\n        in list <u>{listTitle}</u>\r\n      </span>\r\n    </header>\r\n  )\r\n}\r\n","import { useDispatch, useSelector } from 'react-redux'\r\nimport { UPDATE_CARD } from '../../../../store/board/BoardActions'\r\nimport { makeId } from '../../../../service/utilService'\r\nimport { useSetState } from 'react-use'\r\n\r\nexport const CheckListPopover = ({ togglePopover }) => {\r\n  const { _id: cardId = '', checklists = [] } = useSelector(state => state.boardReducer.card) || {}\r\n\r\n  const [checklist, setChecklist] = useSetState({\r\n    _id: makeId(),\r\n    title: '',\r\n    items: []\r\n  })\r\n  const dispatch = useDispatch()\r\n\r\n  const onAddChecklist = ev => {\r\n    ev.preventDefault()\r\n    dispatch(UPDATE_CARD({ name: 'checklist', value: [...checklists, checklist], cardId }))\r\n  }\r\n\r\n  const handleInput = ({ target: { value } }) => setChecklist({ title: value })\r\n\r\n  return (\r\n    <div className=\"popover-cmp checklist-section flex col\">\r\n      <button className=\"close-btn pos-tr\" onClick={togglePopover}>\r\n        X\r\n      </button>\r\n      <p className=\"title bold asc\">Add a Check List</p>\r\n      <form action=\"\" className=\"flex col\" onSubmit={onAddChecklist}>\r\n        <label htmlFor=\"checklist-title\">Title:</label>\r\n        <input\r\n          autoFocus\r\n          id=\"checklist-title\"\r\n          value={checklist.title}\r\n          onChange={handleInput}\r\n          type=\"text\"\r\n          placeholder=\"Insert a title...\"\r\n        />\r\n        <button>Add</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { UPDATE_CARD } from '../../../../store/board/BoardActions'\r\nimport { PopoverHeader } from '../../PopoverHeader'\r\n\r\nexport const DueDatePopover = ({ togglePopover }) => {\r\n  const { dueDate: prevDueDate, _id: cardId } = useSelector(state => state.boardReducer.card)\r\n  const [dateFormat, setDateFormat] = useState('')\r\n  const [dueDate, setDueDate] = useState(Date.now())\r\n  const dispatch = useDispatch()\r\n\r\n  const prevDate = () => {\r\n    if (prevDate) {\r\n      var toDate = new Date(prevDueDate).getDate()\r\n      var toMonth = new Date(prevDueDate).getMonth() + 1\r\n      var toYear = new Date(prevDueDate).getFullYear()\r\n      if (`${toMonth}`.length < 2) toMonth = '0' + toMonth\r\n      var originalDate = toYear + '-' + toMonth + '-' + toDate\r\n      return originalDate\r\n    } else return ''\r\n  }\r\n\r\n  const saveDueDate = ev => {\r\n    ev.preventDefault()\r\n    dispatch(UPDATE_CARD({ name: 'dueDate', value: dueDate, cardId }))\r\n    togglePopover(ev)\r\n  }\r\n\r\n  const onHandleChange = ev => {\r\n    const value = ev.target.value\r\n    const date = new Date(value)\r\n    const timestamp = date.getTime()\r\n    setDateFormat(value)\r\n    setDueDate(timestamp)\r\n  }\r\n\r\n  return (\r\n    <div className=\"popover-cmp due-date-section flex col\">\r\n      <PopoverHeader title=\"Due Date\" />\r\n      <form action=\"\" onSubmit={saveDueDate} className=\"due-date-form flex col\">\r\n        <input\r\n          type=\"date\"\r\n          value={dateFormat ? dateFormat : prevDate()}\r\n          onChange={onHandleChange}\r\n          name=\"dueDate\"\r\n          id=\"\"\r\n        />\r\n        <button>Save</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import axios from 'axios'\r\nimport { getNewTokens, newTokensNeeded } from './httpService'\r\n\r\nconst UPLOAD_PRESET = 'iuzstnbj'\r\nconst CLOUD_NAME = 'ariecloud'\r\nconst VIDEO = 'video/upload'\r\nconst IMAGE = 'image/upload'\r\nconst UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/`\r\n\r\nexport const mediaService = {\r\n  uploadImg: ev => upload(ev, IMAGE),\r\n\r\n  uploadVideo: ev => upload(ev, VIDEO)\r\n}\r\n\r\nconst upload = async (ev, endpoint) => {\r\n  const FORM_DATA = new FormData()\r\n  FORM_DATA.append('file', ev.target.files[0])\r\n  FORM_DATA.append('upload_preset', UPLOAD_PRESET)\r\n  try {\r\n    if (newTokensNeeded(endpoint)) await getNewTokens()\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: UPLOAD_URL + endpoint,\r\n      data: FORM_DATA\r\n    })\r\n    return res.data\r\n  } catch (err) {\r\n    console.error('ERROR:', err)\r\n  }\r\n}\r\n","import { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { mediaService } from '../../../../service/mediaService.js'\r\nimport { UPDATE_CARD } from '../../../../store/board/BoardActions.js'\r\n\r\nexport const AttachmentPopover = ({ togglePopover }) => {\r\n  const { attachments = [], _id: cardId = '' } = useSelector(state => state.boardReducer.card) || {}\r\n  const [attachmentUrl, setAttachmentUrl] = useState('')\r\n  const [isUploaded, setIsUploaded] = useState(false)\r\n  const dispatch = useDispatch()\r\n\r\n  const saveAttachment = ev => {\r\n    ev.preventDefault()\r\n    if (attachmentUrl)\r\n      dispatch(UPDATE_CARD({ name: 'attachments', value: [...attachments, attachmentUrl], cardId }))\r\n  }\r\n\r\n  const uploadImg = async ev => {\r\n    setIsUploaded(false)\r\n    const { secure_url } = await mediaService.uploadImg(ev)\r\n    setIsUploaded(true)\r\n    setAttachmentUrl(secure_url)\r\n  }\r\n\r\n  return (\r\n    <div className=\"attachment-section popover-cmp\">\r\n      <button className=\"close-btn pos-tr\" onClick={togglePopover}>\r\n        X\r\n      </button>\r\n      <p>Attachments</p>\r\n      <form action=\"\" onSubmit={saveAttachment} className=\"attachment-form\">\r\n        <label htmlFor=\"imgUrl\">\r\n          <p>Upload an attachment:</p>\r\n          <div className=\"label-container\">\r\n            <img\r\n              src=\"https://res.cloudinary.com/ariecloud/image/upload/v1611571897/tallo/PinClipart.com_button-clipart_321890_rkdp7l.png\"\r\n              alt=\"\"\r\n            />\r\n            {isUploaded && (\r\n              <svg className=\"uploaded-svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512.063 512.063\">\r\n                <g fill=\"#00df76\">\r\n                  <ellipse cx=\"256.032\" cy=\"256.032\" rx=\"255.949\" ry=\"256.032\" />\r\n                  <path d=\"M256.032 0l-.347.004v512.055l.347.004c141.357 0 255.949-114.629 255.949-256.032S397.389 0 256.032 0z\" />\r\n                </g>\r\n                <g fill=\"#fff\">\r\n                  <path d=\"M111.326 261.118L214.85 364.642c4.515 4.515 11.836 4.515 16.351 0l169.957-169.957c4.515-4.515 4.515-11.836 0-16.351l-30.935-30.935c-4.515-4.515-11.836-4.515-16.351 0L230.255 271.014c-4.515 4.515-11.836 4.515-16.351 0l-55.397-55.397c-4.426-4.426-11.571-4.526-16.119-.226l-30.83 29.149c-4.732 4.475-4.837 11.973-.232 16.578z\" />\r\n                  <path d=\"m370.223 147.398c-4.515-4.515-11.836-4.515-16.351 0l-98.187 98.187v94.573l145.473-145.473c4.515-4.515 4.515-11.836 0-16.352z\" />\r\n                </g>\r\n              </svg>\r\n            )}\r\n          </div>\r\n        </label>\r\n        <input className=\"upload-img\" type=\"file\" name=\"imgUrl\" onChange={uploadImg} id=\"imgUrl\" />\r\n        <button>Save</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useToggle } from 'react-use'\r\nimport { mediaService } from '../../../../service/mediaService.js'\r\nimport { UPDATE_CARD } from '../../../../store/board/BoardActions.js'\r\n\r\nexport const AddVideoPopover = ({ togglePopover }) => {\r\n  const cardId = useSelector(state => state.boardReducer.card._id) || ''\r\n  const [videoUrl, setVideoUrl] = useState('')\r\n  // const [isUploaded, setIsUploaded] = useToggle(false)\r\n  const dispatch = useDispatch()\r\n\r\n  const saveVideo = ev => {\r\n    ev.preventDefault()\r\n    if (videoUrl) dispatch(UPDATE_CARD({ name: 'cardVideo', value: videoUrl, cardId }))\r\n  }\r\n\r\n  const uploadVideo = async ev => {\r\n    // setIsUploaded(false)\r\n    const { secure_url } = await mediaService.uploadVideo(ev)\r\n    console.log(secure_url)\r\n    // setIsUploaded(true)\r\n    setVideoUrl(secure_url)\r\n  }\r\n\r\n  return (\r\n    <div className=\"attachment-section popover-cmp\">\r\n      <button className=\"close-btn pos-tr\" onClick={togglePopover}>\r\n        X\r\n      </button>\r\n      <p>Card Video</p>\r\n      <form action=\"\" onSubmit={saveVideo} className=\"attachment-form\">\r\n        <label htmlFor=\"videoUrl\">\r\n          <p>Upload a video:</p>\r\n          <div className=\"label-container\">\r\n            <img\r\n              src=\"https://res.cloudinary.com/ariecloud/image/upload/v1611571897/tallo/PinClipart.com_button-clipart_321890_rkdp7l.png\"\r\n              alt=\"\"\r\n            />\r\n            {videoUrl && (\r\n              <svg className=\"uploaded-svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512.063 512.063\">\r\n                <g fill=\"#00df76\">\r\n                  <ellipse cx=\"256.032\" cy=\"256.032\" rx=\"255.949\" ry=\"256.032\" />\r\n                  <path d=\"M256.032 0l-.347.004v512.055l.347.004c141.357 0 255.949-114.629 255.949-256.032S397.389 0 256.032 0z\" />\r\n                </g>\r\n                <g fill=\"#fff\">\r\n                  <path d=\"M111.326 261.118L214.85 364.642c4.515 4.515 11.836 4.515 16.351 0l169.957-169.957c4.515-4.515 4.515-11.836 0-16.351l-30.935-30.935c-4.515-4.515-11.836-4.515-16.351 0L230.255 271.014c-4.515 4.515-11.836 4.515-16.351 0l-55.397-55.397c-4.426-4.426-11.571-4.526-16.119-.226l-30.83 29.149c-4.732 4.475-4.837 11.973-.232 16.578z\" />\r\n                  <path d=\"m370.223 147.398c-4.515-4.515-11.836-4.515-16.351 0l-98.187 98.187v94.573l145.473-145.473c4.515-4.515 4.515-11.836 0-16.352z\" />\r\n                </g>\r\n              </svg>\r\n            )}\r\n          </div>\r\n        </label>\r\n        <input\r\n          className=\"upload-img\"\r\n          type=\"file\"\r\n          name=\"videoUrl\"\r\n          onChange={uploadVideo}\r\n          id=\"videoUrl\"\r\n        />\r\n        <button>Save</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import { CardMembersPopover } from '../../../components/Popover/PopoverCmps/Members/CardMembersPopover'\r\nimport { LabelsPopover } from '../../../components/Popover/PopoverCmps/Labels/LabelsPopover'\r\nimport { CheckListPopover } from '../../../components/Popover/PopoverCmps/CheckList/CheckListPopover'\r\nimport { DueDatePopover } from '../../../components/Popover/PopoverCmps/DueDate/DueDatePopover'\r\nimport { AttachmentPopover } from '../../../components/Popover/PopoverCmps/Attachment/AttachmentPopover'\r\nimport { MoveCardPopover } from '../../../components/Popover/PopoverCmps/MoveCard/MoveCardPopover'\r\nimport { DeletePopover } from '../../../components/Popover/PopoverCmps/Delete/DeletePopover'\r\nimport { AddVideoPopover } from '../../../components/Popover/PopoverCmps/AddVideo/VideoPopover'\r\nimport { Button } from '@material-ui/core'\r\nimport { usePopover } from '../../../components/Popover/Popover'\r\n\r\nexport const CardAside = () => {\r\n  const togglePopover = usePopover()\r\n\r\n  const cmpMap = {\r\n    Add_To_Card: {\r\n      Members: CardMembersPopover,\r\n      Labels: LabelsPopover,\r\n      Check_List: CheckListPopover,\r\n      Due_Date: DueDatePopover,\r\n      Attachment: AttachmentPopover,\r\n      Video: AddVideoPopover\r\n    },\r\n    Actions: {\r\n      Move_Card: MoveCardPopover,\r\n      Delete_Card: DeletePopover\r\n    }\r\n  }\r\n\r\n  const format = str => str.split('_').join(' ')\r\n  return (\r\n    <aside className=\"gb18\">\r\n      {Object.entries(cmpMap).map(([title, list]) => (\r\n        <div key={title} className=\"gb6\">\r\n          <h4>{format(title)}</h4>\r\n          <div className=\"buttons grid g6\">\r\n            {Object.entries(list).map(([name, cmp]) => (\r\n              <Button\r\n                size=\"large\"\r\n                className=\"gray flex js\"\r\n                onClick={ev => togglePopover(ev, cmp)}\r\n                key={name}>\r\n                <img className=\"icon\" src={process.env.PUBLIC_URL + `/${name}.png`} alt=\"\" />\r\n                <span>{format(name)}</span>\r\n              </Button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </aside>\r\n  )\r\n}\r\n","import { CardAvatar } from '../../../components/Avatars/CardAvatar'\r\nimport moment from 'moment'\r\nimport { useSelector } from 'react-redux'\r\nimport { Fragment } from 'react'\r\n\r\nexport const CardActivity = () => {\r\n  const activity = useSelector(state => state.boardReducer.card.activity)\r\n  const users = useSelector(state => state.boardReducer.board.users)\r\n  // The activity array contains only the user Id (createdBy)\r\n  // Here we get his name and image from the global users array\r\n  const activityWithUserData = activity.map(item => ({\r\n    ...item,\r\n    ...users.find(({ _id }) => _id === item.createdBy)\r\n  }))\r\n\r\n  const isSameUserAsPrev = idx =>\r\n    !idx || activity[idx]._id !== activity[idx - 1]._id ? false : true\r\n\r\n  return (\r\n    <div className=\"activity fw grid tc-aaaa1 g8\">\r\n      <img className=\"section-icon\" src={process.env.PUBLIC_URL + `/Activity.png`} alt=\"\" />\r\n      <h3 className=\"gc2-6\">Activity</h3>\r\n      {activityWithUserData.slice(0, 10).map((item, idx) => (\r\n        <Fragment key={item.createdAt}>\r\n          {!isSameUserAsPrev(idx) && (\r\n            <>\r\n              <CardAvatar className=\"gc2\" user={item} size=\"small\" />\r\n              <h4 className=\"gc3-6 asc\">{item.name} :</h4>\r\n            </>\r\n          )}\r\n          <span className=\"gc2-4\">{item.activity}</span>\r\n          <h5 className=\"gc5\">{moment(item.createdAt).fromNow()}</h5>\r\n        </Fragment>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import { TextField } from '@material-ui/core'\r\n\r\nexport const CardDescription = ({ desc, handleEdit = () => {} }) => {\r\n  return (\r\n    <div className=\"description fw grid tc-a1 g8\">\r\n      <img className=\"section-icon\" src={process.env.PUBLIC_URL + `/Description.png`} alt=\"\" />\r\n      <h3 className=\"gc2\">Description</h3>\r\n      <TextField\r\n        className=\"gc2\"\r\n        multiline\r\n        placeholder=\"Add a more detailed description...\"\r\n        rows={4}\r\n        variant=\"outlined\"\r\n        name=\"desc\"\r\n        value={desc}\r\n        onChange={handleEdit}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","import { useSelector } from 'react-redux'\r\nimport { VideoPlayer } from '../../../components/VideoPlayer/VideoPlayer'\r\n\r\nexport const CardVideo = () => {\r\n  const cardVideo = useSelector(state => state.boardReducer.card.cardVideo)\r\n\r\n  return cardVideo ? (\r\n    <div className=\"video fw grid tc-a1 g8\">\r\n      <img className=\"section-icon\" src={process.env.PUBLIC_URL + `/Video.png`} alt=\"\" />\r\n      <h3 className=\"gc2\">Card Video</h3>\r\n      <VideoPlayer className=\"gc2\" videoUrl={cardVideo} />\r\n    </div>\r\n  ) : (\r\n    <></>\r\n  )\r\n}\r\n","import { useSelector } from 'react-redux'\r\n\r\nexport const CardAttachments = () => {\r\n  const attachments = useSelector(state => state.boardReducer.card.attachments)\r\n\r\n  return attachments[0] ? (\r\n    <div className=\"attachments fw grid tc-a1 g8\">\r\n      <img className=\"section-icon\" src={process.env.PUBLIC_URL + `/Attachment.png`} alt=\"\" />\r\n      <h3 className=\"gc2\">Attachments</h3>\r\n      {attachments.slice(0, 3).map((attachment, idx) => (\r\n        <img className=\"gc2 item\" key={idx} src={attachment} alt=\"\" />\r\n      ))}\r\n    </div>\r\n  ) : (\r\n    <></>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport LinearProgress from '@material-ui/core/LinearProgress'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Box from '@material-ui/core/Box'\r\n\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box width=\"100%\" mr={1}>\r\n        <LinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box minWidth={35}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\">{`${Math.round(\r\n          props.value\r\n        )}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n  value: PropTypes.number.isRequired\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: '100%'\r\n  }\r\n})\r\n\r\nexport default function ProgressBar({ progress }) {\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <LinearProgressWithLabel value={progress} />\r\n    </div>\r\n  )\r\n}\r\n","import { Button, Checkbox } from '@material-ui/core'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { UPDATE_CARD } from '../../store/board/BoardActions'\r\nimport { useToggle, useSetState } from 'react-use'\r\nimport ProgressBar from './ProgressBar'\r\nimport { makeId } from '../../service/utilService'\r\n\r\nexport const CardChecklist = ({ checklist, checklists }) => {\r\n  const dispatch = useDispatch()\r\n  const cardId = useSelector(state => state.boardReducer.card._id)\r\n  const [showInput, toggleInput] = useToggle(false)\r\n  const [newItem, setNewItem] = useSetState({\r\n    _id: makeId(),\r\n    desc: '',\r\n    isChecked: false\r\n  }) \r\n  \r\n  const progressStatus = () => {\r\n    var checkedItems = checklist.items.filter(item => item.isChecked === true)\r\n    let res = (+checkedItems.length / +checklist.items.length) * 100\r\n    if (isNaN(res)) res = 0\r\n    return res\r\n  }\r\n\r\n  const toogleCheckBox = ({ target: { value } }) => {\r\n    let list = JSON.parse(JSON.stringify(checklist))\r\n    let lists = JSON.parse(JSON.stringify(checklists))\r\n    list.items[value].isChecked = !list.items[value].isChecked\r\n    const listIdx = lists.findIndex(aList => aList._id === list._id)\r\n    lists[listIdx] = list\r\n    dispatch(UPDATE_CARD({ name: 'checklist', value: [...lists], cardId }))\r\n  }\r\n\r\n  const addNewItem = async () => {\r\n    let list = JSON.parse(JSON.stringify(checklist))\r\n    let lists = JSON.parse(JSON.stringify(checklists))\r\n    const listIdx = lists.findIndex(aList => aList._id === list._id)\r\n    lists[listIdx].items.push(newItem)\r\n    await dispatch(UPDATE_CARD({ name: 'checklist', value: [...lists], cardId }))\r\n    setNewItem({ _id: makeId(), desc: '', isChecked: false })\r\n    toggleInput()\r\n  }\r\n\r\n  const removeItem = ({ target: { value } }) => {\r\n    let list = JSON.parse(JSON.stringify(checklist))\r\n    let lists = JSON.parse(JSON.stringify(checklists))\r\n    list.items.splice(value, 1)\r\n    const listIdx = lists.findIndex(aList => aList._id === list._id)\r\n    lists[listIdx] = list\r\n    dispatch(UPDATE_CARD({ name: 'checklist', value: [...lists], cardId }))\r\n  }\r\n\r\n  const handleInput = ({ target: { name, value } }) => setNewItem({ [name]: value })\r\n\r\n  const removeList = () => {\r\n    let lists = JSON.parse(JSON.stringify(checklists))\r\n    const listIdx = lists.findIndex(list => list._id === checklist._id)\r\n    lists.splice(listIdx, 1)\r\n    dispatch(UPDATE_CARD({ name: 'checklist', value: [...lists], cardId }))\r\n  }\r\n\r\n  return (\r\n    <div className=\"checklist gb6\">\r\n      <div className=\"flex ac gr10 sbl \">\r\n        <img className=\"section-icon\" src={process.env.PUBLIC_URL + `/Check_List.png`} alt=\"\" />\r\n        <h3>{checklist.title}</h3>\r\n        <Button className=\"gray\" onClick={removeList}>\r\n          Delete\r\n        </Button>\r\n      </div>\r\n      <div className=\"ml30\">\r\n        <ProgressBar progress={progressStatus()} />\r\n        <div className=\"flex wrap\">\r\n          {checklist.items.map((item, idx) => (\r\n            <div key={idx} className=\"item flex ac sbl ml-12\">\r\n              <Checkbox\r\n                color=\"primary\"\r\n                inputProps={{ 'aria-label': 'checkbox' }}\r\n                checked={item.isChecked}\r\n                value={idx}\r\n                onChange={toogleCheckBox}\r\n              />\r\n              <span>{item.desc}</span>\r\n              <Button className=\"\" value={idx} onClick={removeItem}>\r\n                X\r\n              </Button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        {!showInput ? (\r\n          <Button className=\"gray\" onClick={toggleInput}>\r\n            Add an item\r\n          </Button>\r\n        ) : (\r\n          <div className=\"flex col w50 gb6\">\r\n            <input autoFocus name=\"desc\" value={newItem.desc} onChange={handleInput} />\r\n            <div className=\"flex gr6\">\r\n              <Button className=\"green\" onClick={addNewItem}>\r\n                Add\r\n              </Button>\r\n              <Button className=\"\" onClick={toggleInput}>\r\n                X\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useSelector } from 'react-redux'\r\nimport { CardChecklist } from '../../../components/CardChecklist/CardChecklist'\r\nexport const CardChecklists = () => {\r\n  const checklists = useSelector(state => state.boardReducer.card.checklists) || []\r\n\r\n  return checklists[0] ? (\r\n    <div className=\"checklists fw gb10\">\r\n      {checklists.map((checklist, idx) => (\r\n        <CardChecklist key={idx} checklists={checklists} checklist={checklist} />\r\n      ))}\r\n    </div>\r\n  ) : (\r\n    <></>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router'\r\n\r\nexport const CardNav = () => {\r\n  const cards = useSelector(state => state.boardReducer.list?.cards)\r\n  const cardId = useSelector(state => state.boardReducer.card?._id)\r\n\r\n  const history = useHistory()\r\n\r\n  const cycleCards = ev => {\r\n    ev.stopPropagation()\r\n    const cardIdx = cards.findIndex(currCard => currCard._id === cardId)\r\n    const nextCardId = cardIdx > -1 && cards[cardIdx + +ev.currentTarget.value]?._id\r\n    if (nextCardId) history.push(nextCardId)\r\n  }\r\n\r\n  return cards ? (\r\n    <nav className=\"flex jb fw\">\r\n      <Button variant=\"outlined\" size=\"large\" className=\"white\" value={-1} onClick={cycleCards}>\r\n        Previous Card\r\n      </Button>\r\n      <Button variant=\"outlined\" size=\"large\" className=\"white\" value={1} onClick={cycleCards}>\r\n        Next Card\r\n      </Button>\r\n    </nav>\r\n  ) : (\r\n    <></>\r\n  )\r\n}\r\n","import { useSelector } from 'react-redux'\r\nimport { CardAvatars } from '../../../components/Avatars/CardAvatars'\r\nimport { usePopover } from '../../../components/Popover/Popover'\r\nimport { CardMembersPopover } from '../../../components/Popover/PopoverCmps/Members/CardMembersPopover'\r\n\r\nexport const CardMembers = () => {\r\n  const members = useSelector(state => state.boardReducer.card.members)\r\n  const users = useSelector(state => state.boardReducer.board.users)\r\n  const activeUsers = users.filter(({ _id }) => members.includes(_id))\r\n  const togglePopover = usePopover()\r\n\r\n\r\n  return members[0] ? (\r\n    <div className=\"members wfc ml32 gb6 pointer\" onClick={ev => togglePopover(ev, CardMembersPopover)}>\r\n      <h4>Members</h4>\r\n      <CardAvatars users={activeUsers} max={12} size=\"medium\" />\r\n    </div>\r\n  ) : (\r\n    <></>\r\n  )\r\n}\r\n","import { Button } from '@material-ui/core'\r\nimport { useSelector } from 'react-redux'\r\nimport { usePopover } from '../../../components/Popover/Popover'\r\nimport { LabelsPopover } from '../../../components/Popover/PopoverCmps/Labels/LabelsPopover'\r\n\r\nexport const CardLabels = () => {\r\n  const labels = useSelector(state => state.boardReducer.card.labels)\r\n  const gLabels = useSelector(state => state.boardReducer.board.labels)\r\n  const activelabels = gLabels.filter(({ _id }) => labels.includes(_id))\r\n  const togglePopover = usePopover()\r\n\r\n\r\n  return activelabels[0] ? (\r\n    <div className=\"labels ml32 pointer\" onClick={ev => togglePopover(ev, LabelsPopover)}>\r\n      <h4>Labels</h4>\r\n      <div className=\"flex gr6 wfc wrap\">\r\n        {activelabels.map(({ _id, color, title }) => (\r\n          <Button size=\"large\" className={`mt6 ${color}`} key={_id}>\r\n            {title}\r\n          </Button>\r\n        ))}\r\n        <Button size=\"large\" className={`mt6 gray`}>\r\n          +\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <></>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport { useKey, useSetState, useUpdateEffect } from 'react-use'\r\nimport { CLEAR_ITEMS, GET_BY_ID, UPDATE_CARD } from '../../store/board/BoardActions'\r\nimport { CardHeader } from './CardHeader/CardHeader'\r\nimport { CardAside } from './CardAside/CardAside'\r\nimport { CardActivity } from './CardMain/CardActivity'\r\nimport { CardDescription } from './CardMain/CardDescription'\r\nimport { CardVideo } from './CardMain/CardVideo'\r\nimport { CardAttachments } from './CardMain/CardAttachments'\r\nimport { CardChecklists } from './CardMain/CardChecklists'\r\nimport { CardNav } from './CardNav/CardNav'\r\nimport { CardMembers } from './CardMain/CardMembers'\r\nimport { CardLabels } from './CardMain/CardLabels'\r\nimport { ClickAwayListener } from '@material-ui/core'\r\n\r\nexport const CardModal = () => {\r\n  const history = useHistory()\r\n  const dispatch = useDispatch()\r\n\r\n  const { cardId } = useParams()\r\n  useEffect(() => dispatch(GET_BY_ID(cardId)), [cardId])\r\n\r\n  const card = useSelector(state => state.boardReducer.card)\r\n  const [{ title, desc }, setEditables] = useSetState({ title: '', desc: '' })\r\n  const updateEditablesOnCardNav = () => setEditables({ title: card.title, desc: card.desc })\r\n  useUpdateEffect(updateEditablesOnCardNav, [card?._id])\r\n\r\n  const closeModal = ev => {\r\n    if (ev.avoidCardModal || (ev.target === document.body && ev.type === 'click')) return\r\n    history.push('/board')\r\n    dispatch(CLEAR_ITEMS())\r\n  }\r\n  useKey('Escape', ev => setTimeout(() => closeModal(ev), 0))\r\n\r\n  const [timer, setTimer] = useState(null)\r\n  const handleEdit = ({ currentTarget: { name, value } }) => {\r\n    setEditables({ [name]: value })\r\n    clearTimeout(timer)\r\n    setTimer(setTimeout(() => dispatch(UPDATE_CARD({ name, value, cardId })), 500))\r\n  }\r\n\r\n  return (\r\n    <div className=\"modal-screen\">\r\n      <CardNav />\r\n      {card && (\r\n        <ClickAwayListener onClickAway={closeModal}>\r\n          <section className=\"card-modal white grid g16\">\r\n            <CardHeader title={title} handleEdit={handleEdit} closeModal={closeModal} />\r\n            <main className=\"flex wrap gb16  \">\r\n              <CardMembers />\r\n              <CardLabels />\r\n              <CardVideo />\r\n              <CardAttachments />\r\n              <CardDescription desc={desc} handleEdit={handleEdit} />\r\n              <CardChecklists />\r\n              <CardActivity />\r\n            </main>\r\n            <CardAside />\r\n          </section>\r\n        </ClickAwayListener>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useDispatch } from 'react-redux'\r\nimport { LOGIN, SIGNUP } from '../../store/user/UserActions'\r\nimport { mediaService } from '../../service/mediaService.js'\r\nimport { useHistory } from 'react-router'\r\nimport { useRef } from 'react'\r\nimport { useKey, useSetState, useToggle, useUpdateEffect } from 'react-use'\r\nimport { userService } from '../../service/userService'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { TextField } from '@material-ui/core'\r\n\r\nexport const LoginSingup = () => {\r\n  const dispatch = useDispatch()\r\n  const { goBack, push } = useHistory()\r\n  const [emailAvailable, setEmailAvailable] = useState(true)\r\n  const [timer, setTimer] = useState(null)\r\n  const [creds, setCreds] = useSetState({\r\n    email: '',\r\n    password: ''\r\n  })\r\n  const [user, setUser] = useSetState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    imgUrl: '',\r\n    boards: []\r\n  })\r\n\r\n  useKey('Escape', goBack)\r\n\r\n  // const handleInputLogin = ev => console.log(ev.target.name)\r\n  const handleInputLogin = ({ target: { name, value } }) => setCreds({ [name]: value })\r\n  const handleInputSignup = ({ target: { name, value } }) => setUser({ [name]: value })\r\n\r\n  useUpdateEffect(() => {\r\n    clearTimeout(timer)\r\n    setEmailAvailable(true)\r\n    if (!user.email) return\r\n    setTimer(\r\n      setTimeout(async () => {\r\n        const res = await userService.validateEmail(user.email)\r\n        setEmailAvailable(res)\r\n      }, 300)\r\n    )\r\n  }, [user.email])\r\n\r\n  const login = async ev => {\r\n    ev.preventDefault()\r\n    dispatch(LOGIN(creds))\r\n    push('/board')\r\n  }\r\n\r\n  const signup = async ev => {\r\n    ev.preventDefault()\r\n    if (!emailAvailable) return\r\n    dispatch(SIGNUP(user))\r\n    push('/board')\r\n  }\r\n\r\n  const uploadImg = async ev => {\r\n    const { secure_url } = await mediaService.uploadImg(ev)\r\n    setUser({ imgUrl: secure_url })\r\n  }\r\n\r\n  return (\r\n    <div className=\"modal-screen\" onClick={goBack}>\r\n      <div className=\"login-signup gb20\" onClick={ev => ev.stopPropagation()}>\r\n        <form className=\"login-form gb10\" onSubmit={login}>\r\n          <div className=\"flex ac jb\">\r\n            <h2>Login</h2>\r\n            <button className=\"btn \" onClick={goBack}>\r\n              X\r\n            </button>\r\n          </div>\r\n          <TextField\r\n            size=\"small\"\r\n            type=\"email\"\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            variant=\"outlined\"\r\n            value={creds.email}\r\n            onChange={handleInputLogin}\r\n          />\r\n\r\n          <TextField\r\n            size=\"small\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            variant=\"outlined\"\r\n            value={creds.password}\r\n            onChange={handleInputLogin}\r\n          />\r\n          <button className=\"btn blue large\">Login</button>\r\n        </form>\r\n        {/* <div className=\"forms-seperator\">-Or-</div> */}\r\n        <form className=\"signup-form gb10\" onSubmit={signup}>\r\n          <h2>Signup</h2>\r\n          <TextField\r\n            size=\"small\"\r\n            label=\"Name\"\r\n            name=\"name\"\r\n            variant=\"outlined\"\r\n            value={user.name}\r\n            onChange={handleInputSignup}\r\n          />\r\n          <TextField\r\n            size=\"small\"\r\n            type=\"email\"\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            variant=\"outlined\"\r\n            value={user.email}\r\n            onChange={handleInputSignup}\r\n          />\r\n\r\n          <TextField\r\n            size=\"small\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            variant=\"outlined\"\r\n            value={user.password}\r\n            onChange={handleInputSignup}\r\n          />\r\n          <label>\r\n            <p>Upload a Profile Picture:</p>\r\n            <img\r\n              src=\"https://res.cloudinary.com/ariecloud/image/upload/v1611571897/tallo/PinClipart.com_button-clipart_321890_rkdp7l.png\"\r\n              alt=\"\"\r\n            />\r\n            <input className=\"upload-img\" type=\"file\" name=\"imgUrl\" onChange={uploadImg} />\r\n          </label>\r\n          <button className=\"btn blue large\">Signup</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useDragLayer } from 'react-dnd'\r\nimport { List } from '../Board/List/List'\r\nimport { CardPreview } from '../Board/CardPreview/CardPreview'\r\n\r\nexport const DragLayer = () => {\r\n  const { item, pos } = useDragLayer(monitor => ({\r\n    item: monitor.getItem(),\r\n    pos: monitor.getSourceClientOffset()\r\n  }))\r\n\r\n  const { type, list, card, width, height } = item || {}\r\n\r\n  return (\r\n    item &&\r\n    !!pos && (\r\n      <div\r\n        className={`drag-layer ${type}`}\r\n        style={{\r\n          top: `${pos.y}px`,\r\n          left: `${pos.x}px`,\r\n          width: `${width}px`,\r\n          height: `${height}px`\r\n        }}>\r\n        {type === 'LIST' && <List list={list} isDragLayer={true}/>}\r\n        {type === 'CARD' && <CardPreview card={card} isDragLayer={true}/>}\r\n      </div>\r\n    )\r\n  )\r\n}\r\n","export const Loader = () => {\r\n  return (\r\n    <div className=\"fp flex ac jc\">\r\n      <div className=\"sk-chase\">\r\n        <div className=\"sk-chase-dot\"></div>\r\n        <div className=\"sk-chase-dot\"></div>\r\n        <div className=\"sk-chase-dot\"></div>\r\n        <div className=\"sk-chase-dot\"></div>\r\n        <div className=\"sk-chase-dot\"></div>\r\n        <div className=\"sk-chase-dot\"></div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useDispatch, useSelector } from 'react-redux'\r\nimport { useBeforeunload } from 'react-beforeunload'\r\nimport { Redirect, Route, Switch } from 'react-router-dom'\r\nimport { DEMO_LOGIN } from './store/user/UserActions'\r\nimport { useMount } from 'react-use'\r\nimport { socketService } from './service/socketService'\r\nimport { Header } from './components/Header/Header'\r\nimport { Board } from './pages/Board/Board'\r\nimport { Home } from './pages/Home/Home'\r\nimport { CardModal } from './pages/CardModal/CardModal'\r\nimport { LoginSingup } from './components/LoginSignup/LoginSignup'\r\nimport { DragLayer } from './components/DragLayer/DragLayer'\r\nimport { Loader } from './components/Loader/Loader'\r\nimport { Popover } from './components/Popover/Popover'\r\nimport './styles/styles.scss'\r\n\r\nexport const App = () => {\r\n  const dispatch = useDispatch()\r\n  const { user, isLoading } = useSelector(state => state.userReducer) || {}\r\n\r\n  useMount(() => {\r\n    dispatch(DEMO_LOGIN())\r\n    socketService.setup()\r\n  })\r\n\r\n  useBeforeunload(socketService.terminate)\r\n\r\n  const PrivateRoute = props => (user?._id ? <Route {...props} /> : <Redirect to=\"/\" />)\r\n\r\n  return isLoading ? (\r\n    <Loader />\r\n  ) : (\r\n    <>\r\n      <Header />\r\n      <Switch>\r\n        <PrivateRoute path=\"/board\" component={Board} />\r\n        <Route path=\"/\" component={Home} />\r\n      </Switch>\r\n      <PrivateRoute path=\"/board/modal/:cardId\" component={CardModal} />\r\n      <Route path=\"/login-signup\" component={LoginSingup} />\r\n      <Popover />\r\n      <DragLayer />\r\n    </>\r\n  )\r\n}\r\n","import { StrictMode } from 'react'\r\nimport { render } from 'react-dom'\r\nimport { HashRouter as RouterProvider } from 'react-router-dom'\r\nimport { Provider as ReduxProvider } from 'react-redux'\r\nimport { Provider as EventBusProvider } from 'react-bus'\r\n\r\nimport { store } from './store/Store'\r\nimport { DndProvider } from 'react-dnd'\r\nimport MouseBackEnd from 'react-dnd-mouse-backend'\r\nimport { TouchBackend } from 'react-dnd-touch-backend'\r\nimport { App } from './App.jsx'\r\n\r\n// const hasNative = document && (document.elementsFromPoint || document.msElementsFromPoint)\r\n// function getDropTargetElementsAtPoint(x, y, dropTargets) {\r\n//   return dropTargets.filter(t => {\r\n//     const rect = t.getBoundingClientRect()\r\n//     return (\r\n//       x >= rect.left &&\r\n//       x <= rect.right &&\r\n//       y <= rect.bottom &&\r\n//       y >= rect.top\r\n//     )\r\n//   })\r\n// }\r\n\r\n// function getDropTargetElementsAtPoint(x, y, dropTargets) {\r\n//   return dropTargets.filter(t => {\r\n//     const rect = t.getBoundingClientRect()\r\n//     return x >= rect.left && x <= rect.right && y <= rect.bottom && y >= rect.top\r\n//   })\r\n// }\r\n\r\n// const backendOptions = {\r\n//   getDropTargetElementsAtPoint: !hasNative && getDropTargetElementsAtPoint\r\n// }\r\n\r\nrender(\r\n  // <StrictMode>\r\n  <EventBusProvider>\r\n    <RouterProvider>\r\n      <ReduxProvider store={store}>\r\n        <DndProvider backend={MouseBackEnd}>\r\n          <App />\r\n        </DndProvider>\r\n      </ReduxProvider>\r\n    </RouterProvider>\r\n  </EventBusProvider>,\r\n  // </StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// navigator.serviceWorker.register('./serviceWorker.js');\r\n"],"sourceRoot":""}